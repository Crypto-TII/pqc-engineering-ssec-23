\doxysection{ntlmpool.\+py}
\hypertarget{ntlmpool_8py_source}{}\label{ntlmpool_8py_source}\index{/home/liwuen/projects\_dev/pqc-\/engineering-\/ssec-\/23/venv/lib/python3.12/site-\/packages/pip/\_vendor/urllib3/contrib/ntlmpool.py@{/home/liwuen/projects\_dev/pqc-\/engineering-\/ssec-\/23/venv/lib/python3.12/site-\/packages/pip/\_vendor/urllib3/contrib/ntlmpool.py}}
\mbox{\hyperlink{ntlmpool_8py}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00001}\mbox{\hyperlink{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1ntlmpool}{00001}}\ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00002}00002\ \textcolor{stringliteral}{NTLM\ authenticating\ pool,\ contributed\ by\ erikcederstran}}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00003}00003\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00004}00004\ \textcolor{stringliteral}{Issue\ \#10,\ see:\ http://code.google.com/p/urllib3/issues/detail?id=10}}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00005}00005\ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00006}00006\ \textcolor{keyword}{from}\ \_\_future\_\_\ \textcolor{keyword}{import}\ absolute\_import}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00007}00007\ }
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00008}00008\ \textcolor{keyword}{import}\ warnings}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00009}00009\ \textcolor{keyword}{from}\ logging\ \textcolor{keyword}{import}\ getLogger}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00010}00010\ }
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00011}00011\ \textcolor{keyword}{from}\ ntlm\ \textcolor{keyword}{import}\ ntlm}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00012}00012\ }
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00013}00013\ \textcolor{keyword}{from}\ ..\ \textcolor{keyword}{import}\ HTTPSConnectionPool}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00014}00014\ \textcolor{keyword}{from}\ ..\mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{packages.six.moves.http\_client}}\ \textcolor{keyword}{import}\ HTTPSConnection}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00015}00015\ }
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00016}00016\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{warnings.warn}}(}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00017}00017\ \ \ \ \ \textcolor{stringliteral}{"{}The\ 'urllib3.contrib.ntlmpool'\ module\ is\ deprecated\ and\ will\ be\ removed\ "{}}}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00018}00018\ \ \ \ \ \textcolor{stringliteral}{"{}in\ urllib3\ v2.0\ release,\ urllib3\ is\ not\ able\ to\ support\ it\ properly\ due\ "{}}}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00019}00019\ \ \ \ \ \textcolor{stringliteral}{"{}to\ reasons\ listed\ in\ issue:\ https://github.com/urllib3/urllib3/issues/2282.\ "{}}}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00020}00020\ \ \ \ \ \textcolor{stringliteral}{"{}If\ you\ are\ a\ user\ of\ this\ module\ please\ comment\ in\ the\ mentioned\ issue."{}},}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00021}00021\ \ \ \ \ DeprecationWarning,}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00022}00022\ )}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00023}00023\ }
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00024}\mbox{\hyperlink{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1ntlmpool_ab09a63eb35b270b5cdbead1983ebdccb}{00024}}\ log\ =\ getLogger(\_\_name\_\_)}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00025}00025\ }
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00026}00026\ }
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00027}\mbox{\hyperlink{classpip_1_1__vendor_1_1urllib3_1_1contrib_1_1ntlmpool_1_1NTLMConnectionPool}{00027}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classpip_1_1__vendor_1_1urllib3_1_1contrib_1_1ntlmpool_1_1NTLMConnectionPool}{NTLMConnectionPool}}(HTTPSConnectionPool):}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00028}00028\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00029}00029\ \textcolor{stringliteral}{\ \ \ \ Implements\ an\ NTLM\ authentication\ version\ of\ an\ urllib3\ connection\ pool}}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00030}00030\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00031}00031\ }
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00032}\mbox{\hyperlink{classpip_1_1__vendor_1_1urllib3_1_1contrib_1_1ntlmpool_1_1NTLMConnectionPool_aa8b5d296ae375fbbb36b4947e80559ba}{00032}}\ \ \ \ \ scheme\ =\ \textcolor{stringliteral}{"{}https"{}}}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00033}00033\ }
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00034}\mbox{\hyperlink{classpip_1_1__vendor_1_1urllib3_1_1contrib_1_1ntlmpool_1_1NTLMConnectionPool_aaca53114b272d9e1f996ff9d7c72a5a1}{00034}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classpip_1_1__vendor_1_1urllib3_1_1contrib_1_1ntlmpool_1_1NTLMConnectionPool_aaca53114b272d9e1f996ff9d7c72a5a1}{\_\_init\_\_}}(self,\ user,\ pw,\ authurl,\ *args,\ **kwargs):}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00035}00035\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00036}00036\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ authurl\ is\ a\ random\ URL\ on\ the\ server\ that\ is\ protected\ by\ NTLM.}}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00037}00037\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ user\ is\ the\ Windows\ user,\ probably\ in\ the\ DOMAIN\(\backslash\)\(\backslash\)username\ format.}}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00038}00038\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ pw\ is\ the\ password\ for\ the\ user.}}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00039}00039\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00040}00040\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{super}}(NTLMConnectionPool,\ self).\mbox{\hyperlink{classpip_1_1__vendor_1_1urllib3_1_1contrib_1_1ntlmpool_1_1NTLMConnectionPool_aaca53114b272d9e1f996ff9d7c72a5a1}{\_\_init\_\_}}(*args,\ **kwargs)}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00041}\mbox{\hyperlink{classpip_1_1__vendor_1_1urllib3_1_1contrib_1_1ntlmpool_1_1NTLMConnectionPool_a419e7c846fa0d92017f54cb3bc667964}{00041}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classpip_1_1__vendor_1_1urllib3_1_1contrib_1_1ntlmpool_1_1NTLMConnectionPool_a419e7c846fa0d92017f54cb3bc667964}{authurl}}\ =\ authurl}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00042}\mbox{\hyperlink{classpip_1_1__vendor_1_1urllib3_1_1contrib_1_1ntlmpool_1_1NTLMConnectionPool_a4bccdc6b1ec70842ab957b68bedced1c}{00042}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classpip_1_1__vendor_1_1urllib3_1_1contrib_1_1ntlmpool_1_1NTLMConnectionPool_a4bccdc6b1ec70842ab957b68bedced1c}{rawuser}}\ =\ user}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00043}00043\ \ \ \ \ \ \ \ \ user\_parts\ =\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{user.split}}(\textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)"{}},\ 1)}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00044}\mbox{\hyperlink{classpip_1_1__vendor_1_1urllib3_1_1contrib_1_1ntlmpool_1_1NTLMConnectionPool_a8a6287602630db6aeffcb6cf5787a216}{00044}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classpip_1_1__vendor_1_1urllib3_1_1contrib_1_1ntlmpool_1_1NTLMConnectionPool_a8a6287602630db6aeffcb6cf5787a216}{domain}}\ =\ user\_parts[0].\mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{upper}}()}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00045}\mbox{\hyperlink{classpip_1_1__vendor_1_1urllib3_1_1contrib_1_1ntlmpool_1_1NTLMConnectionPool_a5cc32e366c87c4cb49e4309b75f57d64}{00045}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classpip_1_1__vendor_1_1urllib3_1_1contrib_1_1ntlmpool_1_1NTLMConnectionPool_a5cc32e366c87c4cb49e4309b75f57d64}{user}}\ =\ user\_parts[1]}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00046}\mbox{\hyperlink{classpip_1_1__vendor_1_1urllib3_1_1contrib_1_1ntlmpool_1_1NTLMConnectionPool_af62c622f63efafe1c3e3d04c76c0784a}{00046}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classpip_1_1__vendor_1_1urllib3_1_1contrib_1_1ntlmpool_1_1NTLMConnectionPool_af62c622f63efafe1c3e3d04c76c0784a}{pw}}\ =\ pw}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00047}00047\ }
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00048}\mbox{\hyperlink{classpip_1_1__vendor_1_1urllib3_1_1contrib_1_1ntlmpool_1_1NTLMConnectionPool_a4a9f560c3c54435a632c860fe48a9b4c}{00048}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classpip_1_1__vendor_1_1urllib3_1_1contrib_1_1ntlmpool_1_1NTLMConnectionPool_a4a9f560c3c54435a632c860fe48a9b4c}{\_new\_conn}}(self):}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00049}00049\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Performs\ the\ NTLM\ handshake\ that\ secures\ the\ connection.\ The\ socket}}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00050}00050\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ must\ be\ kept\ open\ while\ requests\ are\ performed.}}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00051}00051\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classpip_1_1__vendor_1_1urllib3_1_1contrib_1_1ntlmpool_1_1NTLMConnectionPool_a05b6b9c846c4cdcdbf181be5fdefacec}{num\_connections}}\ +=\ 1}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00052}00052\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{log.debug}}(}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00053}00053\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Starting\ NTLM\ HTTPS\ connection\ no.\ \%d:\ https://\%s\%s"{}},}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00054}\mbox{\hyperlink{classpip_1_1__vendor_1_1urllib3_1_1contrib_1_1ntlmpool_1_1NTLMConnectionPool_a05b6b9c846c4cdcdbf181be5fdefacec}{00054}}\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classpip_1_1__vendor_1_1urllib3_1_1contrib_1_1ntlmpool_1_1NTLMConnectionPool_a05b6b9c846c4cdcdbf181be5fdefacec}{num\_connections}},}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00055}\mbox{\hyperlink{classpip_1_1__vendor_1_1urllib3_1_1contrib_1_1ntlmpool_1_1NTLMConnectionPool_a832ddc04754e8a43d4f3c6165b1294a7}{00055}}\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classpip_1_1__vendor_1_1urllib3_1_1contrib_1_1ntlmpool_1_1NTLMConnectionPool_a832ddc04754e8a43d4f3c6165b1294a7}{host}},}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00056}00056\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classpip_1_1__vendor_1_1urllib3_1_1contrib_1_1ntlmpool_1_1NTLMConnectionPool_a419e7c846fa0d92017f54cb3bc667964}{authurl}},}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00057}00057\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00058}00058\ }
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00059}00059\ \ \ \ \ \ \ \ \ headers\ =\ \{\textcolor{stringliteral}{"{}Connection"{}}:\ \textcolor{stringliteral}{"{}Keep-\/Alive"{}}\}}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00060}00060\ \ \ \ \ \ \ \ \ req\_header\ =\ \textcolor{stringliteral}{"{}Authorization"{}}}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00061}00061\ \ \ \ \ \ \ \ \ resp\_header\ =\ \textcolor{stringliteral}{"{}www-\/authenticate"{}}}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00062}00062\ }
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00063}00063\ \ \ \ \ \ \ \ \ conn\ =\ HTTPSConnection(host=self.\mbox{\hyperlink{classpip_1_1__vendor_1_1urllib3_1_1contrib_1_1ntlmpool_1_1NTLMConnectionPool_a832ddc04754e8a43d4f3c6165b1294a7}{host}},\ port=self.port)}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00064}00064\ }
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00065}00065\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Send\ negotiation\ message}}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00066}00066\ \ \ \ \ \ \ \ \ headers[req\_header]\ =\ \textcolor{stringliteral}{"{}NTLM\ \%s"{}}\ \%\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{ntlm.create\_NTLM\_NEGOTIATE\_MESSAGE}}(}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00067}00067\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classpip_1_1__vendor_1_1urllib3_1_1contrib_1_1ntlmpool_1_1NTLMConnectionPool_a4bccdc6b1ec70842ab957b68bedced1c}{rawuser}}}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00068}00068\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00069}00069\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{log.debug}}(\textcolor{stringliteral}{"{}Request\ headers:\ \%s"{}},\ headers)}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00070}00070\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{conn.request}}(\textcolor{stringliteral}{"{}GET"{}},\ self.\mbox{\hyperlink{classpip_1_1__vendor_1_1urllib3_1_1contrib_1_1ntlmpool_1_1NTLMConnectionPool_a419e7c846fa0d92017f54cb3bc667964}{authurl}},\ \textcolor{keywordtype}{None},\ headers)}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00071}00071\ \ \ \ \ \ \ \ \ res\ =\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{conn.getresponse}}()}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00072}00072\ \ \ \ \ \ \ \ \ reshdr\ =\ dict(\mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{res.headers}})}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00073}00073\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{log.debug}}(\textcolor{stringliteral}{"{}Response\ status:\ \%s\ \%s"{}},\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{res.status}},\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{res.reason}})}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00074}00074\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{log.debug}}(\textcolor{stringliteral}{"{}Response\ headers:\ \%s"{}},\ reshdr)}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00075}00075\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{log.debug}}(\textcolor{stringliteral}{"{}Response\ data:\ \%s\ [...]"{}},\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{res.read}}(100))}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00076}00076\ }
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00077}00077\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Remove\ the\ reference\ to\ the\ socket,\ so\ that\ it\ can\ not\ be\ closed\ by}}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00078}00078\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ the\ response\ object\ (we\ want\ to\ keep\ the\ socket\ open)}}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00079}00079\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{res.fp}}\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00080}00080\ }
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00081}00081\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Server\ should\ respond\ with\ a\ challenge\ message}}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00082}00082\ \ \ \ \ \ \ \ \ auth\_header\_values\ =\ reshdr[resp\_header].split(\textcolor{stringliteral}{"{},\ "{}})}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00083}00083\ \ \ \ \ \ \ \ \ auth\_header\_value\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00084}00084\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ s\ \textcolor{keywordflow}{in}\ auth\_header\_values:}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00085}00085\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ s[:5]\ ==\ \textcolor{stringliteral}{"{}NTLM\ "{}}:}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00086}00086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ auth\_header\_value\ =\ s[5:]}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00087}00087\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ auth\_header\_value\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00088}00088\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ Exception(}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00089}00089\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Unexpected\ \%s\ response\ header:\ \%s"{}}\ \%\ (resp\_header,\ reshdr[resp\_header])}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00090}00090\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00091}00091\ }
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00092}00092\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Send\ authentication\ message}}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00093}00093\ \ \ \ \ \ \ \ \ ServerChallenge,\ NegotiateFlags\ =\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{ntlm.parse\_NTLM\_CHALLENGE\_MESSAGE}}(}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00094}00094\ \ \ \ \ \ \ \ \ \ \ \ \ auth\_header\_value}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00095}00095\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00096}00096\ \ \ \ \ \ \ \ \ auth\_msg\ =\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{ntlm.create\_NTLM\_AUTHENTICATE\_MESSAGE}}(}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00097}00097\ \ \ \ \ \ \ \ \ \ \ \ \ ServerChallenge,\ self.\mbox{\hyperlink{classpip_1_1__vendor_1_1urllib3_1_1contrib_1_1ntlmpool_1_1NTLMConnectionPool_a5cc32e366c87c4cb49e4309b75f57d64}{user}},\ self.\mbox{\hyperlink{classpip_1_1__vendor_1_1urllib3_1_1contrib_1_1ntlmpool_1_1NTLMConnectionPool_a8a6287602630db6aeffcb6cf5787a216}{domain}},\ self.\mbox{\hyperlink{classpip_1_1__vendor_1_1urllib3_1_1contrib_1_1ntlmpool_1_1NTLMConnectionPool_af62c622f63efafe1c3e3d04c76c0784a}{pw}},\ NegotiateFlags}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00098}00098\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00099}00099\ \ \ \ \ \ \ \ \ headers[req\_header]\ =\ \textcolor{stringliteral}{"{}NTLM\ \%s"{}}\ \%\ auth\_msg}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00100}00100\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{log.debug}}(\textcolor{stringliteral}{"{}Request\ headers:\ \%s"{}},\ headers)}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00101}00101\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{conn.request}}(\textcolor{stringliteral}{"{}GET"{}},\ self.\mbox{\hyperlink{classpip_1_1__vendor_1_1urllib3_1_1contrib_1_1ntlmpool_1_1NTLMConnectionPool_a419e7c846fa0d92017f54cb3bc667964}{authurl}},\ \textcolor{keywordtype}{None},\ headers)}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00102}00102\ \ \ \ \ \ \ \ \ res\ =\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{conn.getresponse}}()}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00103}00103\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{log.debug}}(\textcolor{stringliteral}{"{}Response\ status:\ \%s\ \%s"{}},\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{res.status}},\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{res.reason}})}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00104}00104\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{log.debug}}(\textcolor{stringliteral}{"{}Response\ headers:\ \%s"{}},\ dict(\mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{res.headers}}))}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00105}00105\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{log.debug}}(\textcolor{stringliteral}{"{}Response\ data:\ \%s\ [...]"{}},\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{res.read}}()[:100])}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00106}00106\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{res.status}}\ !=\ 200:}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00107}00107\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{res.status}}\ ==\ 401:}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00108}00108\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ Exception(\textcolor{stringliteral}{"{}Server\ rejected\ request:\ wrong\ username\ or\ password"{}})}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00109}00109\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ Exception(\textcolor{stringliteral}{"{}Wrong\ server\ response:\ \%s\ \%s"{}}\ \%\ (\mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{res.status}},\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{res.reason}}))}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00110}00110\ }
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00111}00111\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{res.fp}}\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00112}00112\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{log.debug}}(\textcolor{stringliteral}{"{}Connection\ established"{}})}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00113}00113\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ conn}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00114}00114\ }
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00115}\mbox{\hyperlink{classpip_1_1__vendor_1_1urllib3_1_1contrib_1_1ntlmpool_1_1NTLMConnectionPool_aa01cdd6b35e271ed4b1b6629570a7b1b}{00115}}\ \ \ \ \ \textcolor{keyword}{def\ }urlopen(}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00116}00116\ \ \ \ \ \ \ \ \ self,}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00117}00117\ \ \ \ \ \ \ \ \ method,}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00118}00118\ \ \ \ \ \ \ \ \ url,}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00119}00119\ \ \ \ \ \ \ \ \ body=None,}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00120}00120\ \ \ \ \ \ \ \ \ headers=None,}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00121}00121\ \ \ \ \ \ \ \ \ retries=3,}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00122}00122\ \ \ \ \ \ \ \ \ redirect=True,}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00123}00123\ \ \ \ \ \ \ \ \ assert\_same\_host=True,}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00124}00124\ \ \ \ \ ):}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00125}00125\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ headers\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00126}00126\ \ \ \ \ \ \ \ \ \ \ \ \ headers\ =\ \{\}}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00127}00127\ \ \ \ \ \ \ \ \ headers[\textcolor{stringliteral}{"{}Connection"{}}]\ =\ \textcolor{stringliteral}{"{}Keep-\/Alive"{}}}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00128}00128\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{super}}(NTLMConnectionPool,\ self).urlopen(}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00129}00129\ \ \ \ \ \ \ \ \ \ \ \ \ method,\ url,\ body,\ headers,\ retries,\ redirect,\ assert\_same\_host}
\DoxyCodeLine{\Hypertarget{ntlmpool_8py_source_l00130}00130\ \ \ \ \ \ \ \ \ )}

\end{DoxyCode}
