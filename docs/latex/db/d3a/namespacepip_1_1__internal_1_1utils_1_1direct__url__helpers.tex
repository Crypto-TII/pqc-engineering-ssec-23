\doxysection{pip.\+\_\+internal.\+utils.\+direct\+\_\+url\+\_\+helpers Namespace Reference}
\hypertarget{namespacepip_1_1__internal_1_1utils_1_1direct__url__helpers}{}\label{namespacepip_1_1__internal_1_1utils_1_1direct__url__helpers}\index{pip.\_internal.utils.direct\_url\_helpers@{pip.\_internal.utils.direct\_url\_helpers}}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
str \mbox{\hyperlink{namespacepip_1_1__internal_1_1utils_1_1direct__url__helpers_ad2978aa32aac31ab00384d2b58ef10f7}{direct\+\_\+url\+\_\+as\+\_\+pep440\+\_\+direct\+\_\+reference}} (\mbox{\hyperlink{classpip_1_1__internal_1_1models_1_1direct__url_1_1_direct_url}{Direct\+Url}} direct\+\_\+url, str name)
\item 
\mbox{\hyperlink{classpip_1_1__internal_1_1models_1_1direct__url_1_1_direct_url}{Direct\+Url}} \mbox{\hyperlink{namespacepip_1_1__internal_1_1utils_1_1direct__url__helpers_acfbe9e1178538454ada141c7ad2cbd78}{direct\+\_\+url\+\_\+for\+\_\+editable}} (str source\+\_\+dir)
\item 
\mbox{\hyperlink{classpip_1_1__internal_1_1models_1_1direct__url_1_1_direct_url}{Direct\+Url}} \mbox{\hyperlink{namespacepip_1_1__internal_1_1utils_1_1direct__url__helpers_a636d0b34a8699701ff6205821261101f}{direct\+\_\+url\+\_\+from\+\_\+link}} (\mbox{\hyperlink{classpip_1_1__internal_1_1models_1_1link_1_1_link}{Link}} link, Optional\mbox{[}str\mbox{]} source\+\_\+dir=None, bool link\+\_\+is\+\_\+in\+\_\+wheel\+\_\+cache=False)
\end{DoxyCompactItemize}


\label{doc-func-members}
\Hypertarget{namespacepip_1_1__internal_1_1utils_1_1direct__url__helpers_doc-func-members}
\doxysubsection{Function Documentation}
\Hypertarget{namespacepip_1_1__internal_1_1utils_1_1direct__url__helpers_ad2978aa32aac31ab00384d2b58ef10f7}\index{pip.\_internal.utils.direct\_url\_helpers@{pip.\_internal.utils.direct\_url\_helpers}!direct\_url\_as\_pep440\_direct\_reference@{direct\_url\_as\_pep440\_direct\_reference}}
\index{direct\_url\_as\_pep440\_direct\_reference@{direct\_url\_as\_pep440\_direct\_reference}!pip.\_internal.utils.direct\_url\_helpers@{pip.\_internal.utils.direct\_url\_helpers}}
\doxysubsubsection{\texorpdfstring{direct\_url\_as\_pep440\_direct\_reference()}{direct\_url\_as\_pep440\_direct\_reference()}}
{\footnotesize\ttfamily \label{namespacepip_1_1__internal_1_1utils_1_1direct__url__helpers_ad2978aa32aac31ab00384d2b58ef10f7} 
 str direct\+\_\+url\+\_\+as\+\_\+pep440\+\_\+direct\+\_\+reference (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classpip_1_1__internal_1_1models_1_1direct__url_1_1_direct_url}{Direct\+Url}}}]{direct\+\_\+url}{, }\item[{str}]{name}{}\end{DoxyParamCaption})}

\begin{DoxyVerb}Convert a DirectUrl to a pip requirement string.\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{direct__url__helpers_8py_source_l00009}{9}} of file \mbox{\hyperlink{direct__url__helpers_8py_source}{direct\+\_\+url\+\_\+helpers.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00009\ \textcolor{keyword}{def\ }direct\_url\_as\_pep440\_direct\_reference(direct\_url:\ DirectUrl,\ name:\ str)\ -\/>\ str:}
\DoxyCodeLine{00010\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Convert\ a\ DirectUrl\ to\ a\ pip\ requirement\ string."{}"{}"{}}}
\DoxyCodeLine{00011\ \ \ \ \ direct\_url.validate()\ \ \textcolor{comment}{\#\ if\ invalid,\ this\ is\ a\ pip\ bug}}
\DoxyCodeLine{00012\ \ \ \ \ requirement\ =\ name\ +\ \textcolor{stringliteral}{"{}\ @\ "{}}}
\DoxyCodeLine{00013\ \ \ \ \ fragments\ =\ []}
\DoxyCodeLine{00014\ \ \ \ \ \textcolor{keywordflow}{if}\ isinstance(direct\_url.info,\ VcsInfo):}
\DoxyCodeLine{00015\ \ \ \ \ \ \ \ \ requirement\ +=\ \textcolor{stringliteral}{"{}\{\}+\{\}@\{\}"{}}.format(}
\DoxyCodeLine{00016\ \ \ \ \ \ \ \ \ \ \ \ \ direct\_url.info.vcs,\ direct\_url.url,\ direct\_url.info.commit\_id}
\DoxyCodeLine{00017\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00018\ \ \ \ \ \textcolor{keywordflow}{elif}\ isinstance(direct\_url.info,\ ArchiveInfo):}
\DoxyCodeLine{00019\ \ \ \ \ \ \ \ \ requirement\ +=\ direct\_url.url}
\DoxyCodeLine{00020\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ direct\_url.info.hash:}
\DoxyCodeLine{00021\ \ \ \ \ \ \ \ \ \ \ \ \ fragments.append(direct\_url.info.hash)}
\DoxyCodeLine{00022\ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{00023\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ isinstance(direct\_url.info,\ DirInfo)}
\DoxyCodeLine{00024\ \ \ \ \ \ \ \ \ requirement\ +=\ direct\_url.url}
\DoxyCodeLine{00025\ \ \ \ \ \textcolor{keywordflow}{if}\ direct\_url.subdirectory:}
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ fragments.append(\textcolor{stringliteral}{"{}subdirectory="{}}\ +\ direct\_url.subdirectory)}
\DoxyCodeLine{00027\ \ \ \ \ \textcolor{keywordflow}{if}\ fragments:}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ requirement\ +=\ \textcolor{stringliteral}{"{}\#"{}}\ +\ \textcolor{stringliteral}{"{}\&"{}}.join(fragments)}
\DoxyCodeLine{00029\ \ \ \ \ \textcolor{keywordflow}{return}\ requirement}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ }

\end{DoxyCode}
\Hypertarget{namespacepip_1_1__internal_1_1utils_1_1direct__url__helpers_acfbe9e1178538454ada141c7ad2cbd78}\index{pip.\_internal.utils.direct\_url\_helpers@{pip.\_internal.utils.direct\_url\_helpers}!direct\_url\_for\_editable@{direct\_url\_for\_editable}}
\index{direct\_url\_for\_editable@{direct\_url\_for\_editable}!pip.\_internal.utils.direct\_url\_helpers@{pip.\_internal.utils.direct\_url\_helpers}}
\doxysubsubsection{\texorpdfstring{direct\_url\_for\_editable()}{direct\_url\_for\_editable()}}
{\footnotesize\ttfamily \label{namespacepip_1_1__internal_1_1utils_1_1direct__url__helpers_acfbe9e1178538454ada141c7ad2cbd78} 
 \mbox{\hyperlink{classpip_1_1__internal_1_1models_1_1direct__url_1_1_direct_url}{Direct\+Url}} direct\+\_\+url\+\_\+for\+\_\+editable (\begin{DoxyParamCaption}\item[{str}]{source\+\_\+dir}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{direct__url__helpers_8py_source_l00032}{32}} of file \mbox{\hyperlink{direct__url__helpers_8py_source}{direct\+\_\+url\+\_\+helpers.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00032\ \textcolor{keyword}{def\ }direct\_url\_for\_editable(source\_dir:\ str)\ -\/>\ DirectUrl:}
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{keywordflow}{return}\ DirectUrl(}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ url=path\_to\_url(source\_dir),}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ info=DirInfo(editable=\textcolor{keyword}{True}),}
\DoxyCodeLine{00036\ \ \ \ \ )}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ }

\end{DoxyCode}
\Hypertarget{namespacepip_1_1__internal_1_1utils_1_1direct__url__helpers_a636d0b34a8699701ff6205821261101f}\index{pip.\_internal.utils.direct\_url\_helpers@{pip.\_internal.utils.direct\_url\_helpers}!direct\_url\_from\_link@{direct\_url\_from\_link}}
\index{direct\_url\_from\_link@{direct\_url\_from\_link}!pip.\_internal.utils.direct\_url\_helpers@{pip.\_internal.utils.direct\_url\_helpers}}
\doxysubsubsection{\texorpdfstring{direct\_url\_from\_link()}{direct\_url\_from\_link()}}
{\footnotesize\ttfamily \label{namespacepip_1_1__internal_1_1utils_1_1direct__url__helpers_a636d0b34a8699701ff6205821261101f} 
 \mbox{\hyperlink{classpip_1_1__internal_1_1models_1_1direct__url_1_1_direct_url}{Direct\+Url}} direct\+\_\+url\+\_\+from\+\_\+link (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classpip_1_1__internal_1_1models_1_1link_1_1_link}{Link}}}]{link}{, }\item[{Optional\mbox{[}str\mbox{]} }]{source\+\_\+dir}{ = {\ttfamily None}, }\item[{bool }]{link\+\_\+is\+\_\+in\+\_\+wheel\+\_\+cache}{ = {\ttfamily False}}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{direct__url__helpers_8py_source_l00039}{39}} of file \mbox{\hyperlink{direct__url__helpers_8py_source}{direct\+\_\+url\+\_\+helpers.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00041\ )\ -\/>\ DirectUrl:}
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{keywordflow}{if}\ link.is\_vcs:}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ vcs\_backend\ =\ vcs.get\_backend\_for\_scheme(link.scheme)}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ vcs\_backend}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ url,\ requested\_revision,\ \_\ =\ vcs\_backend.get\_url\_rev\_and\_auth(}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \ \ \ \ link.url\_without\_fragment}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ For\ VCS\ links,\ we\ need\ to\ find\ out\ and\ add\ commit\_id.}}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ link\_is\_in\_wheel\_cache:}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ If\ the\ requested\ VCS\ link\ corresponds\ to\ a\ cached}}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ wheel,\ it\ means\ the\ requested\ revision\ was\ an}}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ immutable\ commit\ hash,\ otherwise\ it\ would\ not\ have}}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ been\ cached.\ In\ that\ case\ we\ don't\ have\ a\ source\_dir}}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ with\ the\ VCS\ checkout.}}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ requested\_revision}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \ \ \ \ commit\_id\ =\ requested\_revision}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ If\ the\ wheel\ was\ not\ in\ cache,\ it\ means\ we\ have}}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ had\ to\ checkout\ from\ VCS\ to\ build\ and\ we\ have\ a\ source\_dir}}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ which\ we\ can\ inspect\ to\ find\ out\ the\ commit\ id.}}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ source\_dir}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \ \ \ \ commit\_id\ =\ vcs\_backend.get\_revision(source\_dir)}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DirectUrl(}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \ \ \ \ url=url,}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ \ \ \ info=VcsInfo(}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ vcs=vcs\_backend.name,}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ commit\_id=commit\_id,}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ requested\_revision=requested\_revision,}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \ \ \ \ ),}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \ \ \ \ subdirectory=link.subdirectory\_fragment,}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keywordflow}{elif}\ link.is\_existing\_dir():}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DirectUrl(}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \ \ \ \ url=link.url\_without\_fragment,}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \ \ \ \ info=DirInfo(),}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \ \ \ \ subdirectory=link.subdirectory\_fragment,}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ hash\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ hash\_name\ =\ link.hash\_name}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ hash\_name:}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \ \ \ \ hash\ =\ f\textcolor{stringliteral}{"{}\{hash\_name\}=\{link.hash\}"{}}}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DirectUrl(}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ url=link.url\_without\_fragment,}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ info=ArchiveInfo(hash=hash),}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ subdirectory=link.subdirectory\_fragment,}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ )}

\end{DoxyCode}
