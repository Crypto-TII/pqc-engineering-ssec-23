\doxysection{Serializer Class Reference}
\hypertarget{classpip_1_1__vendor_1_1cachecontrol_1_1serialize_1_1_serializer}{}\label{classpip_1_1__vendor_1_1cachecontrol_1_1serialize_1_1_serializer}\index{Serializer@{Serializer}}


Inheritance diagram for Serializer\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=137pt]{d1/de1/classpip_1_1__vendor_1_1cachecontrol_1_1serialize_1_1_serializer__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for Serializer\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=137pt]{d4/dab/classpip_1_1__vendor_1_1cachecontrol_1_1serialize_1_1_serializer__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classpip_1_1__vendor_1_1cachecontrol_1_1serialize_1_1_serializer_a1fad9808e365cc828a29662c70118920}{dumps}} (self, request, response, body=None)
\item 
\mbox{\hyperlink{classpip_1_1__vendor_1_1cachecontrol_1_1serialize_1_1_serializer_ab856bfa1619fdd2bd4b8106c0ac80ff6}{loads}} (self, request, data, body\+\_\+file=None)
\item 
\mbox{\hyperlink{classpip_1_1__vendor_1_1cachecontrol_1_1serialize_1_1_serializer_aa68fcdc5601515bd88f63acaaadccb45}{prepare\+\_\+response}} (self, request, cached, body\+\_\+file=None)
\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classpip_1_1__vendor_1_1cachecontrol_1_1serialize_1_1_serializer_ae36e9e9dbb6440367a66f3a7febecc38}{\+\_\+loads\+\_\+v0}} (self, request, data, body\+\_\+file=None)
\item 
\mbox{\hyperlink{classpip_1_1__vendor_1_1cachecontrol_1_1serialize_1_1_serializer_ab4b4b86c558da99c28c59e8c54aa0824}{\+\_\+loads\+\_\+v1}} (self, request, data, body\+\_\+file=None)
\item 
\mbox{\hyperlink{classpip_1_1__vendor_1_1cachecontrol_1_1serialize_1_1_serializer_a6650099c584dacfe2caba6debbebc770}{\+\_\+loads\+\_\+v2}} (self, request, data, body\+\_\+file=None)
\item 
\mbox{\hyperlink{classpip_1_1__vendor_1_1cachecontrol_1_1serialize_1_1_serializer_a7d551f24f80f5dbb4594ddc6063058e3}{\+\_\+loads\+\_\+v3}} (self, request, data, body\+\_\+file)
\item 
\mbox{\hyperlink{classpip_1_1__vendor_1_1cachecontrol_1_1serialize_1_1_serializer_a196cc44feb08787efdda10d775668361}{\+\_\+loads\+\_\+v4}} (self, request, data, body\+\_\+file=None)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line \mbox{\hyperlink{serialize_8py_source_l00027}{27}} of file \mbox{\hyperlink{serialize_8py_source}{serialize.\+py}}.



\label{doc-func-members}
\Hypertarget{classpip_1_1__vendor_1_1cachecontrol_1_1serialize_1_1_serializer_doc-func-members}
\doxysubsection{Member Function Documentation}
\Hypertarget{classpip_1_1__vendor_1_1cachecontrol_1_1serialize_1_1_serializer_ae36e9e9dbb6440367a66f3a7febecc38}\index{Serializer@{Serializer}!\_loads\_v0@{\_loads\_v0}}
\index{\_loads\_v0@{\_loads\_v0}!Serializer@{Serializer}}
\doxysubsubsection{\texorpdfstring{\_loads\_v0()}{\_loads\_v0()}}
{\footnotesize\ttfamily \label{classpip_1_1__vendor_1_1cachecontrol_1_1serialize_1_1_serializer_ae36e9e9dbb6440367a66f3a7febecc38} 
\+\_\+loads\+\_\+v0 (\begin{DoxyParamCaption}\item[{}]{self}{, }\item[{}]{request}{, }\item[{}]{data}{, }\item[{}]{body\+\_\+file}{ = {\ttfamily None}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line \mbox{\hyperlink{serialize_8py_source_l00143}{143}} of file \mbox{\hyperlink{serialize_8py_source}{serialize.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00143\ \ \ \ \ \textcolor{keyword}{def\ }\_loads\_v0(self,\ request,\ data,\ body\_file=None):}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ The\ original\ legacy\ cache\ data.\ This\ doesn't\ contain\ enough}}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ information\ to\ construct\ everything\ we\ need,\ so\ we'll\ treat\ this\ as}}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ a\ miss.}}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}}
\DoxyCodeLine{00148\ }

\end{DoxyCode}
\Hypertarget{classpip_1_1__vendor_1_1cachecontrol_1_1serialize_1_1_serializer_ab4b4b86c558da99c28c59e8c54aa0824}\index{Serializer@{Serializer}!\_loads\_v1@{\_loads\_v1}}
\index{\_loads\_v1@{\_loads\_v1}!Serializer@{Serializer}}
\doxysubsubsection{\texorpdfstring{\_loads\_v1()}{\_loads\_v1()}}
{\footnotesize\ttfamily \label{classpip_1_1__vendor_1_1cachecontrol_1_1serialize_1_1_serializer_ab4b4b86c558da99c28c59e8c54aa0824} 
\+\_\+loads\+\_\+v1 (\begin{DoxyParamCaption}\item[{}]{self}{, }\item[{}]{request}{, }\item[{}]{data}{, }\item[{}]{body\+\_\+file}{ = {\ttfamily None}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line \mbox{\hyperlink{serialize_8py_source_l00149}{149}} of file \mbox{\hyperlink{serialize_8py_source}{serialize.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00149\ \ \ \ \ \textcolor{keyword}{def\ }\_loads\_v1(self,\ request,\ data,\ body\_file=None):}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \ \ \ \ cached\ =\ pickle.loads(data)}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ ValueError:}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}}
\DoxyCodeLine{00154\ }
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ self.prepare\_response(request,\ cached,\ body\_file)}
\DoxyCodeLine{00156\ }

\end{DoxyCode}
\Hypertarget{classpip_1_1__vendor_1_1cachecontrol_1_1serialize_1_1_serializer_a6650099c584dacfe2caba6debbebc770}\index{Serializer@{Serializer}!\_loads\_v2@{\_loads\_v2}}
\index{\_loads\_v2@{\_loads\_v2}!Serializer@{Serializer}}
\doxysubsubsection{\texorpdfstring{\_loads\_v2()}{\_loads\_v2()}}
{\footnotesize\ttfamily \label{classpip_1_1__vendor_1_1cachecontrol_1_1serialize_1_1_serializer_a6650099c584dacfe2caba6debbebc770} 
\+\_\+loads\+\_\+v2 (\begin{DoxyParamCaption}\item[{}]{self}{, }\item[{}]{request}{, }\item[{}]{data}{, }\item[{}]{body\+\_\+file}{ = {\ttfamily None}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line \mbox{\hyperlink{serialize_8py_source_l00157}{157}} of file \mbox{\hyperlink{serialize_8py_source}{serialize.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00157\ \ \ \ \ \textcolor{keyword}{def\ }\_loads\_v2(self,\ request,\ data,\ body\_file=None):}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ body\_file\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \ \ \ \ cached\ =\ json.loads(zlib.decompress(data).decode(\textcolor{stringliteral}{"{}utf8"{}}))}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ (ValueError,\ zlib.error):}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ We\ need\ to\ decode\ the\ items\ that\ we've\ base64\ encoded}}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ cached[\textcolor{stringliteral}{"{}response"{}}][\textcolor{stringliteral}{"{}body"{}}]\ =\ \_b64\_decode\_bytes(cached[\textcolor{stringliteral}{"{}response"{}}][\textcolor{stringliteral}{"{}body"{}}])}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ cached[\textcolor{stringliteral}{"{}response"{}}][\textcolor{stringliteral}{"{}headers"{}}]\ =\ dict(}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \ \ \ \ (\_b64\_decode\_str(k),\ \_b64\_decode\_str(v))}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ k,\ v\ \textcolor{keywordflow}{in}\ cached[\textcolor{stringliteral}{"{}response"{}}][\textcolor{stringliteral}{"{}headers"{}}].items()}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ cached[\textcolor{stringliteral}{"{}response"{}}][\textcolor{stringliteral}{"{}reason"{}}]\ =\ \_b64\_decode\_str(cached[\textcolor{stringliteral}{"{}response"{}}][\textcolor{stringliteral}{"{}reason"{}}])}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ cached[\textcolor{stringliteral}{"{}vary"{}}]\ =\ dict(}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \ \ \ \ (\_b64\_decode\_str(k),\ \_b64\_decode\_str(v)\ \textcolor{keywordflow}{if}\ v\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keywordtype}{None}\ \textcolor{keywordflow}{else}\ v)}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ k,\ v\ \textcolor{keywordflow}{in}\ cached[\textcolor{stringliteral}{"{}vary"{}}].items()}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00175\ }
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ self.prepare\_response(request,\ cached,\ body\_file)}
\DoxyCodeLine{00177\ }

\end{DoxyCode}


References \mbox{\hyperlink{serialize_8py_source_l00016}{pip.\+\_\+vendor.\+cachecontrol.\+serialize.\+\_\+b64\+\_\+decode\+\_\+bytes()}}, \mbox{\hyperlink{serialize_8py_source_l00020}{pip.\+\_\+vendor.\+cachecontrol.\+serialize.\+\_\+b64\+\_\+decode\+\_\+str()}}, and \mbox{\hyperlink{serialize_8py_source_l00102}{prepare\+\_\+response()}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{db/d2a/classpip_1_1__vendor_1_1cachecontrol_1_1serialize_1_1_serializer_a6650099c584dacfe2caba6debbebc770_cgraph}
\end{center}
\end{figure}
\Hypertarget{classpip_1_1__vendor_1_1cachecontrol_1_1serialize_1_1_serializer_a7d551f24f80f5dbb4594ddc6063058e3}\index{Serializer@{Serializer}!\_loads\_v3@{\_loads\_v3}}
\index{\_loads\_v3@{\_loads\_v3}!Serializer@{Serializer}}
\doxysubsubsection{\texorpdfstring{\_loads\_v3()}{\_loads\_v3()}}
{\footnotesize\ttfamily \label{classpip_1_1__vendor_1_1cachecontrol_1_1serialize_1_1_serializer_a7d551f24f80f5dbb4594ddc6063058e3} 
\+\_\+loads\+\_\+v3 (\begin{DoxyParamCaption}\item[{}]{self}{, }\item[{}]{request}{, }\item[{}]{data}{, }\item[{}]{body\+\_\+file}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line \mbox{\hyperlink{serialize_8py_source_l00178}{178}} of file \mbox{\hyperlink{serialize_8py_source}{serialize.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00178\ \ \ \ \ \textcolor{keyword}{def\ }\_loads\_v3(self,\ request,\ data,\ body\_file):}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Due\ to\ Python\ 2\ encoding\ issues,\ it's\ impossible\ to\ know\ for\ sure}}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ exactly\ how\ to\ load\ v3\ entries,\ thus\ we'll\ treat\ these\ as\ a\ miss\ so}}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ that\ they\ get\ rewritten\ out\ as\ v4\ entries.}}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}}
\DoxyCodeLine{00183\ }

\end{DoxyCode}
\Hypertarget{classpip_1_1__vendor_1_1cachecontrol_1_1serialize_1_1_serializer_a196cc44feb08787efdda10d775668361}\index{Serializer@{Serializer}!\_loads\_v4@{\_loads\_v4}}
\index{\_loads\_v4@{\_loads\_v4}!Serializer@{Serializer}}
\doxysubsubsection{\texorpdfstring{\_loads\_v4()}{\_loads\_v4()}}
{\footnotesize\ttfamily \label{classpip_1_1__vendor_1_1cachecontrol_1_1serialize_1_1_serializer_a196cc44feb08787efdda10d775668361} 
\+\_\+loads\+\_\+v4 (\begin{DoxyParamCaption}\item[{}]{self}{, }\item[{}]{request}{, }\item[{}]{data}{, }\item[{}]{body\+\_\+file}{ = {\ttfamily None}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line \mbox{\hyperlink{serialize_8py_source_l00184}{184}} of file \mbox{\hyperlink{serialize_8py_source}{serialize.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00184\ \ \ \ \ \textcolor{keyword}{def\ }\_loads\_v4(self,\ request,\ data,\ body\_file=None):}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \ \ \ \ cached\ =\ msgpack.loads(data,\ raw=\textcolor{keyword}{False})}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ ValueError:}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}}
\DoxyCodeLine{00189\ }
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ self.prepare\_response(request,\ cached,\ body\_file)}

\end{DoxyCode}
\Hypertarget{classpip_1_1__vendor_1_1cachecontrol_1_1serialize_1_1_serializer_a1fad9808e365cc828a29662c70118920}\index{Serializer@{Serializer}!dumps@{dumps}}
\index{dumps@{dumps}!Serializer@{Serializer}}
\doxysubsubsection{\texorpdfstring{dumps()}{dumps()}}
{\footnotesize\ttfamily \label{classpip_1_1__vendor_1_1cachecontrol_1_1serialize_1_1_serializer_a1fad9808e365cc828a29662c70118920} 
dumps (\begin{DoxyParamCaption}\item[{}]{self}{, }\item[{}]{request}{, }\item[{}]{response}{, }\item[{}]{body}{ = {\ttfamily None}}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{serialize_8py_source_l00028}{28}} of file \mbox{\hyperlink{serialize_8py_source}{serialize.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{keyword}{def\ }dumps(self,\ request,\ response,\ body=None):}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ response\_headers\ =\ CaseInsensitiveDict(response.headers)}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ body\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ When\ a\ body\ isn't\ passed\ in,\ we'll\ read\ the\ response.\ We}}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ also\ update\ the\ response\ with\ a\ new\ file\ handler\ to\ be}}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ sure\ it\ acts\ as\ though\ it\ was\ never\ read.}}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \ \ \ \ body\ =\ response.read(decode\_content=\textcolor{keyword}{False})}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \ \ \ \ response.\_fp\ =\ io.BytesIO(body)}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ NOTE:\ This\ is\ all\ a\ bit\ weird,\ but\ it's\ really\ important\ that\ on}}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \ \ \ \ \ \ Python\ 2.x\ these\ objects\ are\ unicode\ and\ not\ str,\ even\ when}}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \ \ \ \ \ \ they\ contain\ only\ ascii.\ The\ problem\ here\ is\ that\ msgpack}}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \ \ \ \ \ \ understands\ the\ difference\ between\ unicode\ and\ bytes\ and\ we}}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \ \ \ \ \ \ have\ it\ set\ to\ differentiate\ between\ them,\ however\ Python\ 2}}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \ \ \ \ \ \ doesn't\ know\ the\ difference.\ Forcing\ these\ to\ unicode\ will\ be}}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \ \ \ \ \ \ enough\ to\ have\ msgpack\ know\ the\ difference.}}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ data\ =\ \{}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{u"{}response"{}}:\ \{}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{u"{}body"{}}:\ body,\ \ \textcolor{comment}{\#\ Empty\ bytestring\ if\ body\ is\ stored\ separately}}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{u"{}headers"{}}:\ dict(}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (text\_type(k),\ text\_type(v))\ \textcolor{keywordflow}{for}\ k,\ v\ \textcolor{keywordflow}{in}\ response.headers.items()}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ),}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{u"{}status"{}}:\ response.status,}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{u"{}version"{}}:\ response.version,}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{u"{}reason"{}}:\ text\_type(response.reason),}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{u"{}strict"{}}:\ response.strict,}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{u"{}decode\_content"{}}:\ response.decode\_content,}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Construct\ our\ vary\ headers}}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ data[\textcolor{stringliteral}{u"{}vary"{}}]\ =\ \{\}}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{stringliteral}{u"{}vary"{}}\ \textcolor{keywordflow}{in}\ response\_headers:}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \ \ \ \ varied\_headers\ =\ response\_headers[\textcolor{stringliteral}{u"{}vary"{}}].split(\textcolor{stringliteral}{"{},"{}})}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ header\ \textcolor{keywordflow}{in}\ varied\_headers:}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ header\ =\ text\_type(header).strip()}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ header\_value\ =\ request.headers.get(header,\ \textcolor{keywordtype}{None})}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ header\_value\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ header\_value\ =\ text\_type(header\_value)}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data[\textcolor{stringliteral}{u"{}vary"{}}][header]\ =\ header\_value}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ b\textcolor{stringliteral}{"{},"{}}.join([b\textcolor{stringliteral}{"{}cc=4"{}},\ msgpack.dumps(data,\ use\_bin\_type=\textcolor{keyword}{True})])}
\DoxyCodeLine{00071\ }

\end{DoxyCode}
\Hypertarget{classpip_1_1__vendor_1_1cachecontrol_1_1serialize_1_1_serializer_ab856bfa1619fdd2bd4b8106c0ac80ff6}\index{Serializer@{Serializer}!loads@{loads}}
\index{loads@{loads}!Serializer@{Serializer}}
\doxysubsubsection{\texorpdfstring{loads()}{loads()}}
{\footnotesize\ttfamily \label{classpip_1_1__vendor_1_1cachecontrol_1_1serialize_1_1_serializer_ab856bfa1619fdd2bd4b8106c0ac80ff6} 
loads (\begin{DoxyParamCaption}\item[{}]{self}{, }\item[{}]{request}{, }\item[{}]{data}{, }\item[{}]{body\+\_\+file}{ = {\ttfamily None}}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{serialize_8py_source_l00072}{72}} of file \mbox{\hyperlink{serialize_8py_source}{serialize.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keyword}{def\ }loads(self,\ request,\ data,\ body\_file=None):}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Short\ circuit\ if\ we've\ been\ given\ an\ empty\ set\ of\ data}}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ data:}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Determine\ what\ version\ of\ the\ serializer\ the\ data\ was\ serialized}}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ with}}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ ver,\ data\ =\ data.split(b\textcolor{stringliteral}{"{},"{}},\ 1)}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ ValueError:}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \ \ \ \ ver\ =\ b\textcolor{stringliteral}{"{}cc=0"{}}}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Make\ sure\ that\ our\ "{}ver"{}\ is\ actually\ a\ version\ and\ isn't\ a\ false}}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ positive\ from\ a\ ,\ being\ in\ the\ data\ stream.}}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ver[:3]\ !=\ b\textcolor{stringliteral}{"{}cc="{}}:}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ data\ =\ ver\ +\ data}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ ver\ =\ b\textcolor{stringliteral}{"{}cc=0"{}}}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Get\ the\ version\ number\ out\ of\ the\ cc=N}}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ ver\ =\ ver.split(b\textcolor{stringliteral}{"{}="{}},\ 1)[-\/1].decode(\textcolor{stringliteral}{"{}ascii"{}})}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Dispatch\ to\ the\ actual\ load\ method\ for\ the\ given\ version}}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ getattr(self,\ \textcolor{stringliteral}{"{}\_loads\_v\{\}"{}}.format(ver))(request,\ data,\ body\_file)}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ AttributeError:}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ This\ is\ a\ version\ we\ don't\ have\ a\ loads\ function\ for,\ so\ we'll}}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ just\ treat\ it\ as\ a\ miss\ and\ return\ None}}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}}
\DoxyCodeLine{00101\ }

\end{DoxyCode}
\Hypertarget{classpip_1_1__vendor_1_1cachecontrol_1_1serialize_1_1_serializer_aa68fcdc5601515bd88f63acaaadccb45}\index{Serializer@{Serializer}!prepare\_response@{prepare\_response}}
\index{prepare\_response@{prepare\_response}!Serializer@{Serializer}}
\doxysubsubsection{\texorpdfstring{prepare\_response()}{prepare\_response()}}
{\footnotesize\ttfamily \label{classpip_1_1__vendor_1_1cachecontrol_1_1serialize_1_1_serializer_aa68fcdc5601515bd88f63acaaadccb45} 
prepare\+\_\+response (\begin{DoxyParamCaption}\item[{}]{self}{, }\item[{}]{request}{, }\item[{}]{cached}{, }\item[{}]{body\+\_\+file}{ = {\ttfamily None}}\end{DoxyParamCaption})}

\begin{DoxyVerb}Verify our vary headers match and construct a real urllib3
HTTPResponse object.
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{serialize_8py_source_l00102}{102}} of file \mbox{\hyperlink{serialize_8py_source}{serialize.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00102\ \ \ \ \ \textcolor{keyword}{def\ }prepare\_response(self,\ request,\ cached,\ body\_file=None):}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Verify\ our\ vary\ headers\ match\ and\ construct\ a\ real\ urllib3}}
\DoxyCodeLine{00104\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ HTTPResponse\ object.}}
\DoxyCodeLine{00105\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Special\ case\ the\ '*'\ Vary\ value\ as\ it\ means\ we\ cannot\ actually}}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ determine\ if\ the\ cached\ response\ is\ suitable\ for\ this\ request.}}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ This\ case\ is\ also\ handled\ in\ the\ controller\ code\ when\ creating}}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ a\ cache\ entry,\ but\ is\ left\ here\ for\ backwards\ compatibility.}}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{stringliteral}{"{}*"{}}\ \textcolor{keywordflow}{in}\ cached.get(\textcolor{stringliteral}{"{}vary"{}},\ \{\}):}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Ensure\ that\ the\ Vary\ headers\ for\ the\ cached\ response\ match\ our}}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ request}}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ header,\ value\ \textcolor{keywordflow}{in}\ cached.get(\textcolor{stringliteral}{"{}vary"{}},\ \{\}).items():}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ request.headers.get(header,\ \textcolor{keywordtype}{None})\ !=\ value:}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ body\_raw\ =\ cached[\textcolor{stringliteral}{"{}response"{}}].pop(\textcolor{stringliteral}{"{}body"{}})}
\DoxyCodeLine{00120\ }
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ headers\ =\ CaseInsensitiveDict(data=cached[\textcolor{stringliteral}{"{}response"{}}][\textcolor{stringliteral}{"{}headers"{}}])}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ headers.get(\textcolor{stringliteral}{"{}transfer-\/encoding"{}},\ \textcolor{stringliteral}{"{}"{}})\ ==\ \textcolor{stringliteral}{"{}chunked"{}}:}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \ \ \ \ headers.pop(\textcolor{stringliteral}{"{}transfer-\/encoding"{}})}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ cached[\textcolor{stringliteral}{"{}response"{}}][\textcolor{stringliteral}{"{}headers"{}}]\ =\ headers}
\DoxyCodeLine{00126\ }
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ body\_file\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ body\ =\ io.BytesIO(body\_raw)}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ body\ =\ body\_file}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ TypeError:}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ This\ can\ happen\ if\ cachecontrol\ serialized\ to\ v1\ format\ (pickle)}}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ using\ Python\ 2.\ A\ Python\ 2\ str(byte\ string)\ will\ be\ unpickled\ as}}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ a\ Python\ 3\ str\ (unicode\ string),\ which\ will\ cause\ the\ above\ to}}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ fail\ with:}}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#}}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \ \ \ \ TypeError:\ 'str'\ does\ not\ support\ the\ buffer\ interface}}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \ \ \ \ body\ =\ io.BytesIO(body\_raw.encode(\textcolor{stringliteral}{"{}utf8"{}}))}
\DoxyCodeLine{00140\ }
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ HTTPResponse(body=body,\ preload\_content=\textcolor{keyword}{False},\ **cached[\textcolor{stringliteral}{"{}response"{}}])}
\DoxyCodeLine{00142\ }

\end{DoxyCode}


Referenced by \mbox{\hyperlink{serialize_8py_source_l00157}{\+\_\+loads\+\_\+v2()}}.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=270pt]{db/d2a/classpip_1_1__vendor_1_1cachecontrol_1_1serialize_1_1_serializer_aa68fcdc5601515bd88f63acaaadccb45_icgraph}
\end{center}
\end{figure}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/pqc-\/engineering-\/ssec-\/23/venv/lib/python3.\+12/site-\/packages/pip/\+\_\+vendor/cachecontrol/\mbox{\hyperlink{serialize_8py}{serialize.\+py}}\end{DoxyCompactItemize}
