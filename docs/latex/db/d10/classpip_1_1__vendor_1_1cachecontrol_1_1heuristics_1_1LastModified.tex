\doxysection{Last\+Modified Class Reference}
\hypertarget{classpip_1_1__vendor_1_1cachecontrol_1_1heuristics_1_1LastModified}{}\label{classpip_1_1__vendor_1_1cachecontrol_1_1heuristics_1_1LastModified}\index{LastModified@{LastModified}}


Inheritance diagram for Last\+Modified\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=164pt]{df/dab/classpip_1_1__vendor_1_1cachecontrol_1_1heuristics_1_1LastModified__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for Last\+Modified\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=164pt]{d8/d9c/classpip_1_1__vendor_1_1cachecontrol_1_1heuristics_1_1LastModified__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classpip_1_1__vendor_1_1cachecontrol_1_1heuristics_1_1LastModified_a2379da44120216ed4fbadb11a64a83ad}{update\+\_\+headers}} (\mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{self}}, \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{resp}})
\item 
\mbox{\hyperlink{classpip_1_1__vendor_1_1cachecontrol_1_1heuristics_1_1LastModified_abf56320df4335be17ca42b842aa77a1a}{warning}} (\mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{self}}, \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{resp}})
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classpip_1_1__vendor_1_1cachecontrol_1_1heuristics_1_1BaseHeuristic}{Base\+Heuristic}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classpip_1_1__vendor_1_1cachecontrol_1_1heuristics_1_1BaseHeuristic_a050b78b666d39f0d49e1cccafff2068c}{apply}} (\mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{self}}, response)
\end{DoxyCompactItemize}
\doxysubsubsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
dict \mbox{\hyperlink{classpip_1_1__vendor_1_1cachecontrol_1_1heuristics_1_1LastModified_acec8fd0d0be246e602a3028d5a53c264}{cacheable\+\_\+by\+\_\+default\+\_\+statuses}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\begin{DoxyVerb}If there is no Expires header already, fall back on Last-Modified
using the heuristic from
http://tools.ietf.org/html/rfc7234#section-4.2.2
to calculate a reasonable value.

Firefox also does something like this per
https://developer.mozilla.org/en-US/docs/Web/HTTP/Caching_FAQ
http://lxr.mozilla.org/mozilla-release/source/netwerk/protocol/http/nsHttpResponseHead.cpp#397
Unlike mozilla we limit this to 24-hr.
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{heuristics_8py_source_l00092}{92}} of file \mbox{\hyperlink{heuristics_8py_source}{heuristics.\+py}}.



\doxysubsection{Member Function Documentation}
\Hypertarget{classpip_1_1__vendor_1_1cachecontrol_1_1heuristics_1_1LastModified_a2379da44120216ed4fbadb11a64a83ad}\label{classpip_1_1__vendor_1_1cachecontrol_1_1heuristics_1_1LastModified_a2379da44120216ed4fbadb11a64a83ad} 
\index{LastModified@{LastModified}!update\_headers@{update\_headers}}
\index{update\_headers@{update\_headers}!LastModified@{LastModified}}
\doxysubsubsection{\texorpdfstring{update\_headers()}{update\_headers()}}
{\footnotesize\ttfamily update\+\_\+headers (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{response }\end{DoxyParamCaption})}

\begin{DoxyVerb}Update the response headers with any new headers.

NOTE: This SHOULD always include some Warning header to
      signify that the response was cached by the client, not
      by way of the provided headers.
\end{DoxyVerb}
 

Reimplemented from \mbox{\hyperlink{classpip_1_1__vendor_1_1cachecontrol_1_1heuristics_1_1BaseHeuristic_a1a7780a56f3d8ec2a494e2de9f4455a6}{Base\+Heuristic}}.



Definition at line \mbox{\hyperlink{heuristics_8py_source_l00108}{108}} of file \mbox{\hyperlink{heuristics_8py_source}{heuristics.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00108\ \ \ \ \ \textcolor{keyword}{def\ }update\_headers(self,\ resp):}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ headers\ =\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{resp.headers}}}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{stringliteral}{"{}expires"{}}\ \textcolor{keywordflow}{in}\ headers:}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \{\}}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{stringliteral}{"{}cache-\/control"{}}\ \textcolor{keywordflow}{in}\ headers\ \textcolor{keywordflow}{and}\ headers[\textcolor{stringliteral}{"{}cache-\/control"{}}]\ !=\ \textcolor{stringliteral}{"{}public"{}}:}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \{\}}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{resp.status}}\ \textcolor{keywordflow}{not}\ \textcolor{keywordflow}{in}\ self.cacheable\_by\_default\_statuses:}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \{\}}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{stringliteral}{"{}date"{}}\ \textcolor{keywordflow}{not}\ \textcolor{keywordflow}{in}\ headers\ \textcolor{keywordflow}{or}\ \textcolor{stringliteral}{"{}last-\/modified"{}}\ \textcolor{keywordflow}{not}\ \textcolor{keywordflow}{in}\ headers:}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \{\}}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ date\ =\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{calendar.timegm}}(parsedate\_tz(headers[\textcolor{stringliteral}{"{}date"{}}]))}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ last\_modified\ =\ parsedate(headers[\textcolor{stringliteral}{"{}last-\/modified"{}}])}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ date\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}\ \textcolor{keywordflow}{or}\ last\_modified\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \{\}}
\DoxyCodeLine{00127\ }
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ now\ =\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{time.time}}()}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ current\_age\ =\ max(0,\ now\ -\/\ date)}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ delta\ =\ date\ -\/\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{calendar.timegm}}(last\_modified)}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ freshness\_lifetime\ =\ max(0,\ min(delta\ /\ 10,\ 24\ *\ 3600))}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ freshness\_lifetime\ <=\ current\_age:}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \{\}}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ expires\ =\ date\ +\ freshness\_lifetime}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \{\textcolor{stringliteral}{"{}expires"{}}:\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{time.strftime}}(TIME\_FMT,\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{time.gmtime}}(expires))\}}
\DoxyCodeLine{00137\ }

\end{DoxyCode}


References \mbox{\hyperlink{heuristics_8py_source_l00104}{Last\+Modified.\+cacheable\+\_\+by\+\_\+default\+\_\+statuses}}, and \mbox{\hyperlink{prime__search_8m_source_l00010}{i}}.



Referenced by \mbox{\hyperlink{heuristics_8py_source_l00046}{Base\+Heuristic.\+apply()}}.

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{db/d10/classpip_1_1__vendor_1_1cachecontrol_1_1heuristics_1_1LastModified_a2379da44120216ed4fbadb11a64a83ad_icgraph}
\end{center}
\end{figure}
\Hypertarget{classpip_1_1__vendor_1_1cachecontrol_1_1heuristics_1_1LastModified_abf56320df4335be17ca42b842aa77a1a}\label{classpip_1_1__vendor_1_1cachecontrol_1_1heuristics_1_1LastModified_abf56320df4335be17ca42b842aa77a1a} 
\index{LastModified@{LastModified}!warning@{warning}}
\index{warning@{warning}!LastModified@{LastModified}}
\doxysubsubsection{\texorpdfstring{warning()}{warning()}}
{\footnotesize\ttfamily warning (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{response }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return a valid 1xx warning header value describing the cache
adjustments.

The response is provided too allow warnings like 113
http://tools.ietf.org/html/rfc7234#section-5.5.4 where we need
to explicitly say response is over 24 hours old.
\end{DoxyVerb}
 

Reimplemented from \mbox{\hyperlink{classpip_1_1__vendor_1_1cachecontrol_1_1heuristics_1_1BaseHeuristic_a967ac850e03079bc33e4c35ca73074a1}{Base\+Heuristic}}.



Definition at line \mbox{\hyperlink{heuristics_8py_source_l00138}{138}} of file \mbox{\hyperlink{heuristics_8py_source}{heuristics.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00138\ \ \ \ \ \textcolor{keyword}{def\ }warning(self,\ resp):}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keywordtype}{None}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{heuristics_8py_source_l00046}{Base\+Heuristic.\+apply()}}.

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{db/d10/classpip_1_1__vendor_1_1cachecontrol_1_1heuristics_1_1LastModified_abf56320df4335be17ca42b842aa77a1a_icgraph}
\end{center}
\end{figure}


\doxysubsection{Field Documentation}
\Hypertarget{classpip_1_1__vendor_1_1cachecontrol_1_1heuristics_1_1LastModified_acec8fd0d0be246e602a3028d5a53c264}\label{classpip_1_1__vendor_1_1cachecontrol_1_1heuristics_1_1LastModified_acec8fd0d0be246e602a3028d5a53c264} 
\index{LastModified@{LastModified}!cacheable\_by\_default\_statuses@{cacheable\_by\_default\_statuses}}
\index{cacheable\_by\_default\_statuses@{cacheable\_by\_default\_statuses}!LastModified@{LastModified}}
\doxysubsubsection{\texorpdfstring{cacheable\_by\_default\_statuses}{cacheable\_by\_default\_statuses}}
{\footnotesize\ttfamily dict cacheable\+\_\+by\+\_\+default\+\_\+statuses\hspace{0.3cm}{\ttfamily [static]}}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=\ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ 200,\ 203,\ 204,\ 206,\ 300,\ 301,\ 404,\ 405,\ 410,\ 414,\ 501}
\DoxyCodeLine{\ \ \ \ \}}

\end{DoxyCode}


Definition at line \mbox{\hyperlink{heuristics_8py_source_l00104}{104}} of file \mbox{\hyperlink{heuristics_8py_source}{heuristics.\+py}}.



Referenced by \mbox{\hyperlink{heuristics_8py_source_l00108}{Last\+Modified.\+update\+\_\+headers()}}.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
/home/liwuen/projects\+\_\+dev/pqc-\/engineering-\/ssec-\/23/venv/lib/python3.\+12/site-\/packages/pip/\+\_\+vendor/cachecontrol/\mbox{\hyperlink{heuristics_8py}{heuristics.\+py}}\end{DoxyCompactItemize}
