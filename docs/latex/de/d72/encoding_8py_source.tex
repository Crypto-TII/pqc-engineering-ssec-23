\doxysection{encoding.\+py}
\hypertarget{encoding_8py_source}{}\label{encoding_8py_source}\index{E:/pqc-\/engineering-\/ssec-\/23/venv/lib/python3.12/site-\/packages/pip/\_internal/utils/encoding.py@{E:/pqc-\/engineering-\/ssec-\/23/venv/lib/python3.12/site-\/packages/pip/\_internal/utils/encoding.py}}
\mbox{\hyperlink{encoding_8py}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{encoding_8py_source_l00001}\mbox{\hyperlink{namespacepip_1_1__internal_1_1utils_1_1encoding}{00001}}\ \textcolor{keyword}{import}\ codecs}
\DoxyCodeLine{\Hypertarget{encoding_8py_source_l00002}00002\ \textcolor{keyword}{import}\ locale}
\DoxyCodeLine{\Hypertarget{encoding_8py_source_l00003}00003\ \textcolor{keyword}{import}\ re}
\DoxyCodeLine{\Hypertarget{encoding_8py_source_l00004}00004\ \textcolor{keyword}{import}\ sys}
\DoxyCodeLine{\Hypertarget{encoding_8py_source_l00005}00005\ \textcolor{keyword}{from}\ typing\ \textcolor{keyword}{import}\ List,\ Tuple}
\DoxyCodeLine{\Hypertarget{encoding_8py_source_l00006}00006\ }
\DoxyCodeLine{\Hypertarget{encoding_8py_source_l00007}\mbox{\hyperlink{namespacepip_1_1__internal_1_1utils_1_1encoding_a817c6422d547f940759d20eb791b35ec}{00007}}\ BOMS:\ List[Tuple[bytes,\ str]]\ =\ [}
\DoxyCodeLine{\Hypertarget{encoding_8py_source_l00008}00008\ \ \ \ \ (codecs.BOM\_UTF8,\ \textcolor{stringliteral}{"{}utf-\/8"{}}),}
\DoxyCodeLine{\Hypertarget{encoding_8py_source_l00009}00009\ \ \ \ \ (codecs.BOM\_UTF16,\ \textcolor{stringliteral}{"{}utf-\/16"{}}),}
\DoxyCodeLine{\Hypertarget{encoding_8py_source_l00010}00010\ \ \ \ \ (codecs.BOM\_UTF16\_BE,\ \textcolor{stringliteral}{"{}utf-\/16-\/be"{}}),}
\DoxyCodeLine{\Hypertarget{encoding_8py_source_l00011}00011\ \ \ \ \ (codecs.BOM\_UTF16\_LE,\ \textcolor{stringliteral}{"{}utf-\/16-\/le"{}}),}
\DoxyCodeLine{\Hypertarget{encoding_8py_source_l00012}00012\ \ \ \ \ (codecs.BOM\_UTF32,\ \textcolor{stringliteral}{"{}utf-\/32"{}}),}
\DoxyCodeLine{\Hypertarget{encoding_8py_source_l00013}00013\ \ \ \ \ (codecs.BOM\_UTF32\_BE,\ \textcolor{stringliteral}{"{}utf-\/32-\/be"{}}),}
\DoxyCodeLine{\Hypertarget{encoding_8py_source_l00014}00014\ \ \ \ \ (codecs.BOM\_UTF32\_LE,\ \textcolor{stringliteral}{"{}utf-\/32-\/le"{}}),}
\DoxyCodeLine{\Hypertarget{encoding_8py_source_l00015}00015\ ]}
\DoxyCodeLine{\Hypertarget{encoding_8py_source_l00016}00016\ }
\DoxyCodeLine{\Hypertarget{encoding_8py_source_l00017}\mbox{\hyperlink{namespacepip_1_1__internal_1_1utils_1_1encoding_aa905f2e0bfc6de510cebec6f152eafcf}{00017}}\ ENCODING\_RE\ =\ re.compile(rb\textcolor{stringliteral}{"{}coding[:=]\(\backslash\)s*([-\/\(\backslash\)w.]+)"{}})}
\DoxyCodeLine{\Hypertarget{encoding_8py_source_l00018}00018\ }
\DoxyCodeLine{\Hypertarget{encoding_8py_source_l00019}00019\ }
\DoxyCodeLine{\Hypertarget{encoding_8py_source_l00020}\mbox{\hyperlink{namespacepip_1_1__internal_1_1utils_1_1encoding_a13e094bb3ad33002b5376b92d3766709}{00020}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespacepip_1_1__internal_1_1utils_1_1encoding_a13e094bb3ad33002b5376b92d3766709}{auto\_decode}}(data:\ bytes)\ -\/>\ str:}
\DoxyCodeLine{\Hypertarget{encoding_8py_source_l00021}00021\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Check\ a\ bytes\ string\ for\ a\ BOM\ to\ correctly\ detect\ the\ encoding}}
\DoxyCodeLine{\Hypertarget{encoding_8py_source_l00022}00022\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{encoding_8py_source_l00023}00023\ \textcolor{stringliteral}{\ \ \ \ Fallback\ to\ locale.getpreferredencoding(False)\ like\ open()\ on\ Python3"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{encoding_8py_source_l00024}00024\ \ \ \ \ \textcolor{keywordflow}{for}\ bom,\ encoding\ \textcolor{keywordflow}{in}\ BOMS:}
\DoxyCodeLine{\Hypertarget{encoding_8py_source_l00025}00025\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ data.startswith(bom):}
\DoxyCodeLine{\Hypertarget{encoding_8py_source_l00026}00026\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ data[len(bom)\ :].decode(encoding)}
\DoxyCodeLine{\Hypertarget{encoding_8py_source_l00027}00027\ \ \ \ \ \textcolor{comment}{\#\ Lets\ check\ the\ first\ two\ lines\ as\ in\ PEP263}}
\DoxyCodeLine{\Hypertarget{encoding_8py_source_l00028}00028\ \ \ \ \ \textcolor{keywordflow}{for}\ line\ \textcolor{keywordflow}{in}\ data.split(b\textcolor{stringliteral}{"{}\(\backslash\)n"{}})[:2]:}
\DoxyCodeLine{\Hypertarget{encoding_8py_source_l00029}00029\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ line[0:1]\ ==\ b\textcolor{stringliteral}{"{}\#"{}}\ \textcolor{keywordflow}{and}\ ENCODING\_RE.search(line):}
\DoxyCodeLine{\Hypertarget{encoding_8py_source_l00030}00030\ \ \ \ \ \ \ \ \ \ \ \ \ result\ =\ ENCODING\_RE.search(line)}
\DoxyCodeLine{\Hypertarget{encoding_8py_source_l00031}00031\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ result\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{encoding_8py_source_l00032}00032\ \ \ \ \ \ \ \ \ \ \ \ \ encoding\ =\ result.groups()[0].decode(\textcolor{stringliteral}{"{}ascii"{}})}
\DoxyCodeLine{\Hypertarget{encoding_8py_source_l00033}00033\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ data.decode(encoding)}
\DoxyCodeLine{\Hypertarget{encoding_8py_source_l00034}00034\ \ \ \ \ \textcolor{keywordflow}{return}\ data.decode(}
\DoxyCodeLine{\Hypertarget{encoding_8py_source_l00035}00035\ \ \ \ \ \ \ \ \ locale.getpreferredencoding(\textcolor{keyword}{False})\ \textcolor{keywordflow}{or}\ sys.getdefaultencoding(),}
\DoxyCodeLine{\Hypertarget{encoding_8py_source_l00036}00036\ \ \ \ \ )}

\end{DoxyCode}
