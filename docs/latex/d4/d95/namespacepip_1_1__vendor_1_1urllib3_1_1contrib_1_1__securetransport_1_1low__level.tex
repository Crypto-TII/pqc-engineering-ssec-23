\doxysection{pip.\+\_\+vendor.\+urllib3.\+contrib.\+\_\+securetransport.\+low\+\_\+level Namespace Reference}
\hypertarget{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level}{}\label{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level}\index{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level@{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level}}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a6110d85a5561a50a43dca1adc3fad2d9}{\+\_\+cf\+\_\+data\+\_\+from\+\_\+bytes}} (bytestring)
\item 
\mbox{\hyperlink{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a0a10dc719bbb2ca1a9ff2e7611da5078}{\+\_\+cf\+\_\+dictionary\+\_\+from\+\_\+tuples}} (tuples)
\item 
\mbox{\hyperlink{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a4bf4891465a41176874b0f32bf208a8f}{\+\_\+cfstr}} (py\+\_\+bstr)
\item 
\mbox{\hyperlink{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a20ed75774db1ca1d95afa41c6a73cd16}{\+\_\+create\+\_\+cfstring\+\_\+array}} (lst)
\item 
\mbox{\hyperlink{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_ae493b341f685e54ea9ddaf2d5d781363}{\+\_\+cf\+\_\+string\+\_\+to\+\_\+unicode}} (value)
\item 
\mbox{\hyperlink{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_adca8b6c22171f9c6f2778ca828f40470}{\+\_\+assert\+\_\+no\+\_\+error}} (error, exception\+\_\+class=None)
\item 
\mbox{\hyperlink{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a5dccd021a87f3bd80aabe13fbe5c88f0}{\+\_\+cert\+\_\+array\+\_\+from\+\_\+pem}} (pem\+\_\+bundle)
\item 
\mbox{\hyperlink{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a7c4143f5a3e2066d842aa5720b36d918}{\+\_\+is\+\_\+cert}} (item)
\item 
\mbox{\hyperlink{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_ac2cd6508dbaf0aacedfa0d08795e08f3}{\+\_\+is\+\_\+identity}} (item)
\item 
\mbox{\hyperlink{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a090abebf4ebe49bab98af9737efab3fd}{\+\_\+temporary\+\_\+keychain}} ()
\item 
\mbox{\hyperlink{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a8e355fb65226a7bbcf7ec373c449315f}{\+\_\+load\+\_\+items\+\_\+from\+\_\+file}} (keychain, path)
\item 
\mbox{\hyperlink{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_ad8b9d81345d887c85664ef226838079e}{\+\_\+load\+\_\+client\+\_\+cert\+\_\+chain}} (keychain, \texorpdfstring{$\ast$}{*}paths)
\item 
\mbox{\hyperlink{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a112b91d9121cd4136f00a97ee9aec222}{\+\_\+build\+\_\+tls\+\_\+unknown\+\_\+ca\+\_\+alert}} (version)
\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a805ffd560d87a0b5053e254331abe635}{\+\_\+\+PEM\+\_\+\+CERTS\+\_\+\+RE}}
\item 
dict \mbox{\hyperlink{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a4e59ea4b05cc0ed8bb3e1302abe7e1d8}{TLS\+\_\+\+PROTOCOL\+\_\+\+VERSIONS}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\begin{DoxyVerb}Low-level helpers for the SecureTransport bindings.

These are Python functions that are not directly related to the high-level APIs
but are necessary to get them to work. They include a whole bunch of low-level
CoreFoundation messing about and memory management. The concerns in this module
are almost entirely about trying to avoid memory leaks and providing
appropriate and useful assistance to the higher-level code.
\end{DoxyVerb}
 

\label{doc-func-members}
\Hypertarget{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_doc-func-members}
\doxysubsection{Function Documentation}
\Hypertarget{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_adca8b6c22171f9c6f2778ca828f40470}\index{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level@{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level}!\_assert\_no\_error@{\_assert\_no\_error}}
\index{\_assert\_no\_error@{\_assert\_no\_error}!pip.\_vendor.urllib3.contrib.\_securetransport.low\_level@{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level}}
\doxysubsubsection{\texorpdfstring{\_assert\_no\_error()}{\_assert\_no\_error()}}
{\footnotesize\ttfamily \label{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_adca8b6c22171f9c6f2778ca828f40470} 
\+\_\+assert\+\_\+no\+\_\+error (\begin{DoxyParamCaption}\item[{}]{error}{, }\item[{}]{exception\+\_\+class}{ = {\ttfamily None}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

\begin{DoxyVerb}Checks the return code and throws an exception if there is an error to
report
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{low__level_8py_source_l00129}{129}} of file \mbox{\hyperlink{low__level_8py_source}{low\+\_\+level.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00129\ \textcolor{keyword}{def\ }\_assert\_no\_error(error,\ exception\_class=None):}
\DoxyCodeLine{00130\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{00131\ \textcolor{stringliteral}{\ \ \ \ Checks\ the\ return\ code\ and\ throws\ an\ exception\ if\ there\ is\ an\ error\ to}}
\DoxyCodeLine{00132\ \textcolor{stringliteral}{\ \ \ \ report}}
\DoxyCodeLine{00133\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{00134\ \ \ \ \ \textcolor{keywordflow}{if}\ error\ ==\ 0:}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}}
\DoxyCodeLine{00136\ }
\DoxyCodeLine{00137\ \ \ \ \ cf\_error\_string\ =\ Security.SecCopyErrorMessageString(error,\ \textcolor{keywordtype}{None})}
\DoxyCodeLine{00138\ \ \ \ \ output\ =\ \_cf\_string\_to\_unicode(cf\_error\_string)}
\DoxyCodeLine{00139\ \ \ \ \ CoreFoundation.CFRelease(cf\_error\_string)}
\DoxyCodeLine{00140\ }
\DoxyCodeLine{00141\ \ \ \ \ \textcolor{keywordflow}{if}\ output\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}\ \textcolor{keywordflow}{or}\ output\ ==\ \textcolor{stringliteral}{u"{}"{}}:}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ output\ =\ \textcolor{stringliteral}{u"{}OSStatus\ \%s"{}}\ \%\ error}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \ \ \ \ \textcolor{keywordflow}{if}\ exception\_class\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ exception\_class\ =\ ssl.SSLError}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ \ \ \ \ \textcolor{keywordflow}{raise}\ exception\_class(output)}
\DoxyCodeLine{00148\ }
\DoxyCodeLine{00149\ }

\end{DoxyCode}


References \mbox{\hyperlink{low__level_8py_source_l00104}{\+\_\+cf\+\_\+string\+\_\+to\+\_\+unicode()}}.



Referenced by \mbox{\hyperlink{low__level_8py_source_l00302}{\+\_\+load\+\_\+client\+\_\+cert\+\_\+chain()}}, \mbox{\hyperlink{low__level_8py_source_l00247}{\+\_\+load\+\_\+items\+\_\+from\+\_\+file()}}, and \mbox{\hyperlink{low__level_8py_source_l00212}{\+\_\+temporary\+\_\+keychain()}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=316pt]{d4/d95/namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_adca8b6c22171f9c6f2778ca828f40470_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d4/d95/namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_adca8b6c22171f9c6f2778ca828f40470_icgraph}
\end{center}
\end{figure}
\Hypertarget{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a112b91d9121cd4136f00a97ee9aec222}\index{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level@{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level}!\_build\_tls\_unknown\_ca\_alert@{\_build\_tls\_unknown\_ca\_alert}}
\index{\_build\_tls\_unknown\_ca\_alert@{\_build\_tls\_unknown\_ca\_alert}!pip.\_vendor.urllib3.contrib.\_securetransport.low\_level@{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level}}
\doxysubsubsection{\texorpdfstring{\_build\_tls\_unknown\_ca\_alert()}{\_build\_tls\_unknown\_ca\_alert()}}
{\footnotesize\ttfamily \label{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a112b91d9121cd4136f00a97ee9aec222} 
\+\_\+build\+\_\+tls\+\_\+unknown\+\_\+ca\+\_\+alert (\begin{DoxyParamCaption}\item[{}]{version}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

\begin{DoxyVerb}Builds a TLS alert record for an unknown CA.
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{low__level_8py_source_l00386}{386}} of file \mbox{\hyperlink{low__level_8py_source}{low\+\_\+level.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00386\ \textcolor{keyword}{def\ }\_build\_tls\_unknown\_ca\_alert(version):}
\DoxyCodeLine{00387\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{00388\ \textcolor{stringliteral}{\ \ \ \ Builds\ a\ TLS\ alert\ record\ for\ an\ unknown\ CA.}}
\DoxyCodeLine{00389\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{00390\ \ \ \ \ ver\_maj,\ ver\_min\ =\ TLS\_PROTOCOL\_VERSIONS[version]}
\DoxyCodeLine{00391\ \ \ \ \ severity\_fatal\ =\ 0x02}
\DoxyCodeLine{00392\ \ \ \ \ description\_unknown\_ca\ =\ 0x30}
\DoxyCodeLine{00393\ \ \ \ \ msg\ =\ struct.pack(\textcolor{stringliteral}{"{}>BB"{}},\ severity\_fatal,\ description\_unknown\_ca)}
\DoxyCodeLine{00394\ \ \ \ \ msg\_len\ =\ len(msg)}
\DoxyCodeLine{00395\ \ \ \ \ record\_type\_alert\ =\ 0x15}
\DoxyCodeLine{00396\ \ \ \ \ record\ =\ struct.pack(\textcolor{stringliteral}{"{}>BBBH"{}},\ record\_type\_alert,\ ver\_maj,\ ver\_min,\ msg\_len)\ +\ msg}
\DoxyCodeLine{00397\ \ \ \ \ \textcolor{keywordflow}{return}\ record}

\end{DoxyCode}
\Hypertarget{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a5dccd021a87f3bd80aabe13fbe5c88f0}\index{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level@{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level}!\_cert\_array\_from\_pem@{\_cert\_array\_from\_pem}}
\index{\_cert\_array\_from\_pem@{\_cert\_array\_from\_pem}!pip.\_vendor.urllib3.contrib.\_securetransport.low\_level@{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level}}
\doxysubsubsection{\texorpdfstring{\_cert\_array\_from\_pem()}{\_cert\_array\_from\_pem()}}
{\footnotesize\ttfamily \label{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a5dccd021a87f3bd80aabe13fbe5c88f0} 
\+\_\+cert\+\_\+array\+\_\+from\+\_\+pem (\begin{DoxyParamCaption}\item[{}]{pem\+\_\+bundle}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

\begin{DoxyVerb}Given a bundle of certs in PEM format, turns them into a CFArray of certs
that can be used to validate a cert chain.
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{low__level_8py_source_l00150}{150}} of file \mbox{\hyperlink{low__level_8py_source}{low\+\_\+level.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00150\ \textcolor{keyword}{def\ }\_cert\_array\_from\_pem(pem\_bundle):}
\DoxyCodeLine{00151\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{00152\ \textcolor{stringliteral}{\ \ \ \ Given\ a\ bundle\ of\ certs\ in\ PEM\ format,\ turns\ them\ into\ a\ CFArray\ of\ certs}}
\DoxyCodeLine{00153\ \textcolor{stringliteral}{\ \ \ \ that\ can\ be\ used\ to\ validate\ a\ cert\ chain.}}
\DoxyCodeLine{00154\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{00155\ \ \ \ \ \textcolor{comment}{\#\ Normalize\ the\ PEM\ bundle's\ line\ endings.}}
\DoxyCodeLine{00156\ \ \ \ \ pem\_bundle\ =\ pem\_bundle.replace(b\textcolor{stringliteral}{"{}\(\backslash\)r\(\backslash\)n"{}},\ b\textcolor{stringliteral}{"{}\(\backslash\)n"{}})}
\DoxyCodeLine{00157\ }
\DoxyCodeLine{00158\ \ \ \ \ der\_certs\ =\ [}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ base64.b64decode(match.group(1))\ \textcolor{keywordflow}{for}\ match\ \textcolor{keywordflow}{in}\ \_PEM\_CERTS\_RE.finditer(pem\_bundle)}
\DoxyCodeLine{00160\ \ \ \ \ ]}
\DoxyCodeLine{00161\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ der\_certs:}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ ssl.SSLError(\textcolor{stringliteral}{"{}No\ root\ certificates\ specified"{}})}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00164\ \ \ \ \ cert\_array\ =\ CoreFoundation.CFArrayCreateMutable(}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ CoreFoundation.kCFAllocatorDefault,}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ 0,}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ ctypes.byref(CoreFoundation.kCFTypeArrayCallBacks),}
\DoxyCodeLine{00168\ \ \ \ \ )}
\DoxyCodeLine{00169\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ cert\_array:}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ ssl.SSLError(\textcolor{stringliteral}{"{}Unable\ to\ allocate\ memory!"{}})}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00172\ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ der\_bytes\ \textcolor{keywordflow}{in}\ der\_certs:}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \ \ \ \ certdata\ =\ \_cf\_data\_from\_bytes(der\_bytes)}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ certdata:}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ ssl.SSLError(\textcolor{stringliteral}{"{}Unable\ to\ allocate\ memory!"{}})}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ cert\ =\ Security.SecCertificateCreateWithData(}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ CoreFoundation.kCFAllocatorDefault,\ certdata}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ CoreFoundation.CFRelease(certdata)}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ cert:}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ ssl.SSLError(\textcolor{stringliteral}{"{}Unable\ to\ build\ cert\ object!"{}})}
\DoxyCodeLine{00183\ }
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \ \ \ \ CoreFoundation.CFArrayAppendValue(cert\_array,\ cert)}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \ \ \ \ CoreFoundation.CFRelease(cert)}
\DoxyCodeLine{00186\ \ \ \ \ \textcolor{keywordflow}{except}\ Exception:}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ We\ need\ to\ free\ the\ array\ before\ the\ exception\ bubbles\ further.}}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ We\ only\ want\ to\ do\ that\ if\ an\ error\ occurs:\ otherwise,\ the\ caller}}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ should\ free.}}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ CoreFoundation.CFRelease(cert\_array)}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}}
\DoxyCodeLine{00192\ }
\DoxyCodeLine{00193\ \ \ \ \ \textcolor{keywordflow}{return}\ cert\_array}
\DoxyCodeLine{00194\ }
\DoxyCodeLine{00195\ }

\end{DoxyCode}


References \mbox{\hyperlink{low__level_8py_source_l00027}{\+\_\+cf\+\_\+data\+\_\+from\+\_\+bytes()}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=337pt]{d4/d95/namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a5dccd021a87f3bd80aabe13fbe5c88f0_cgraph}
\end{center}
\end{figure}
\Hypertarget{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a6110d85a5561a50a43dca1adc3fad2d9}\index{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level@{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level}!\_cf\_data\_from\_bytes@{\_cf\_data\_from\_bytes}}
\index{\_cf\_data\_from\_bytes@{\_cf\_data\_from\_bytes}!pip.\_vendor.urllib3.contrib.\_securetransport.low\_level@{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level}}
\doxysubsubsection{\texorpdfstring{\_cf\_data\_from\_bytes()}{\_cf\_data\_from\_bytes()}}
{\footnotesize\ttfamily \label{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a6110d85a5561a50a43dca1adc3fad2d9} 
\+\_\+cf\+\_\+data\+\_\+from\+\_\+bytes (\begin{DoxyParamCaption}\item[{}]{bytestring}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

\begin{DoxyVerb}Given a bytestring, create a CFData object from it. This CFData object must
be CFReleased by the caller.
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{low__level_8py_source_l00027}{27}} of file \mbox{\hyperlink{low__level_8py_source}{low\+\_\+level.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00027\ \textcolor{keyword}{def\ }\_cf\_data\_from\_bytes(bytestring):}
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{00029\ \textcolor{stringliteral}{\ \ \ \ Given\ a\ bytestring,\ create\ a\ CFData\ object\ from\ it.\ This\ CFData\ object\ must}}
\DoxyCodeLine{00030\ \textcolor{stringliteral}{\ \ \ \ be\ CFReleased\ by\ the\ caller.}}
\DoxyCodeLine{00031\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{keywordflow}{return}\ CoreFoundation.CFDataCreate(}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ CoreFoundation.kCFAllocatorDefault,\ bytestring,\ len(bytestring)}
\DoxyCodeLine{00034\ \ \ \ \ )}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ }

\end{DoxyCode}


Referenced by \mbox{\hyperlink{low__level_8py_source_l00150}{\+\_\+cert\+\_\+array\+\_\+from\+\_\+pem()}}.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=337pt]{d4/d95/namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a6110d85a5561a50a43dca1adc3fad2d9_icgraph}
\end{center}
\end{figure}
\Hypertarget{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a0a10dc719bbb2ca1a9ff2e7611da5078}\index{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level@{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level}!\_cf\_dictionary\_from\_tuples@{\_cf\_dictionary\_from\_tuples}}
\index{\_cf\_dictionary\_from\_tuples@{\_cf\_dictionary\_from\_tuples}!pip.\_vendor.urllib3.contrib.\_securetransport.low\_level@{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level}}
\doxysubsubsection{\texorpdfstring{\_cf\_dictionary\_from\_tuples()}{\_cf\_dictionary\_from\_tuples()}}
{\footnotesize\ttfamily \label{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a0a10dc719bbb2ca1a9ff2e7611da5078} 
\+\_\+cf\+\_\+dictionary\+\_\+from\+\_\+tuples (\begin{DoxyParamCaption}\item[{}]{tuples}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

\begin{DoxyVerb}Given a list of Python tuples, create an associated CFDictionary.
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{low__level_8py_source_l00037}{37}} of file \mbox{\hyperlink{low__level_8py_source}{low\+\_\+level.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00037\ \textcolor{keyword}{def\ }\_cf\_dictionary\_from\_tuples(tuples):}
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{00039\ \textcolor{stringliteral}{\ \ \ \ Given\ a\ list\ of\ Python\ tuples,\ create\ an\ associated\ CFDictionary.}}
\DoxyCodeLine{00040\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{00041\ \ \ \ \ dictionary\_size\ =\ len(tuples)}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{comment}{\#\ We\ need\ to\ get\ the\ dictionary\ keys\ and\ values\ out\ in\ the\ same\ order.}}
\DoxyCodeLine{00044\ \ \ \ \ keys\ =\ (t[0]\ \textcolor{keywordflow}{for}\ t\ \textcolor{keywordflow}{in}\ tuples)}
\DoxyCodeLine{00045\ \ \ \ \ values\ =\ (t[1]\ \textcolor{keywordflow}{for}\ t\ \textcolor{keywordflow}{in}\ tuples)}
\DoxyCodeLine{00046\ \ \ \ \ cf\_keys\ =\ (CoreFoundation.CFTypeRef\ *\ dictionary\_size)(*keys)}
\DoxyCodeLine{00047\ \ \ \ \ cf\_values\ =\ (CoreFoundation.CFTypeRef\ *\ dictionary\_size)(*values)}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keywordflow}{return}\ CoreFoundation.CFDictionaryCreate(}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ CoreFoundation.kCFAllocatorDefault,}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ cf\_keys,}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ cf\_values,}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ dictionary\_size,}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ CoreFoundation.kCFTypeDictionaryKeyCallBacks,}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ CoreFoundation.kCFTypeDictionaryValueCallBacks,}
\DoxyCodeLine{00056\ \ \ \ \ )}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ }

\end{DoxyCode}
\Hypertarget{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_ae493b341f685e54ea9ddaf2d5d781363}\index{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level@{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level}!\_cf\_string\_to\_unicode@{\_cf\_string\_to\_unicode}}
\index{\_cf\_string\_to\_unicode@{\_cf\_string\_to\_unicode}!pip.\_vendor.urllib3.contrib.\_securetransport.low\_level@{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level}}
\doxysubsubsection{\texorpdfstring{\_cf\_string\_to\_unicode()}{\_cf\_string\_to\_unicode()}}
{\footnotesize\ttfamily \label{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_ae493b341f685e54ea9ddaf2d5d781363} 
\+\_\+cf\+\_\+string\+\_\+to\+\_\+unicode (\begin{DoxyParamCaption}\item[{}]{value}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

\begin{DoxyVerb}Creates a Unicode string from a CFString object. Used entirely for error
reporting.

Yes, it annoys me quite a lot that this function is this complex.
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{low__level_8py_source_l00104}{104}} of file \mbox{\hyperlink{low__level_8py_source}{low\+\_\+level.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00104\ \textcolor{keyword}{def\ }\_cf\_string\_to\_unicode(value):}
\DoxyCodeLine{00105\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{00106\ \textcolor{stringliteral}{\ \ \ \ Creates\ a\ Unicode\ string\ from\ a\ CFString\ object.\ Used\ entirely\ for\ error}}
\DoxyCodeLine{00107\ \textcolor{stringliteral}{\ \ \ \ reporting.}}
\DoxyCodeLine{00108\ \textcolor{stringliteral}{}}
\DoxyCodeLine{00109\ \textcolor{stringliteral}{\ \ \ \ Yes,\ it\ annoys\ me\ quite\ a\ lot\ that\ this\ function\ is\ this\ complex.}}
\DoxyCodeLine{00110\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{00111\ \ \ \ \ value\_as\_void\_p\ =\ ctypes.cast(value,\ ctypes.POINTER(ctypes.c\_void\_p))}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00113\ \ \ \ \ string\ =\ CoreFoundation.CFStringGetCStringPtr(}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ value\_as\_void\_p,\ CFConst.kCFStringEncodingUTF8}
\DoxyCodeLine{00115\ \ \ \ \ )}
\DoxyCodeLine{00116\ \ \ \ \ \textcolor{keywordflow}{if}\ string\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ buffer\ =\ ctypes.create\_string\_buffer(1024)}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ result\ =\ CoreFoundation.CFStringGetCString(}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \ \ \ \ value\_as\_void\_p,\ buffer,\ 1024,\ CFConst.kCFStringEncodingUTF8}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ result:}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ OSError(\textcolor{stringliteral}{"{}Error\ copying\ C\ string\ from\ CFStringRef"{}})}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ string\ =\ buffer.value}
\DoxyCodeLine{00124\ \ \ \ \ \textcolor{keywordflow}{if}\ string\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ string\ =\ string.decode(\textcolor{stringliteral}{"{}utf-\/8"{}})}
\DoxyCodeLine{00126\ \ \ \ \ \textcolor{keywordflow}{return}\ string}
\DoxyCodeLine{00127\ }
\DoxyCodeLine{00128\ }

\end{DoxyCode}


Referenced by \mbox{\hyperlink{low__level_8py_source_l00129}{\+\_\+assert\+\_\+no\+\_\+error()}}.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d4/d95/namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_ae493b341f685e54ea9ddaf2d5d781363_icgraph}
\end{center}
\end{figure}
\Hypertarget{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a4bf4891465a41176874b0f32bf208a8f}\index{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level@{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level}!\_cfstr@{\_cfstr}}
\index{\_cfstr@{\_cfstr}!pip.\_vendor.urllib3.contrib.\_securetransport.low\_level@{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level}}
\doxysubsubsection{\texorpdfstring{\_cfstr()}{\_cfstr()}}
{\footnotesize\ttfamily \label{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a4bf4891465a41176874b0f32bf208a8f} 
\+\_\+cfstr (\begin{DoxyParamCaption}\item[{}]{py\+\_\+bstr}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

\begin{DoxyVerb}Given a Python binary data, create a CFString.
The string must be CFReleased by the caller.
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{low__level_8py_source_l00059}{59}} of file \mbox{\hyperlink{low__level_8py_source}{low\+\_\+level.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00059\ \textcolor{keyword}{def\ }\_cfstr(py\_bstr):}
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{00061\ \textcolor{stringliteral}{\ \ \ \ Given\ a\ Python\ binary\ data,\ create\ a\ CFString.}}
\DoxyCodeLine{00062\ \textcolor{stringliteral}{\ \ \ \ The\ string\ must\ be\ CFReleased\ by\ the\ caller.}}
\DoxyCodeLine{00063\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{00064\ \ \ \ \ c\_str\ =\ ctypes.c\_char\_p(py\_bstr)}
\DoxyCodeLine{00065\ \ \ \ \ cf\_str\ =\ CoreFoundation.CFStringCreateWithCString(}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ CoreFoundation.kCFAllocatorDefault,}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ c\_str,}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ CFConst.kCFStringEncodingUTF8,}
\DoxyCodeLine{00069\ \ \ \ \ )}
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{keywordflow}{return}\ cf\_str}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ }

\end{DoxyCode}


Referenced by \mbox{\hyperlink{low__level_8py_source_l00073}{\+\_\+create\+\_\+cfstring\+\_\+array()}}.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=270pt]{d4/d95/namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a4bf4891465a41176874b0f32bf208a8f_icgraph}
\end{center}
\end{figure}
\Hypertarget{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a20ed75774db1ca1d95afa41c6a73cd16}\index{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level@{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level}!\_create\_cfstring\_array@{\_create\_cfstring\_array}}
\index{\_create\_cfstring\_array@{\_create\_cfstring\_array}!pip.\_vendor.urllib3.contrib.\_securetransport.low\_level@{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level}}
\doxysubsubsection{\texorpdfstring{\_create\_cfstring\_array()}{\_create\_cfstring\_array()}}
{\footnotesize\ttfamily \label{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a20ed75774db1ca1d95afa41c6a73cd16} 
\+\_\+create\+\_\+cfstring\+\_\+array (\begin{DoxyParamCaption}\item[{}]{lst}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

\begin{DoxyVerb}Given a list of Python binary data, create an associated CFMutableArray.
The array must be CFReleased by the caller.

Raises an ssl.SSLError on failure.
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{low__level_8py_source_l00073}{73}} of file \mbox{\hyperlink{low__level_8py_source}{low\+\_\+level.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00073\ \textcolor{keyword}{def\ }\_create\_cfstring\_array(lst):}
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{00075\ \textcolor{stringliteral}{\ \ \ \ Given\ a\ list\ of\ Python\ binary\ data,\ create\ an\ associated\ CFMutableArray.}}
\DoxyCodeLine{00076\ \textcolor{stringliteral}{\ \ \ \ The\ array\ must\ be\ CFReleased\ by\ the\ caller.}}
\DoxyCodeLine{00077\ \textcolor{stringliteral}{}}
\DoxyCodeLine{00078\ \textcolor{stringliteral}{\ \ \ \ Raises\ an\ ssl.SSLError\ on\ failure.}}
\DoxyCodeLine{00079\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{00080\ \ \ \ \ cf\_arr\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ cf\_arr\ =\ CoreFoundation.CFArrayCreateMutable(}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \ \ \ \ CoreFoundation.kCFAllocatorDefault,}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ 0,}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ ctypes.byref(CoreFoundation.kCFTypeArrayCallBacks),}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ cf\_arr:}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ MemoryError(\textcolor{stringliteral}{"{}Unable\ to\ allocate\ memory!"{}})}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ item\ \textcolor{keywordflow}{in}\ lst:}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ cf\_str\ =\ \_cfstr(item)}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ cf\_str:}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ MemoryError(\textcolor{stringliteral}{"{}Unable\ to\ allocate\ memory!"{}})}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ CoreFoundation.CFArrayAppendValue(cf\_arr,\ cf\_str)}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{finally}:}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ CoreFoundation.CFRelease(cf\_str)}
\DoxyCodeLine{00097\ \ \ \ \ \textcolor{keywordflow}{except}\ BaseException\ \textcolor{keyword}{as}\ e:}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ cf\_arr:}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \ \ \ \ CoreFoundation.CFRelease(cf\_arr)}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ ssl.SSLError(\textcolor{stringliteral}{"{}Unable\ to\ allocate\ array:\ \%s"{}}\ \%\ (e,))}
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{keywordflow}{return}\ cf\_arr}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ }

\end{DoxyCode}


References \mbox{\hyperlink{low__level_8py_source_l00059}{\+\_\+cfstr()}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=270pt]{d4/d95/namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a20ed75774db1ca1d95afa41c6a73cd16_cgraph}
\end{center}
\end{figure}
\Hypertarget{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a7c4143f5a3e2066d842aa5720b36d918}\index{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level@{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level}!\_is\_cert@{\_is\_cert}}
\index{\_is\_cert@{\_is\_cert}!pip.\_vendor.urllib3.contrib.\_securetransport.low\_level@{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level}}
\doxysubsubsection{\texorpdfstring{\_is\_cert()}{\_is\_cert()}}
{\footnotesize\ttfamily \label{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a7c4143f5a3e2066d842aa5720b36d918} 
\+\_\+is\+\_\+cert (\begin{DoxyParamCaption}\item[{}]{item}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

\begin{DoxyVerb}Returns True if a given CFTypeRef is a certificate.
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{low__level_8py_source_l00196}{196}} of file \mbox{\hyperlink{low__level_8py_source}{low\+\_\+level.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00196\ \textcolor{keyword}{def\ }\_is\_cert(item):}
\DoxyCodeLine{00197\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{00198\ \textcolor{stringliteral}{\ \ \ \ Returns\ True\ if\ a\ given\ CFTypeRef\ is\ a\ certificate.}}
\DoxyCodeLine{00199\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{00200\ \ \ \ \ expected\ =\ Security.SecCertificateGetTypeID()}
\DoxyCodeLine{00201\ \ \ \ \ \textcolor{keywordflow}{return}\ CoreFoundation.CFGetTypeID(item)\ ==\ expected}
\DoxyCodeLine{00202\ }
\DoxyCodeLine{00203\ }

\end{DoxyCode}


Referenced by \mbox{\hyperlink{low__level_8py_source_l00247}{\+\_\+load\+\_\+items\+\_\+from\+\_\+file()}}.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d4/d95/namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a7c4143f5a3e2066d842aa5720b36d918_icgraph}
\end{center}
\end{figure}
\Hypertarget{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_ac2cd6508dbaf0aacedfa0d08795e08f3}\index{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level@{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level}!\_is\_identity@{\_is\_identity}}
\index{\_is\_identity@{\_is\_identity}!pip.\_vendor.urllib3.contrib.\_securetransport.low\_level@{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level}}
\doxysubsubsection{\texorpdfstring{\_is\_identity()}{\_is\_identity()}}
{\footnotesize\ttfamily \label{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_ac2cd6508dbaf0aacedfa0d08795e08f3} 
\+\_\+is\+\_\+identity (\begin{DoxyParamCaption}\item[{}]{item}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

\begin{DoxyVerb}Returns True if a given CFTypeRef is an identity.
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{low__level_8py_source_l00204}{204}} of file \mbox{\hyperlink{low__level_8py_source}{low\+\_\+level.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00204\ \textcolor{keyword}{def\ }\_is\_identity(item):}
\DoxyCodeLine{00205\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{00206\ \textcolor{stringliteral}{\ \ \ \ Returns\ True\ if\ a\ given\ CFTypeRef\ is\ an\ identity.}}
\DoxyCodeLine{00207\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{00208\ \ \ \ \ expected\ =\ Security.SecIdentityGetTypeID()}
\DoxyCodeLine{00209\ \ \ \ \ \textcolor{keywordflow}{return}\ CoreFoundation.CFGetTypeID(item)\ ==\ expected}
\DoxyCodeLine{00210\ }
\DoxyCodeLine{00211\ }

\end{DoxyCode}


Referenced by \mbox{\hyperlink{low__level_8py_source_l00247}{\+\_\+load\+\_\+items\+\_\+from\+\_\+file()}}.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d4/d95/namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_ac2cd6508dbaf0aacedfa0d08795e08f3_icgraph}
\end{center}
\end{figure}
\Hypertarget{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_ad8b9d81345d887c85664ef226838079e}\index{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level@{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level}!\_load\_client\_cert\_chain@{\_load\_client\_cert\_chain}}
\index{\_load\_client\_cert\_chain@{\_load\_client\_cert\_chain}!pip.\_vendor.urllib3.contrib.\_securetransport.low\_level@{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level}}
\doxysubsubsection{\texorpdfstring{\_load\_client\_cert\_chain()}{\_load\_client\_cert\_chain()}}
{\footnotesize\ttfamily \label{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_ad8b9d81345d887c85664ef226838079e} 
\+\_\+load\+\_\+client\+\_\+cert\+\_\+chain (\begin{DoxyParamCaption}\item[{}]{keychain}{, }\item[{\texorpdfstring{$\ast$}{*}}]{paths}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

\begin{DoxyVerb}Load certificates and maybe keys from a number of files. Has the end goal
of returning a CFArray containing one SecIdentityRef, and then zero or more
SecCertificateRef objects, suitable for use as a client certificate trust
chain.
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{low__level_8py_source_l00302}{302}} of file \mbox{\hyperlink{low__level_8py_source}{low\+\_\+level.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00302\ \textcolor{keyword}{def\ }\_load\_client\_cert\_chain(keychain,\ *paths):}
\DoxyCodeLine{00303\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{00304\ \textcolor{stringliteral}{\ \ \ \ Load\ certificates\ and\ maybe\ keys\ from\ a\ number\ of\ files.\ Has\ the\ end\ goal}}
\DoxyCodeLine{00305\ \textcolor{stringliteral}{\ \ \ \ of\ returning\ a\ CFArray\ containing\ one\ SecIdentityRef,\ and\ then\ zero\ or\ more}}
\DoxyCodeLine{00306\ \textcolor{stringliteral}{\ \ \ \ SecCertificateRef\ objects,\ suitable\ for\ use\ as\ a\ client\ certificate\ trust}}
\DoxyCodeLine{00307\ \textcolor{stringliteral}{\ \ \ \ chain.}}
\DoxyCodeLine{00308\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{00309\ \ \ \ \ \textcolor{comment}{\#\ Ok,\ the\ strategy.}}
\DoxyCodeLine{00310\ \ \ \ \ \textcolor{comment}{\#}}
\DoxyCodeLine{00311\ \ \ \ \ \textcolor{comment}{\#\ This\ relies\ on\ knowing\ that\ macOS\ will\ not\ give\ you\ a\ SecIdentityRef}}
\DoxyCodeLine{00312\ \ \ \ \ \textcolor{comment}{\#\ unless\ you\ have\ imported\ a\ key\ into\ a\ keychain.\ This\ is\ a\ somewhat}}
\DoxyCodeLine{00313\ \ \ \ \ \textcolor{comment}{\#\ artificial\ limitation\ of\ macOS\ (for\ example,\ it\ doesn't\ necessarily}}
\DoxyCodeLine{00314\ \ \ \ \ \textcolor{comment}{\#\ affect\ iOS),\ but\ there\ is\ nothing\ inside\ Security.framework\ that\ lets\ you}}
\DoxyCodeLine{00315\ \ \ \ \ \textcolor{comment}{\#\ get\ a\ SecIdentityRef\ without\ having\ a\ key\ in\ a\ keychain.}}
\DoxyCodeLine{00316\ \ \ \ \ \textcolor{comment}{\#}}
\DoxyCodeLine{00317\ \ \ \ \ \textcolor{comment}{\#\ So\ the\ policy\ here\ is\ we\ take\ all\ the\ files\ and\ iterate\ them\ in\ order.}}
\DoxyCodeLine{00318\ \ \ \ \ \textcolor{comment}{\#\ Each\ one\ will\ use\ SecItemImport\ to\ have\ one\ or\ more\ objects\ loaded\ from}}
\DoxyCodeLine{00319\ \ \ \ \ \textcolor{comment}{\#\ it.\ We\ will\ also\ point\ at\ a\ keychain\ that\ macOS\ can\ use\ to\ work\ with\ the}}
\DoxyCodeLine{00320\ \ \ \ \ \textcolor{comment}{\#\ private\ key.}}
\DoxyCodeLine{00321\ \ \ \ \ \textcolor{comment}{\#}}
\DoxyCodeLine{00322\ \ \ \ \ \textcolor{comment}{\#\ Once\ we\ have\ all\ the\ objects,\ we'll\ check\ what\ we\ actually\ have.\ If\ we}}
\DoxyCodeLine{00323\ \ \ \ \ \textcolor{comment}{\#\ already\ have\ a\ SecIdentityRef\ in\ hand,\ fab:\ we'll\ use\ that.\ Otherwise,}}
\DoxyCodeLine{00324\ \ \ \ \ \textcolor{comment}{\#\ we'll\ take\ the\ first\ certificate\ (which\ we\ assume\ to\ be\ our\ leaf)\ and}}
\DoxyCodeLine{00325\ \ \ \ \ \textcolor{comment}{\#\ ask\ the\ keychain\ to\ give\ us\ a\ SecIdentityRef\ with\ that\ cert's\ associated}}
\DoxyCodeLine{00326\ \ \ \ \ \textcolor{comment}{\#\ key.}}
\DoxyCodeLine{00327\ \ \ \ \ \textcolor{comment}{\#}}
\DoxyCodeLine{00328\ \ \ \ \ \textcolor{comment}{\#\ We'll\ then\ return\ a\ CFArray\ containing\ the\ trust\ chain:\ one}}
\DoxyCodeLine{00329\ \ \ \ \ \textcolor{comment}{\#\ SecIdentityRef\ and\ then\ zero-\/or-\/more\ SecCertificateRef\ objects.\ The}}
\DoxyCodeLine{00330\ \ \ \ \ \textcolor{comment}{\#\ responsibility\ for\ freeing\ this\ CFArray\ will\ be\ with\ the\ caller.\ This}}
\DoxyCodeLine{00331\ \ \ \ \ \textcolor{comment}{\#\ CFArray\ must\ remain\ alive\ for\ the\ entire\ connection,\ so\ in\ practice\ it}}
\DoxyCodeLine{00332\ \ \ \ \ \textcolor{comment}{\#\ will\ be\ stored\ with\ a\ single\ SSLSocket,\ along\ with\ the\ reference\ to\ the}}
\DoxyCodeLine{00333\ \ \ \ \ \textcolor{comment}{\#\ keychain.}}
\DoxyCodeLine{00334\ \ \ \ \ certificates\ =\ []}
\DoxyCodeLine{00335\ \ \ \ \ identities\ =\ []}
\DoxyCodeLine{00336\ }
\DoxyCodeLine{00337\ \ \ \ \ \textcolor{comment}{\#\ Filter\ out\ bad\ paths.}}
\DoxyCodeLine{00338\ \ \ \ \ paths\ =\ (path\ \textcolor{keywordflow}{for}\ path\ \textcolor{keywordflow}{in}\ paths\ \textcolor{keywordflow}{if}\ path)}
\DoxyCodeLine{00339\ }
\DoxyCodeLine{00340\ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{00341\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ file\_path\ \textcolor{keywordflow}{in}\ paths:}
\DoxyCodeLine{00342\ \ \ \ \ \ \ \ \ \ \ \ \ new\_identities,\ new\_certs\ =\ \_load\_items\_from\_file(keychain,\ file\_path)}
\DoxyCodeLine{00343\ \ \ \ \ \ \ \ \ \ \ \ \ identities.extend(new\_identities)}
\DoxyCodeLine{00344\ \ \ \ \ \ \ \ \ \ \ \ \ certificates.extend(new\_certs)}
\DoxyCodeLine{00345\ }
\DoxyCodeLine{00346\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Ok,\ we\ have\ everything.\ The\ question\ is:\ do\ we\ have\ an\ identity?\ If}}
\DoxyCodeLine{00347\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ not,\ we\ want\ to\ grab\ one\ from\ the\ first\ cert\ we\ have.}}
\DoxyCodeLine{00348\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ identities:}
\DoxyCodeLine{00349\ \ \ \ \ \ \ \ \ \ \ \ \ new\_identity\ =\ Security.SecIdentityRef()}
\DoxyCodeLine{00350\ \ \ \ \ \ \ \ \ \ \ \ \ status\ =\ Security.SecIdentityCreateWithCertificate(}
\DoxyCodeLine{00351\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ keychain,\ certificates[0],\ ctypes.byref(new\_identity)}
\DoxyCodeLine{00352\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00353\ \ \ \ \ \ \ \ \ \ \ \ \ \_assert\_no\_error(status)}
\DoxyCodeLine{00354\ \ \ \ \ \ \ \ \ \ \ \ \ identities.append(new\_identity)}
\DoxyCodeLine{00355\ }
\DoxyCodeLine{00356\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ We\ now\ want\ to\ release\ the\ original\ certificate,\ as\ we\ no\ longer}}
\DoxyCodeLine{00357\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ need\ it.}}
\DoxyCodeLine{00358\ \ \ \ \ \ \ \ \ \ \ \ \ CoreFoundation.CFRelease(certificates.pop(0))}
\DoxyCodeLine{00359\ }
\DoxyCodeLine{00360\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ We\ now\ need\ to\ build\ a\ new\ CFArray\ that\ holds\ the\ trust\ chain.}}
\DoxyCodeLine{00361\ \ \ \ \ \ \ \ \ trust\_chain\ =\ CoreFoundation.CFArrayCreateMutable(}
\DoxyCodeLine{00362\ \ \ \ \ \ \ \ \ \ \ \ \ CoreFoundation.kCFAllocatorDefault,}
\DoxyCodeLine{00363\ \ \ \ \ \ \ \ \ \ \ \ \ 0,}
\DoxyCodeLine{00364\ \ \ \ \ \ \ \ \ \ \ \ \ ctypes.byref(CoreFoundation.kCFTypeArrayCallBacks),}
\DoxyCodeLine{00365\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00366\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ item\ \textcolor{keywordflow}{in}\ itertools.chain(identities,\ certificates):}
\DoxyCodeLine{00367\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ ArrayAppendValue\ does\ a\ CFRetain\ on\ the\ item.\ That's\ fine,}}
\DoxyCodeLine{00368\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ because\ the\ finally\ block\ will\ release\ our\ other\ refs\ to\ them.}}
\DoxyCodeLine{00369\ \ \ \ \ \ \ \ \ \ \ \ \ CoreFoundation.CFArrayAppendValue(trust\_chain,\ item)}
\DoxyCodeLine{00370\ }
\DoxyCodeLine{00371\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ trust\_chain}
\DoxyCodeLine{00372\ \ \ \ \ \textcolor{keywordflow}{finally}:}
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ obj\ \textcolor{keywordflow}{in}\ itertools.chain(identities,\ certificates):}
\DoxyCodeLine{00374\ \ \ \ \ \ \ \ \ \ \ \ \ CoreFoundation.CFRelease(obj)}
\DoxyCodeLine{00375\ }
\DoxyCodeLine{00376\ }

\end{DoxyCode}


References \mbox{\hyperlink{low__level_8py_source_l00129}{\+\_\+assert\+\_\+no\+\_\+error()}}, and \mbox{\hyperlink{low__level_8py_source_l00247}{\+\_\+load\+\_\+items\+\_\+from\+\_\+file()}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d4/d95/namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_ad8b9d81345d887c85664ef226838079e_cgraph}
\end{center}
\end{figure}
\Hypertarget{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a8e355fb65226a7bbcf7ec373c449315f}\index{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level@{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level}!\_load\_items\_from\_file@{\_load\_items\_from\_file}}
\index{\_load\_items\_from\_file@{\_load\_items\_from\_file}!pip.\_vendor.urllib3.contrib.\_securetransport.low\_level@{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level}}
\doxysubsubsection{\texorpdfstring{\_load\_items\_from\_file()}{\_load\_items\_from\_file()}}
{\footnotesize\ttfamily \label{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a8e355fb65226a7bbcf7ec373c449315f} 
\+\_\+load\+\_\+items\+\_\+from\+\_\+file (\begin{DoxyParamCaption}\item[{}]{keychain}{, }\item[{}]{path}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

\begin{DoxyVerb}Given a single file, loads all the trust objects from it into arrays and
the keychain.
Returns a tuple of lists: the first list is a list of identities, the
second a list of certs.
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{low__level_8py_source_l00247}{247}} of file \mbox{\hyperlink{low__level_8py_source}{low\+\_\+level.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00247\ \textcolor{keyword}{def\ }\_load\_items\_from\_file(keychain,\ path):}
\DoxyCodeLine{00248\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{00249\ \textcolor{stringliteral}{\ \ \ \ Given\ a\ single\ file,\ loads\ all\ the\ trust\ objects\ from\ it\ into\ arrays\ and}}
\DoxyCodeLine{00250\ \textcolor{stringliteral}{\ \ \ \ the\ keychain.}}
\DoxyCodeLine{00251\ \textcolor{stringliteral}{\ \ \ \ Returns\ a\ tuple\ of\ lists:\ the\ first\ list\ is\ a\ list\ of\ identities,\ the}}
\DoxyCodeLine{00252\ \textcolor{stringliteral}{\ \ \ \ second\ a\ list\ of\ certs.}}
\DoxyCodeLine{00253\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{00254\ \ \ \ \ certificates\ =\ []}
\DoxyCodeLine{00255\ \ \ \ \ identities\ =\ []}
\DoxyCodeLine{00256\ \ \ \ \ result\_array\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{00257\ }
\DoxyCodeLine{00258\ \ \ \ \ \textcolor{keyword}{with}\ open(path,\ \textcolor{stringliteral}{"{}rb"{}})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ raw\_filedata\ =\ f.read()}
\DoxyCodeLine{00260\ }
\DoxyCodeLine{00261\ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ filedata\ =\ CoreFoundation.CFDataCreate(}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ \ \ \ \ CoreFoundation.kCFAllocatorDefault,\ raw\_filedata,\ len(raw\_filedata)}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ result\_array\ =\ CoreFoundation.CFArrayRef()}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ result\ =\ Security.SecItemImport(}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \ \ \ \ filedata,\ \ \textcolor{comment}{\#\ cert\ data}}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{None},\ \ \textcolor{comment}{\#\ Filename,\ leaving\ it\ out\ for\ now}}
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{None},\ \ \textcolor{comment}{\#\ What\ the\ type\ of\ the\ file\ is,\ we\ don't\ care}}
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{None},\ \ \textcolor{comment}{\#\ what's\ in\ the\ file,\ we\ don't\ care}}
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \ \ \ \ 0,\ \ \textcolor{comment}{\#\ import\ flags}}
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{None},\ \ \textcolor{comment}{\#\ key\ params,\ can\ include\ passphrase\ in\ the\ future}}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \ \ \ \ keychain,\ \ \textcolor{comment}{\#\ The\ keychain\ to\ insert\ into}}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \ \ \ \ ctypes.byref(result\_array),\ \ \textcolor{comment}{\#\ Results}}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \_assert\_no\_error(result)}
\DoxyCodeLine{00277\ }
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ A\ CFArray\ is\ not\ very\ useful\ to\ us\ as\ an\ intermediary}}
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ representation,\ so\ we\ are\ going\ to\ extract\ the\ objects\ we\ want}}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ and\ then\ free\ the\ array.\ We\ don't\ need\ to\ keep\ hold\ of\ keys:\ the}}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ keychain\ already\ has\ them!}}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ result\_count\ =\ CoreFoundation.CFArrayGetCount(result\_array)}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ index\ \textcolor{keywordflow}{in}\ range(result\_count):}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ \ \ \ \ item\ =\ CoreFoundation.CFArrayGetValueAtIndex(result\_array,\ index)}
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \ \ \ \ item\ =\ ctypes.cast(item,\ CoreFoundation.CFTypeRef)}
\DoxyCodeLine{00286\ }
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \_is\_cert(item):}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ CoreFoundation.CFRetain(item)}
\DoxyCodeLine{00289\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ certificates.append(item)}
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{elif}\ \_is\_identity(item):}
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ CoreFoundation.CFRetain(item)}
\DoxyCodeLine{00292\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ identities.append(item)}
\DoxyCodeLine{00293\ \ \ \ \ \textcolor{keywordflow}{finally}:}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ result\_array:}
\DoxyCodeLine{00295\ \ \ \ \ \ \ \ \ \ \ \ \ CoreFoundation.CFRelease(result\_array)}
\DoxyCodeLine{00296\ }
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ CoreFoundation.CFRelease(filedata)}
\DoxyCodeLine{00298\ }
\DoxyCodeLine{00299\ \ \ \ \ \textcolor{keywordflow}{return}\ (identities,\ certificates)}
\DoxyCodeLine{00300\ }
\DoxyCodeLine{00301\ }

\end{DoxyCode}


References \mbox{\hyperlink{low__level_8py_source_l00129}{\+\_\+assert\+\_\+no\+\_\+error()}}, \mbox{\hyperlink{low__level_8py_source_l00196}{\+\_\+is\+\_\+cert()}}, and \mbox{\hyperlink{low__level_8py_source_l00204}{\+\_\+is\+\_\+identity()}}.



Referenced by \mbox{\hyperlink{low__level_8py_source_l00302}{\+\_\+load\+\_\+client\+\_\+cert\+\_\+chain()}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d4/d95/namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a8e355fb65226a7bbcf7ec373c449315f_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=345pt]{d4/d95/namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a8e355fb65226a7bbcf7ec373c449315f_icgraph}
\end{center}
\end{figure}
\Hypertarget{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a090abebf4ebe49bab98af9737efab3fd}\index{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level@{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level}!\_temporary\_keychain@{\_temporary\_keychain}}
\index{\_temporary\_keychain@{\_temporary\_keychain}!pip.\_vendor.urllib3.contrib.\_securetransport.low\_level@{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level}}
\doxysubsubsection{\texorpdfstring{\_temporary\_keychain()}{\_temporary\_keychain()}}
{\footnotesize\ttfamily \label{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a090abebf4ebe49bab98af9737efab3fd} 
\+\_\+temporary\+\_\+keychain (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

\begin{DoxyVerb}This function creates a temporary Mac keychain that we can use to work with
credentials. This keychain uses a one-time password and a temporary file to
store the data. We expect to have one keychain per socket. The returned
SecKeychainRef must be freed by the caller, including calling
SecKeychainDelete.

Returns a tuple of the SecKeychainRef and the path to the temporary
directory that contains it.
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{low__level_8py_source_l00212}{212}} of file \mbox{\hyperlink{low__level_8py_source}{low\+\_\+level.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00212\ \textcolor{keyword}{def\ }\_temporary\_keychain():}
\DoxyCodeLine{00213\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{00214\ \textcolor{stringliteral}{\ \ \ \ This\ function\ creates\ a\ temporary\ Mac\ keychain\ that\ we\ can\ use\ to\ work\ with}}
\DoxyCodeLine{00215\ \textcolor{stringliteral}{\ \ \ \ credentials.\ This\ keychain\ uses\ a\ one-\/time\ password\ and\ a\ temporary\ file\ to}}
\DoxyCodeLine{00216\ \textcolor{stringliteral}{\ \ \ \ store\ the\ data.\ We\ expect\ to\ have\ one\ keychain\ per\ socket.\ The\ returned}}
\DoxyCodeLine{00217\ \textcolor{stringliteral}{\ \ \ \ SecKeychainRef\ must\ be\ freed\ by\ the\ caller,\ including\ calling}}
\DoxyCodeLine{00218\ \textcolor{stringliteral}{\ \ \ \ SecKeychainDelete.}}
\DoxyCodeLine{00219\ \textcolor{stringliteral}{}}
\DoxyCodeLine{00220\ \textcolor{stringliteral}{\ \ \ \ Returns\ a\ tuple\ of\ the\ SecKeychainRef\ and\ the\ path\ to\ the\ temporary}}
\DoxyCodeLine{00221\ \textcolor{stringliteral}{\ \ \ \ directory\ that\ contains\ it.}}
\DoxyCodeLine{00222\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{00223\ \ \ \ \ \textcolor{comment}{\#\ Unfortunately,\ SecKeychainCreate\ requires\ a\ path\ to\ a\ keychain.\ This}}
\DoxyCodeLine{00224\ \ \ \ \ \textcolor{comment}{\#\ means\ we\ cannot\ use\ mkstemp\ to\ use\ a\ generic\ temporary\ file.\ Instead,}}
\DoxyCodeLine{00225\ \ \ \ \ \textcolor{comment}{\#\ we're\ going\ to\ create\ a\ temporary\ directory\ and\ a\ filename\ to\ use\ there.}}
\DoxyCodeLine{00226\ \ \ \ \ \textcolor{comment}{\#\ This\ filename\ will\ be\ 8\ random\ bytes\ expanded\ into\ base64.\ We\ also\ need}}
\DoxyCodeLine{00227\ \ \ \ \ \textcolor{comment}{\#\ some\ random\ bytes\ to\ password-\/protect\ the\ keychain\ we're\ creating,\ so\ we}}
\DoxyCodeLine{00228\ \ \ \ \ \textcolor{comment}{\#\ ask\ for\ 40\ random\ bytes.}}
\DoxyCodeLine{00229\ \ \ \ \ random\_bytes\ =\ os.urandom(40)}
\DoxyCodeLine{00230\ \ \ \ \ filename\ =\ base64.b16encode(random\_bytes[:8]).decode(\textcolor{stringliteral}{"{}utf-\/8"{}})}
\DoxyCodeLine{00231\ \ \ \ \ password\ =\ base64.b16encode(random\_bytes[8:])\ \ \textcolor{comment}{\#\ Must\ be\ valid\ UTF-\/8}}
\DoxyCodeLine{00232\ \ \ \ \ tempdirectory\ =\ tempfile.mkdtemp()}
\DoxyCodeLine{00233\ }
\DoxyCodeLine{00234\ \ \ \ \ keychain\_path\ =\ os.path.join(tempdirectory,\ filename).encode(\textcolor{stringliteral}{"{}utf-\/8"{}})}
\DoxyCodeLine{00235\ }
\DoxyCodeLine{00236\ \ \ \ \ \textcolor{comment}{\#\ We\ now\ want\ to\ create\ the\ keychain\ itself.}}
\DoxyCodeLine{00237\ \ \ \ \ keychain\ =\ Security.SecKeychainRef()}
\DoxyCodeLine{00238\ \ \ \ \ status\ =\ Security.SecKeychainCreate(}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ keychain\_path,\ len(password),\ password,\ \textcolor{keyword}{False},\ \textcolor{keywordtype}{None},\ ctypes.byref(keychain)}
\DoxyCodeLine{00240\ \ \ \ \ )}
\DoxyCodeLine{00241\ \ \ \ \ \_assert\_no\_error(status)}
\DoxyCodeLine{00242\ }
\DoxyCodeLine{00243\ \ \ \ \ \textcolor{comment}{\#\ Having\ created\ the\ keychain,\ we\ want\ to\ pass\ it\ off\ to\ the\ caller.}}
\DoxyCodeLine{00244\ \ \ \ \ \textcolor{keywordflow}{return}\ keychain,\ tempdirectory}
\DoxyCodeLine{00245\ }
\DoxyCodeLine{00246\ }

\end{DoxyCode}


References \mbox{\hyperlink{low__level_8py_source_l00129}{\+\_\+assert\+\_\+no\+\_\+error()}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d4/d95/namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a090abebf4ebe49bab98af9737efab3fd_cgraph}
\end{center}
\end{figure}


\label{doc-var-members}
\Hypertarget{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_doc-var-members}
\doxysubsection{Variable Documentation}
\Hypertarget{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a805ffd560d87a0b5053e254331abe635}\index{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level@{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level}!\_PEM\_CERTS\_RE@{\_PEM\_CERTS\_RE}}
\index{\_PEM\_CERTS\_RE@{\_PEM\_CERTS\_RE}!pip.\_vendor.urllib3.contrib.\_securetransport.low\_level@{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level}}
\doxysubsubsection{\texorpdfstring{\_PEM\_CERTS\_RE}{\_PEM\_CERTS\_RE}}
{\footnotesize\ttfamily \label{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a805ffd560d87a0b5053e254331abe635} 
\+\_\+\+PEM\+\_\+\+CERTS\+\_\+\+RE\hspace{0.3cm}{\ttfamily [protected]}}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ =\ \ re.compile(}
\DoxyCodeLine{00002\ \ \ \ \ b\textcolor{stringliteral}{"{}-\/-\/-\/-\/-\/BEGIN\ CERTIFICATE-\/-\/-\/-\/-\/\(\backslash\)n(.*?)\(\backslash\)n-\/-\/-\/-\/-\/END\ CERTIFICATE-\/-\/-\/-\/-\/"{}},\ re.DOTALL}
\DoxyCodeLine{00003\ )}

\end{DoxyCode}


Definition at line \mbox{\hyperlink{low__level_8py_source_l00022}{22}} of file \mbox{\hyperlink{low__level_8py_source}{low\+\_\+level.\+py}}.

\Hypertarget{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a4e59ea4b05cc0ed8bb3e1302abe7e1d8}\index{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level@{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level}!TLS\_PROTOCOL\_VERSIONS@{TLS\_PROTOCOL\_VERSIONS}}
\index{TLS\_PROTOCOL\_VERSIONS@{TLS\_PROTOCOL\_VERSIONS}!pip.\_vendor.urllib3.contrib.\_securetransport.low\_level@{pip.\_vendor.urllib3.contrib.\_securetransport.low\_level}}
\doxysubsubsection{\texorpdfstring{TLS\_PROTOCOL\_VERSIONS}{TLS\_PROTOCOL\_VERSIONS}}
{\footnotesize\ttfamily \label{namespacepip_1_1__vendor_1_1urllib3_1_1contrib_1_1__securetransport_1_1low__level_a4e59ea4b05cc0ed8bb3e1302abe7e1d8} 
dict TLS\+\_\+\+PROTOCOL\+\_\+\+VERSIONS}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ =\ \ \{}
\DoxyCodeLine{00002\ \ \ \ \ \textcolor{stringliteral}{"{}SSLv2"{}}:\ (0,\ 2),}
\DoxyCodeLine{00003\ \ \ \ \ \textcolor{stringliteral}{"{}SSLv3"{}}:\ (3,\ 0),}
\DoxyCodeLine{00004\ \ \ \ \ \textcolor{stringliteral}{"{}TLSv1"{}}:\ (3,\ 1),}
\DoxyCodeLine{00005\ \ \ \ \ \textcolor{stringliteral}{"{}TLSv1.1"{}}:\ (3,\ 2),}
\DoxyCodeLine{00006\ \ \ \ \ \textcolor{stringliteral}{"{}TLSv1.2"{}}:\ (3,\ 3),}
\DoxyCodeLine{00007\ \}}

\end{DoxyCode}


Definition at line \mbox{\hyperlink{low__level_8py_source_l00377}{377}} of file \mbox{\hyperlink{low__level_8py_source}{low\+\_\+level.\+py}}.

