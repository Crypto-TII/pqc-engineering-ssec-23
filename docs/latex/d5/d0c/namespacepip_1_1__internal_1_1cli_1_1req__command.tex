\doxysection{pip.\+\_\+internal.\+cli.\+req\+\_\+command Namespace Reference}
\hypertarget{namespacepip_1_1__internal_1_1cli_1_1req__command}{}\label{namespacepip_1_1__internal_1_1cli_1_1req__command}\index{pip.\_internal.cli.req\_command@{pip.\_internal.cli.req\_command}}
\doxysubsubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classpip_1_1__internal_1_1cli_1_1req__command_1_1_index_group_command}{Index\+Group\+Command}}
\item 
class \mbox{\hyperlink{classpip_1_1__internal_1_1cli_1_1req__command_1_1_requirement_command}{Requirement\+Command}}
\item 
class \mbox{\hyperlink{classpip_1_1__internal_1_1cli_1_1req__command_1_1_session_command_mixin}{Session\+Command\+Mixin}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
Optional\mbox{[}"{}SSLContext"{}\mbox{]} \mbox{\hyperlink{namespacepip_1_1__internal_1_1cli_1_1req__command_a67cc7bb45a79472767e3c37ae9985e7c}{\+\_\+create\+\_\+truststore\+\_\+ssl\+\_\+context}} ()
\item 
None \mbox{\hyperlink{namespacepip_1_1__internal_1_1cli_1_1req__command_a9f98ccce29307df43fe4a911a821ab31}{warn\+\_\+if\+\_\+run\+\_\+as\+\_\+root}} ()
\item 
Any \mbox{\hyperlink{namespacepip_1_1__internal_1_1cli_1_1req__command_a0aa389bcd9b8f07bfb932ddc1397516c}{with\+\_\+cleanup}} (Any func)
\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacepip_1_1__internal_1_1cli_1_1req__command_a0b14e488ae28d98d262453f3e9cd6e4d}{logger}} = logging.\+get\+Logger(\+\_\+\+\_\+name\+\_\+\+\_\+)
\item 
list \mbox{\hyperlink{namespacepip_1_1__internal_1_1cli_1_1req__command_a3a4c76f6e840907490d1d0772582ca47}{KEEPABLE\+\_\+\+TEMPDIR\+\_\+\+TYPES}}
\item 
\mbox{\hyperlink{namespacepip_1_1__internal_1_1cli_1_1req__command_a7e3f528516d870de2e4abcc2b57329e6}{tempdir\+\_\+registry}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\begin{DoxyVerb}Contains the Command base classes that depend on PipSession.

The classes in this module are in a separate module so the commands not
needing download / PackageFinder capability don't unnecessarily import the
PackageFinder machinery and all its vendored dependencies, etc.
\end{DoxyVerb}
 

\label{doc-func-members}
\Hypertarget{namespacepip_1_1__internal_1_1cli_1_1req__command_doc-func-members}
\doxysubsection{Function Documentation}
\Hypertarget{namespacepip_1_1__internal_1_1cli_1_1req__command_a67cc7bb45a79472767e3c37ae9985e7c}\index{pip.\_internal.cli.req\_command@{pip.\_internal.cli.req\_command}!\_create\_truststore\_ssl\_context@{\_create\_truststore\_ssl\_context}}
\index{\_create\_truststore\_ssl\_context@{\_create\_truststore\_ssl\_context}!pip.\_internal.cli.req\_command@{pip.\_internal.cli.req\_command}}
\doxysubsubsection{\texorpdfstring{\_create\_truststore\_ssl\_context()}{\_create\_truststore\_ssl\_context()}}
{\footnotesize\ttfamily \label{namespacepip_1_1__internal_1_1cli_1_1req__command_a67cc7bb45a79472767e3c37ae9985e7c} 
 Optional\mbox{[}"{}SSLContext"{}\mbox{]} \+\_\+create\+\_\+truststore\+\_\+ssl\+\_\+context (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line \mbox{\hyperlink{req__command_8py_source_l00050}{50}} of file \mbox{\hyperlink{req__command_8py_source}{req\+\_\+command.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00050\ \textcolor{keyword}{def\ }\_create\_truststore\_ssl\_context()\ -\/>\ Optional["{}SSLContext"{}]:}
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keywordflow}{if}\ sys.version\_info\ <\ (3,\ 10):}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ CommandError(\textcolor{stringliteral}{"{}The\ truststore\ feature\ is\ only\ available\ for\ Python\ 3.10+"{}})}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \textcolor{keyword}{import}\ ssl}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keywordflow}{except}\ ImportError:}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ logger.warning(\textcolor{stringliteral}{"{}Disabling\ truststore\ since\ ssl\ support\ is\ missing"{}})}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \textcolor{keyword}{import}\ truststore}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keywordflow}{except}\ ImportError:}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ CommandError(}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}To\ use\ the\ truststore\ feature,\ 'truststore'\ must\ be\ installed\ into\ "{}}}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}pip's\ current\ environment."{}}}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{keywordflow}{return}\ truststore.SSLContext(ssl.PROTOCOL\_TLS\_CLIENT)}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ }

\end{DoxyCode}


Referenced by \mbox{\hyperlink{req__command_8py_source_l00111}{Session\+Command\+Mixin.\+\_\+build\+\_\+session()}}.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d0c/namespacepip_1_1__internal_1_1cli_1_1req__command_a67cc7bb45a79472767e3c37ae9985e7c_icgraph}
\end{center}
\end{figure}
\Hypertarget{namespacepip_1_1__internal_1_1cli_1_1req__command_a9f98ccce29307df43fe4a911a821ab31}\index{pip.\_internal.cli.req\_command@{pip.\_internal.cli.req\_command}!warn\_if\_run\_as\_root@{warn\_if\_run\_as\_root}}
\index{warn\_if\_run\_as\_root@{warn\_if\_run\_as\_root}!pip.\_internal.cli.req\_command@{pip.\_internal.cli.req\_command}}
\doxysubsubsection{\texorpdfstring{warn\_if\_run\_as\_root()}{warn\_if\_run\_as\_root()}}
{\footnotesize\ttfamily \label{namespacepip_1_1__internal_1_1cli_1_1req__command_a9f98ccce29307df43fe4a911a821ab31} 
 None warn\+\_\+if\+\_\+run\+\_\+as\+\_\+root (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

\begin{DoxyVerb}Output a warning for sudo users on Unix.

In a virtual environment, sudo pip still writes to virtualenv.
On Windows, users may run pip as Administrator without issues.
This warning only applies to Unix root users outside of virtualenv.
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{req__command_8py_source_l00201}{201}} of file \mbox{\hyperlink{req__command_8py_source}{req\+\_\+command.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00201\ \textcolor{keyword}{def\ }warn\_if\_run\_as\_root()\ -\/>\ None:}
\DoxyCodeLine{00202\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Output\ a\ warning\ for\ sudo\ users\ on\ Unix.}}
\DoxyCodeLine{00203\ \textcolor{stringliteral}{}}
\DoxyCodeLine{00204\ \textcolor{stringliteral}{\ \ \ \ In\ a\ virtual\ environment,\ sudo\ pip\ still\ writes\ to\ virtualenv.}}
\DoxyCodeLine{00205\ \textcolor{stringliteral}{\ \ \ \ On\ Windows,\ users\ may\ run\ pip\ as\ Administrator\ without\ issues.}}
\DoxyCodeLine{00206\ \textcolor{stringliteral}{\ \ \ \ This\ warning\ only\ applies\ to\ Unix\ root\ users\ outside\ of\ virtualenv.}}
\DoxyCodeLine{00207\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{00208\ \ \ \ \ \textcolor{keywordflow}{if}\ running\_under\_virtualenv():}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}}
\DoxyCodeLine{00210\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ hasattr(os,\ \textcolor{stringliteral}{"{}getuid"{}}):}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}}
\DoxyCodeLine{00212\ \ \ \ \ \textcolor{comment}{\#\ On\ Windows,\ there\ are\ no\ "{}system\ managed"{}\ Python\ packages.\ Installing\ as}}
\DoxyCodeLine{00213\ \ \ \ \ \textcolor{comment}{\#\ Administrator\ via\ pip\ is\ the\ correct\ way\ of\ updating\ system\ environments.}}
\DoxyCodeLine{00214\ \ \ \ \ \textcolor{comment}{\#}}
\DoxyCodeLine{00215\ \ \ \ \ \textcolor{comment}{\#\ We\ choose\ sys.platform\ over\ utils.compat.WINDOWS\ here\ to\ enable\ Mypy\ platform}}
\DoxyCodeLine{00216\ \ \ \ \ \textcolor{comment}{\#\ checks:\ https://mypy.readthedocs.io/en/stable/common\_issues.html}}
\DoxyCodeLine{00217\ \ \ \ \ \textcolor{keywordflow}{if}\ sys.platform\ ==\ \textcolor{stringliteral}{"{}win32"{}}\ \textcolor{keywordflow}{or}\ sys.platform\ ==\ \textcolor{stringliteral}{"{}cygwin"{}}:}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}}
\DoxyCodeLine{00219\ }
\DoxyCodeLine{00220\ \ \ \ \ \textcolor{keywordflow}{if}\ os.getuid()\ !=\ 0:}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}}
\DoxyCodeLine{00222\ }
\DoxyCodeLine{00223\ \ \ \ \ logger.warning(}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Running\ pip\ as\ the\ 'root'\ user\ can\ result\ in\ broken\ permissions\ and\ "{}}}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}conflicting\ behaviour\ with\ the\ system\ package\ manager.\ "{}}}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}It\ is\ recommended\ to\ use\ a\ virtual\ environment\ instead:\ "{}}}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}https://pip.pypa.io/warnings/venv"{}}}
\DoxyCodeLine{00228\ \ \ \ \ )}
\DoxyCodeLine{00229\ }
\DoxyCodeLine{00230\ }

\end{DoxyCode}
\Hypertarget{namespacepip_1_1__internal_1_1cli_1_1req__command_a0aa389bcd9b8f07bfb932ddc1397516c}\index{pip.\_internal.cli.req\_command@{pip.\_internal.cli.req\_command}!with\_cleanup@{with\_cleanup}}
\index{with\_cleanup@{with\_cleanup}!pip.\_internal.cli.req\_command@{pip.\_internal.cli.req\_command}}
\doxysubsubsection{\texorpdfstring{with\_cleanup()}{with\_cleanup()}}
{\footnotesize\ttfamily \label{namespacepip_1_1__internal_1_1cli_1_1req__command_a0aa389bcd9b8f07bfb932ddc1397516c} 
 Any with\+\_\+cleanup (\begin{DoxyParamCaption}\item[{Any}]{func}{}\end{DoxyParamCaption})}

\begin{DoxyVerb}Decorator for common logic related to managing temporary
directories.
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{req__command_8py_source_l00231}{231}} of file \mbox{\hyperlink{req__command_8py_source}{req\+\_\+command.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00231\ \textcolor{keyword}{def\ }with\_cleanup(func:\ Any)\ -\/>\ Any:}
\DoxyCodeLine{00232\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Decorator\ for\ common\ logic\ related\ to\ managing\ temporary}}
\DoxyCodeLine{00233\ \textcolor{stringliteral}{\ \ \ \ directories.}}
\DoxyCodeLine{00234\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{00235\ }
\DoxyCodeLine{00236\ \ \ \ \ \textcolor{keyword}{def\ }configure\_tempdir\_registry(registry:\ TempDirectoryTypeRegistry)\ -\/>\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ t\ \textcolor{keywordflow}{in}\ KEEPABLE\_TEMPDIR\_TYPES:}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \ \ \ \ registry.set\_delete(t,\ \textcolor{keyword}{False})}
\DoxyCodeLine{00239\ }
\DoxyCodeLine{00240\ \ \ \ \ \textcolor{keyword}{def\ }wrapper(}
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ self:\ RequirementCommand,\ options:\ Values,\ args:\ List[Any]}
\DoxyCodeLine{00242\ \ \ \ \ )\ -\/>\ Optional[int]:}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ self.tempdir\_registry\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ options.no\_clean:}
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \ \ \ \ configure\_tempdir\_registry(self.tempdir\_registry)}
\DoxyCodeLine{00246\ }
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ func(self,\ options,\ args)}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ PreviousBuildDirError:}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ This\ kind\ of\ conflict\ can\ occur\ when\ the\ user\ passes\ an\ explicit}}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ build\ directory\ with\ a\ pre-\/existing\ folder.\ In\ that\ case\ we\ do}}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ not\ want\ to\ accidentally\ remove\ it.}}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \ \ \ \ configure\_tempdir\_registry(self.tempdir\_registry)}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}}
\DoxyCodeLine{00255\ }
\DoxyCodeLine{00256\ \ \ \ \ \textcolor{keywordflow}{return}\ wrapper}
\DoxyCodeLine{00257\ }
\DoxyCodeLine{00258\ }

\end{DoxyCode}


\label{doc-var-members}
\Hypertarget{namespacepip_1_1__internal_1_1cli_1_1req__command_doc-var-members}
\doxysubsection{Variable Documentation}
\Hypertarget{namespacepip_1_1__internal_1_1cli_1_1req__command_a3a4c76f6e840907490d1d0772582ca47}\index{pip.\_internal.cli.req\_command@{pip.\_internal.cli.req\_command}!KEEPABLE\_TEMPDIR\_TYPES@{KEEPABLE\_TEMPDIR\_TYPES}}
\index{KEEPABLE\_TEMPDIR\_TYPES@{KEEPABLE\_TEMPDIR\_TYPES}!pip.\_internal.cli.req\_command@{pip.\_internal.cli.req\_command}}
\doxysubsubsection{\texorpdfstring{KEEPABLE\_TEMPDIR\_TYPES}{KEEPABLE\_TEMPDIR\_TYPES}}
{\footnotesize\ttfamily \label{namespacepip_1_1__internal_1_1cli_1_1req__command_a3a4c76f6e840907490d1d0772582ca47} 
list KEEPABLE\+\_\+\+TEMPDIR\+\_\+\+TYPES}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ =\ \ [}
\DoxyCodeLine{00002\ \ \ \ \ tempdir\_kinds.BUILD\_ENV,}
\DoxyCodeLine{00003\ \ \ \ \ tempdir\_kinds.EPHEM\_WHEEL\_CACHE,}
\DoxyCodeLine{00004\ \ \ \ \ tempdir\_kinds.REQ\_BUILD,}
\DoxyCodeLine{00005\ ]}

\end{DoxyCode}


Definition at line \mbox{\hyperlink{req__command_8py_source_l00194}{194}} of file \mbox{\hyperlink{req__command_8py_source}{req\+\_\+command.\+py}}.

\Hypertarget{namespacepip_1_1__internal_1_1cli_1_1req__command_a0b14e488ae28d98d262453f3e9cd6e4d}\index{pip.\_internal.cli.req\_command@{pip.\_internal.cli.req\_command}!logger@{logger}}
\index{logger@{logger}!pip.\_internal.cli.req\_command@{pip.\_internal.cli.req\_command}}
\doxysubsubsection{\texorpdfstring{logger}{logger}}
{\footnotesize\ttfamily \label{namespacepip_1_1__internal_1_1cli_1_1req__command_a0b14e488ae28d98d262453f3e9cd6e4d} 
logger = logging.\+get\+Logger(\+\_\+\+\_\+name\+\_\+\+\_\+)}



Definition at line \mbox{\hyperlink{req__command_8py_source_l00047}{47}} of file \mbox{\hyperlink{req__command_8py_source}{req\+\_\+command.\+py}}.

\Hypertarget{namespacepip_1_1__internal_1_1cli_1_1req__command_a7e3f528516d870de2e4abcc2b57329e6}\index{pip.\_internal.cli.req\_command@{pip.\_internal.cli.req\_command}!tempdir\_registry@{tempdir\_registry}}
\index{tempdir\_registry@{tempdir\_registry}!pip.\_internal.cli.req\_command@{pip.\_internal.cli.req\_command}}
\doxysubsubsection{\texorpdfstring{tempdir\_registry}{tempdir\_registry}}
{\footnotesize\ttfamily \label{namespacepip_1_1__internal_1_1cli_1_1req__command_a7e3f528516d870de2e4abcc2b57329e6} 
tempdir\+\_\+registry}



Definition at line \mbox{\hyperlink{req__command_8py_source_l00245}{245}} of file \mbox{\hyperlink{req__command_8py_source}{req\+\_\+command.\+py}}.

