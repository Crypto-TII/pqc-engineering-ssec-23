\doxysection{pip.\+\_\+vendor.\+urllib3.\+util.\+connection Namespace Reference}
\hypertarget{namespacepip_1_1__vendor_1_1urllib3_1_1util_1_1connection}{}\label{namespacepip_1_1__vendor_1_1urllib3_1_1util_1_1connection}\index{pip.\_vendor.urllib3.util.connection@{pip.\_vendor.urllib3.util.connection}}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacepip_1_1__vendor_1_1urllib3_1_1util_1_1connection_a315ff9173ed785d7121cb176f6851957}{is\+\_\+connection\+\_\+dropped}} (conn)
\item 
\mbox{\hyperlink{namespacepip_1_1__vendor_1_1urllib3_1_1util_1_1connection_aedeeec0472deadc87d8e1d37ba388a25}{create\+\_\+connection}} (\mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{address}}, timeout=socket.\+\_\+\+GLOBAL\+\_\+\+DEFAULT\+\_\+\+TIMEOUT, source\+\_\+address=\mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{None}}, socket\+\_\+options=\mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{None}})
\item 
\mbox{\hyperlink{namespacepip_1_1__vendor_1_1urllib3_1_1util_1_1connection_ac4ba02998bbe80c445feb1eb43248ac1}{\+\_\+set\+\_\+socket\+\_\+options}} (sock, options)
\item 
\mbox{\hyperlink{namespacepip_1_1__vendor_1_1urllib3_1_1util_1_1connection_a24c669bdc92446f3d558d7e46aa2c157}{allowed\+\_\+gai\+\_\+family}} ()
\item 
\mbox{\hyperlink{namespacepip_1_1__vendor_1_1urllib3_1_1util_1_1connection_a595b0ed93e62ea9e136253639a73d841}{\+\_\+has\+\_\+ipv6}} (host)
\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacepip_1_1__vendor_1_1urllib3_1_1util_1_1connection_af6d7aec4e9cd41bfcbd8d04ce27ba9ae}{HAS\+\_\+\+IPV6}} = \mbox{\hyperlink{namespacepip_1_1__vendor_1_1urllib3_1_1util_1_1connection_a595b0ed93e62ea9e136253639a73d841}{\+\_\+has\+\_\+ipv6}}("{}\+::1"{})
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\Hypertarget{namespacepip_1_1__vendor_1_1urllib3_1_1util_1_1connection_a595b0ed93e62ea9e136253639a73d841}\label{namespacepip_1_1__vendor_1_1urllib3_1_1util_1_1connection_a595b0ed93e62ea9e136253639a73d841} 
\index{pip.\_vendor.urllib3.util.connection@{pip.\_vendor.urllib3.util.connection}!\_has\_ipv6@{\_has\_ipv6}}
\index{\_has\_ipv6@{\_has\_ipv6}!pip.\_vendor.urllib3.util.connection@{pip.\_vendor.urllib3.util.connection}}
\doxysubsubsection{\texorpdfstring{\_has\_ipv6()}{\_has\_ipv6()}}
{\footnotesize\ttfamily \+\_\+has\+\_\+ipv6 (\begin{DoxyParamCaption}\item[{}]{host }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

\begin{DoxyVerb}Returns True if the system can bind an IPv6 address.\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{util_2connection_8py_source_l00119}{119}} of file \mbox{\hyperlink{util_2connection_8py_source}{connection.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00119\ \textcolor{keyword}{def\ }\_has\_ipv6(host):}
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Returns\ True\ if\ the\ system\ can\ bind\ an\ IPv6\ address."{}"{}"{}}}
\DoxyCodeLine{00121\ \ \ \ \ sock\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{00122\ \ \ \ \ has\_ipv6\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00124\ \ \ \ \ \textcolor{comment}{\#\ App\ Engine\ doesn't\ support\ IPV6\ sockets\ and\ actually\ has\ a\ quota\ on\ the}}
\DoxyCodeLine{00125\ \ \ \ \ \textcolor{comment}{\#\ number\ of\ sockets\ that\ can\ be\ used,\ so\ just\ early\ out\ here\ instead\ of}}
\DoxyCodeLine{00126\ \ \ \ \ \textcolor{comment}{\#\ creating\ a\ socket\ needlessly.}}
\DoxyCodeLine{00127\ \ \ \ \ \textcolor{comment}{\#\ See\ https://github.com/urllib3/urllib3/issues/1446}}
\DoxyCodeLine{00128\ \ \ \ \ \textcolor{keywordflow}{if}\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{\_appengine\_environ.is\_appengine\_sandbox}}():}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{False}}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00131\ \ \ \ \ \textcolor{keywordflow}{if}\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{socket.has\_ipv6}}:}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ has\_ipv6\ returns\ true\ if\ cPython\ was\ compiled\ with\ IPv6\ support.}}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ It\ does\ not\ tell\ us\ if\ the\ system\ has\ IPv6\ support\ enabled.\ To}}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ determine\ that\ we\ must\ bind\ to\ an\ IPv6\ address.}}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ https://github.com/urllib3/urllib3/pull/611}}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ https://bugs.python.org/issue658327}}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \ \ \ \ sock\ =\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{socket.socket}}(\mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{socket.AF\_INET6}})}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{sock.bind}}((host,\ 0))}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \ \ \ \ has\_ipv6\ =\ \textcolor{keyword}{True}}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ Exception:}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \ \ \ \ \textcolor{keywordflow}{if}\ sock:}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{sock.close}}()}
\DoxyCodeLine{00146\ \ \ \ \ \textcolor{keywordflow}{return}\ has\_ipv6}
\DoxyCodeLine{00147\ }
\DoxyCodeLine{00148\ }

\end{DoxyCode}


References \mbox{\hyperlink{prime__search_8m_source_l00010}{i}}.

\Hypertarget{namespacepip_1_1__vendor_1_1urllib3_1_1util_1_1connection_ac4ba02998bbe80c445feb1eb43248ac1}\label{namespacepip_1_1__vendor_1_1urllib3_1_1util_1_1connection_ac4ba02998bbe80c445feb1eb43248ac1} 
\index{pip.\_vendor.urllib3.util.connection@{pip.\_vendor.urllib3.util.connection}!\_set\_socket\_options@{\_set\_socket\_options}}
\index{\_set\_socket\_options@{\_set\_socket\_options}!pip.\_vendor.urllib3.util.connection@{pip.\_vendor.urllib3.util.connection}}
\doxysubsubsection{\texorpdfstring{\_set\_socket\_options()}{\_set\_socket\_options()}}
{\footnotesize\ttfamily \+\_\+set\+\_\+socket\+\_\+options (\begin{DoxyParamCaption}\item[{}]{sock,  }\item[{}]{options }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line \mbox{\hyperlink{util_2connection_8py_source_l00100}{100}} of file \mbox{\hyperlink{util_2connection_8py_source}{connection.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00100\ \textcolor{keyword}{def\ }\_set\_socket\_options(sock,\ options):}
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{keywordflow}{if}\ options\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ \ \ \ \ \textcolor{keywordflow}{for}\ opt\ \textcolor{keywordflow}{in}\ options:}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{sock.setsockopt}}(*opt)}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ }

\end{DoxyCode}


References \mbox{\hyperlink{prime__search_8m_source_l00010}{i}}.



Referenced by \mbox{\hyperlink{util_2connection_8py_source_l00042}{pip.\+\_\+vendor.\+urllib3.\+util.\+connection.\+create\+\_\+connection()}}.

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=318pt]{d5/d08/namespacepip_1_1__vendor_1_1urllib3_1_1util_1_1connection_ac4ba02998bbe80c445feb1eb43248ac1_icgraph}
\end{center}
\end{figure}
\Hypertarget{namespacepip_1_1__vendor_1_1urllib3_1_1util_1_1connection_a24c669bdc92446f3d558d7e46aa2c157}\label{namespacepip_1_1__vendor_1_1urllib3_1_1util_1_1connection_a24c669bdc92446f3d558d7e46aa2c157} 
\index{pip.\_vendor.urllib3.util.connection@{pip.\_vendor.urllib3.util.connection}!allowed\_gai\_family@{allowed\_gai\_family}}
\index{allowed\_gai\_family@{allowed\_gai\_family}!pip.\_vendor.urllib3.util.connection@{pip.\_vendor.urllib3.util.connection}}
\doxysubsubsection{\texorpdfstring{allowed\_gai\_family()}{allowed\_gai\_family()}}
{\footnotesize\ttfamily allowed\+\_\+gai\+\_\+family (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\begin{DoxyVerb}This function is designed to work in the context of
getaddrinfo, where family=socket.AF_UNSPEC is the default and
will perform a DNS search for both IPv6 and IPv4 records.\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{util_2connection_8py_source_l00108}{108}} of file \mbox{\hyperlink{util_2connection_8py_source}{connection.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00108\ \textcolor{keyword}{def\ }allowed\_gai\_family():}
\DoxyCodeLine{00109\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}This\ function\ is\ designed\ to\ work\ in\ the\ context\ of}}
\DoxyCodeLine{00110\ \textcolor{stringliteral}{\ \ \ \ getaddrinfo,\ where\ family=socket.AF\_UNSPEC\ is\ the\ default\ and}}
\DoxyCodeLine{00111\ \textcolor{stringliteral}{\ \ \ \ will\ perform\ a\ DNS\ search\ for\ both\ IPv6\ and\ IPv4\ records."{}"{}"{}}}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00113\ \ \ \ \ family\ =\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{socket.AF\_INET}}}
\DoxyCodeLine{00114\ \ \ \ \ \textcolor{keywordflow}{if}\ HAS\_IPV6:}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ family\ =\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{socket.AF\_UNSPEC}}}
\DoxyCodeLine{00116\ \ \ \ \ \textcolor{keywordflow}{return}\ family}
\DoxyCodeLine{00117\ }
\DoxyCodeLine{00118\ }

\end{DoxyCode}


References \mbox{\hyperlink{prime__search_8m_source_l00010}{i}}.



Referenced by \mbox{\hyperlink{util_2connection_8py_source_l00042}{pip.\+\_\+vendor.\+urllib3.\+util.\+connection.\+create\+\_\+connection()}}.

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=310pt]{d5/d08/namespacepip_1_1__vendor_1_1urllib3_1_1util_1_1connection_a24c669bdc92446f3d558d7e46aa2c157_icgraph}
\end{center}
\end{figure}
\Hypertarget{namespacepip_1_1__vendor_1_1urllib3_1_1util_1_1connection_aedeeec0472deadc87d8e1d37ba388a25}\label{namespacepip_1_1__vendor_1_1urllib3_1_1util_1_1connection_aedeeec0472deadc87d8e1d37ba388a25} 
\index{pip.\_vendor.urllib3.util.connection@{pip.\_vendor.urllib3.util.connection}!create\_connection@{create\_connection}}
\index{create\_connection@{create\_connection}!pip.\_vendor.urllib3.util.connection@{pip.\_vendor.urllib3.util.connection}}
\doxysubsubsection{\texorpdfstring{create\_connection()}{create\_connection()}}
{\footnotesize\ttfamily create\+\_\+connection (\begin{DoxyParamCaption}\item[{}]{address,  }\item[{}]{timeout = {\ttfamily socket.\+\_\+GLOBAL\+\_\+DEFAULT\+\_\+TIMEOUT},  }\item[{}]{source\+\_\+address = {\ttfamily \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{None}}},  }\item[{}]{socket\+\_\+options = {\ttfamily \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{None}}} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Connect to *address* and return the socket object.

Convenience function.  Connect to *address* (a 2-tuple ``(host,
port)``) and return the socket object.  Passing the optional
*timeout* parameter will set the timeout on the socket instance
before attempting to connect.  If no *timeout* is supplied, the
global default timeout setting returned by :func:`socket.getdefaulttimeout`
is used.  If *source_address* is set it must be a tuple of (host, port)
for the socket to bind as a source address before making the connection.
An host of '' or port 0 tells the OS to use the default.
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{util_2connection_8py_source_l00037}{37}} of file \mbox{\hyperlink{util_2connection_8py_source}{connection.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00042\ ):}
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Connect\ to\ *address*\ and\ return\ the\ socket\ object.}}
\DoxyCodeLine{00044\ \textcolor{stringliteral}{}}
\DoxyCodeLine{00045\ \textcolor{stringliteral}{\ \ \ \ Convenience\ function.\ \ Connect\ to\ *address*\ (a\ 2-\/tuple\ \`{}\`{}(host,}}
\DoxyCodeLine{00046\ \textcolor{stringliteral}{\ \ \ \ port)\`{}\`{})\ and\ return\ the\ socket\ object.\ \ Passing\ the\ optional}}
\DoxyCodeLine{00047\ \textcolor{stringliteral}{\ \ \ \ *timeout*\ parameter\ will\ set\ the\ timeout\ on\ the\ socket\ instance}}
\DoxyCodeLine{00048\ \textcolor{stringliteral}{\ \ \ \ before\ attempting\ to\ connect.\ \ If\ no\ *timeout*\ is\ supplied,\ the}}
\DoxyCodeLine{00049\ \textcolor{stringliteral}{\ \ \ \ global\ default\ timeout\ setting\ returned\ by\ :func:\`{}socket.getdefaulttimeout\`{}}}
\DoxyCodeLine{00050\ \textcolor{stringliteral}{\ \ \ \ is\ used.\ \ If\ *source\_address*\ is\ set\ it\ must\ be\ a\ tuple\ of\ (host,\ port)}}
\DoxyCodeLine{00051\ \textcolor{stringliteral}{\ \ \ \ for\ the\ socket\ to\ bind\ as\ a\ source\ address\ before\ making\ the\ connection.}}
\DoxyCodeLine{00052\ \textcolor{stringliteral}{\ \ \ \ An\ host\ of\ ''\ or\ port\ 0\ tells\ the\ OS\ to\ use\ the\ default.}}
\DoxyCodeLine{00053\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \ \ \ \ host,\ port\ =\ address}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keywordflow}{if}\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{host.startswith}}(\textcolor{stringliteral}{"{}["{}}):}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ host\ =\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{host.strip}}(\textcolor{stringliteral}{"{}[]"{}})}
\DoxyCodeLine{00058\ \ \ \ \ err\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{comment}{\#\ Using\ the\ value\ from\ allowed\_gai\_family()\ in\ the\ context\ of\ getaddrinfo\ lets}}
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{comment}{\#\ us\ select\ whether\ to\ work\ with\ IPv4\ DNS\ records,\ IPv6\ records,\ or\ both.}}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{comment}{\#\ The\ original\ create\_connection\ function\ always\ returns\ all\ records.}}
\DoxyCodeLine{00063\ \ \ \ \ family\ =\ allowed\_gai\_family()}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{host.encode}}(\textcolor{stringliteral}{"{}idna"{}})}
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{keywordflow}{except}\ UnicodeError:}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{six.raise\_from}}(}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \ \ \ \ LocationParseError(\textcolor{stringliteral}{u"{}'\%s',\ label\ empty\ or\ too\ long"{}}\ \%\ host),\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keywordflow}{for}\ res\ \textcolor{keywordflow}{in}\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{socket.getaddrinfo}}(host,\ port,\ family,\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{socket.SOCK\_STREAM}}):}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ af,\ socktype,\ proto,\ canonname,\ sa\ =\ res}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ sock\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \ \ \ \ sock\ =\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{socket.socket}}(af,\ socktype,\ proto)}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ If\ provided,\ set\ socket\ level\ options\ before\ connecting.}}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \ \ \_set\_socket\_options(sock,\ socket\_options)}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ timeout\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{socket.\_GLOBAL\_DEFAULT\_TIMEOUT}}:}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{sock.settimeout}}(timeout)}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ source\_address:}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{sock.bind}}(source\_address)}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{sock.connect}}(sa)}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ sock}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{socket.error}}\ \textcolor{keyword}{as}\ e:}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \ \ \ \ err\ =\ e}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ sock\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{sock.close}}()}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sock\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{keywordflow}{if}\ err\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ err}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{socket.error}}(\textcolor{stringliteral}{"{}getaddrinfo\ returns\ an\ empty\ list"{}})}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ }

\end{DoxyCode}


References \mbox{\hyperlink{util_2connection_8py_source_l00100}{pip.\+\_\+vendor.\+urllib3.\+util.\+connection.\+\_\+set\+\_\+socket\+\_\+options()}}, \mbox{\hyperlink{util_2connection_8py_source_l00108}{pip.\+\_\+vendor.\+urllib3.\+util.\+connection.\+allowed\+\_\+gai\+\_\+family()}}, and \mbox{\hyperlink{prime__search_8m_source_l00010}{i}}.

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=318pt]{d5/d08/namespacepip_1_1__vendor_1_1urllib3_1_1util_1_1connection_aedeeec0472deadc87d8e1d37ba388a25_cgraph}
\end{center}
\end{figure}
\Hypertarget{namespacepip_1_1__vendor_1_1urllib3_1_1util_1_1connection_a315ff9173ed785d7121cb176f6851957}\label{namespacepip_1_1__vendor_1_1urllib3_1_1util_1_1connection_a315ff9173ed785d7121cb176f6851957} 
\index{pip.\_vendor.urllib3.util.connection@{pip.\_vendor.urllib3.util.connection}!is\_connection\_dropped@{is\_connection\_dropped}}
\index{is\_connection\_dropped@{is\_connection\_dropped}!pip.\_vendor.urllib3.util.connection@{pip.\_vendor.urllib3.util.connection}}
\doxysubsubsection{\texorpdfstring{is\_connection\_dropped()}{is\_connection\_dropped()}}
{\footnotesize\ttfamily is\+\_\+connection\+\_\+dropped (\begin{DoxyParamCaption}\item[{}]{conn }\end{DoxyParamCaption})}

\begin{DoxyVerb}Returns True if the connection is dropped and should be closed.

:param conn:
    :class:`http.client.HTTPConnection` object.

Note: For platforms like AppEngine, this will always return ``False`` to
let the platform handle connection recycling transparently for us.
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{util_2connection_8py_source_l00011}{11}} of file \mbox{\hyperlink{util_2connection_8py_source}{connection.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00011\ \textcolor{keyword}{def\ }is\_connection\_dropped(conn):\ \ \textcolor{comment}{\#\ Platform-\/specific}}
\DoxyCodeLine{00012\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{00013\ \textcolor{stringliteral}{\ \ \ \ Returns\ True\ if\ the\ connection\ is\ dropped\ and\ should\ be\ closed.}}
\DoxyCodeLine{00014\ \textcolor{stringliteral}{}}
\DoxyCodeLine{00015\ \textcolor{stringliteral}{\ \ \ \ :param\ conn:}}
\DoxyCodeLine{00016\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ :class:\`{}http.client.HTTPConnection\`{}\ object.}}
\DoxyCodeLine{00017\ \textcolor{stringliteral}{}}
\DoxyCodeLine{00018\ \textcolor{stringliteral}{\ \ \ \ Note:\ For\ platforms\ like\ AppEngine,\ this\ will\ always\ return\ \`{}\`{}False\`{}\`{}\ to}}
\DoxyCodeLine{00019\ \textcolor{stringliteral}{\ \ \ \ let\ the\ platform\ handle\ connection\ recycling\ transparently\ for\ us.}}
\DoxyCodeLine{00020\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{00021\ \ \ \ \ sock\ =\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{getattr}}(conn,\ \textcolor{stringliteral}{"{}sock"{}},\ \textcolor{keyword}{False})}
\DoxyCodeLine{00022\ \ \ \ \ \textcolor{keywordflow}{if}\ sock\ \textcolor{keywordflow}{is}\ \textcolor{keyword}{False}:\ \ \textcolor{comment}{\#\ Platform-\/specific:\ AppEngine}}
\DoxyCodeLine{00023\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{False}}
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{keywordflow}{if}\ sock\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:\ \ \textcolor{comment}{\#\ Connection\ already\ closed\ (such\ as\ by\ httplib).}}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{True}}
\DoxyCodeLine{00026\ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Returns\ True\ if\ readable,\ which\ here\ means\ it's\ been\ dropped}}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ wait\_for\_read(sock,\ timeout=0.0)}
\DoxyCodeLine{00029\ \ \ \ \ \textcolor{keywordflow}{except}\ NoWayToWaitForSocketError:\ \ \textcolor{comment}{\#\ Platform-\/specific:\ AppEngine}}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{False}}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \textcolor{comment}{\#\ This\ function\ is\ copied\ from\ socket.py\ in\ the\ Python\ 2.7\ standard}}
\DoxyCodeLine{00034\ \textcolor{comment}{\#\ library\ test\ suite.\ Added\ to\ its\ signature\ is\ only\ \`{}socket\_options`.}}
\DoxyCodeLine{00035\ \textcolor{comment}{\#\ One\ additional\ modification\ is\ that\ we\ avoid\ binding\ to\ IPv6\ servers}}
\DoxyCodeLine{00036\ \textcolor{comment}{\#\ discovered\ in\ DNS\ if\ the\ system\ doesn't\ have\ IPv6\ functionality.}}

\end{DoxyCode}


References \mbox{\hyperlink{prime__search_8m_source_l00010}{i}}.



\doxysubsection{Variable Documentation}
\Hypertarget{namespacepip_1_1__vendor_1_1urllib3_1_1util_1_1connection_af6d7aec4e9cd41bfcbd8d04ce27ba9ae}\label{namespacepip_1_1__vendor_1_1urllib3_1_1util_1_1connection_af6d7aec4e9cd41bfcbd8d04ce27ba9ae} 
\index{pip.\_vendor.urllib3.util.connection@{pip.\_vendor.urllib3.util.connection}!HAS\_IPV6@{HAS\_IPV6}}
\index{HAS\_IPV6@{HAS\_IPV6}!pip.\_vendor.urllib3.util.connection@{pip.\_vendor.urllib3.util.connection}}
\doxysubsubsection{\texorpdfstring{HAS\_IPV6}{HAS\_IPV6}}
{\footnotesize\ttfamily HAS\+\_\+\+IPV6 = \mbox{\hyperlink{namespacepip_1_1__vendor_1_1urllib3_1_1util_1_1connection_a595b0ed93e62ea9e136253639a73d841}{\+\_\+has\+\_\+ipv6}}("{}\+::1"{})}



Definition at line \mbox{\hyperlink{util_2connection_8py_source_l00149}{149}} of file \mbox{\hyperlink{util_2connection_8py_source}{connection.\+py}}.

