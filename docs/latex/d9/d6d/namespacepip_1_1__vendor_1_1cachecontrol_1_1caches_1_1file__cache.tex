\doxysection{pip.\+\_\+vendor.\+cachecontrol.\+caches.\+file\+\_\+cache Namespace Reference}
\hypertarget{namespacepip_1_1__vendor_1_1cachecontrol_1_1caches_1_1file__cache}{}\label{namespacepip_1_1__vendor_1_1cachecontrol_1_1caches_1_1file__cache}\index{pip.\_vendor.cachecontrol.caches.file\_cache@{pip.\_vendor.cachecontrol.caches.file\_cache}}
\doxysubsubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classpip_1_1__vendor_1_1cachecontrol_1_1caches_1_1file__cache_1_1___file_cache_mixin}{\+\_\+\+File\+Cache\+Mixin}}
\item 
class \mbox{\hyperlink{classpip_1_1__vendor_1_1cachecontrol_1_1caches_1_1file__cache_1_1_file_cache}{File\+Cache}}
\item 
class \mbox{\hyperlink{classpip_1_1__vendor_1_1cachecontrol_1_1caches_1_1file__cache_1_1_separate_body_file_cache}{Separate\+Body\+File\+Cache}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacepip_1_1__vendor_1_1cachecontrol_1_1caches_1_1file__cache_a684c1cb893d3379adb30c8ec76a7f4ea}{\+\_\+secure\+\_\+open\+\_\+write}} (filename, fmode)
\item 
\mbox{\hyperlink{namespacepip_1_1__vendor_1_1cachecontrol_1_1caches_1_1file__cache_a8837a555e27fc2911e427401d59b3478}{url\+\_\+to\+\_\+file\+\_\+path}} (url, filecache)
\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
tuple \mbox{\hyperlink{namespacepip_1_1__vendor_1_1cachecontrol_1_1caches_1_1file__cache_a4f07df0eeecb9f46b864ba13467f633b}{File\+Not\+Found\+Error}} = (IOError, OSError)
\end{DoxyCompactItemize}


\label{doc-func-members}
\Hypertarget{namespacepip_1_1__vendor_1_1cachecontrol_1_1caches_1_1file__cache_doc-func-members}
\doxysubsection{Function Documentation}
\Hypertarget{namespacepip_1_1__vendor_1_1cachecontrol_1_1caches_1_1file__cache_a684c1cb893d3379adb30c8ec76a7f4ea}\index{pip.\_vendor.cachecontrol.caches.file\_cache@{pip.\_vendor.cachecontrol.caches.file\_cache}!\_secure\_open\_write@{\_secure\_open\_write}}
\index{\_secure\_open\_write@{\_secure\_open\_write}!pip.\_vendor.cachecontrol.caches.file\_cache@{pip.\_vendor.cachecontrol.caches.file\_cache}}
\doxysubsubsection{\texorpdfstring{\_secure\_open\_write()}{\_secure\_open\_write()}}
{\footnotesize\ttfamily \label{namespacepip_1_1__vendor_1_1cachecontrol_1_1caches_1_1file__cache_a684c1cb893d3379adb30c8ec76a7f4ea} 
\+\_\+secure\+\_\+open\+\_\+write (\begin{DoxyParamCaption}\item[{}]{filename}{, }\item[{}]{fmode}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line \mbox{\hyperlink{file__cache_8py_source_l00019}{19}} of file \mbox{\hyperlink{file__cache_8py_source}{file\+\_\+cache.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00019\ \textcolor{keyword}{def\ }\_secure\_open\_write(filename,\ fmode):}
\DoxyCodeLine{00020\ \ \ \ \ \textcolor{comment}{\#\ We\ only\ want\ to\ write\ to\ this\ file,\ so\ open\ it\ in\ write\ only\ mode}}
\DoxyCodeLine{00021\ \ \ \ \ flags\ =\ os.O\_WRONLY}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \ \ \ \ \textcolor{comment}{\#\ os.O\_CREAT\ |\ os.O\_EXCL\ will\ fail\ if\ the\ file\ already\ exists,\ so\ we\ only}}
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{comment}{\#\ \ will\ open\ *new*\ files.}}
\DoxyCodeLine{00025\ \ \ \ \ \textcolor{comment}{\#\ We\ specify\ this\ because\ we\ want\ to\ ensure\ that\ the\ mode\ we\ pass\ is\ the}}
\DoxyCodeLine{00026\ \ \ \ \ \textcolor{comment}{\#\ mode\ of\ the\ file.}}
\DoxyCodeLine{00027\ \ \ \ \ flags\ |=\ os.O\_CREAT\ |\ os.O\_EXCL}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \ \ \ \ \textcolor{comment}{\#\ Do\ not\ follow\ symlinks\ to\ prevent\ someone\ from\ making\ a\ symlink\ that}}
\DoxyCodeLine{00030\ \ \ \ \ \textcolor{comment}{\#\ we\ follow\ and\ insecurely\ open\ a\ cache\ file.}}
\DoxyCodeLine{00031\ \ \ \ \ \textcolor{keywordflow}{if}\ hasattr(os,\ \textcolor{stringliteral}{"{}O\_NOFOLLOW"{}}):}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ flags\ |=\ os.O\_NOFOLLOW}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{comment}{\#\ On\ Windows\ we'll\ mark\ this\ file\ as\ binary}}
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keywordflow}{if}\ hasattr(os,\ \textcolor{stringliteral}{"{}O\_BINARY"{}}):}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ flags\ |=\ os.O\_BINARY}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{comment}{\#\ Before\ we\ open\ our\ file,\ we\ want\ to\ delete\ any\ existing\ file\ that\ is}}
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{comment}{\#\ there}}
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ os.remove(filename)}
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{keywordflow}{except}\ (IOError,\ OSError):}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ The\ file\ must\ not\ exist\ already,\ so\ we\ can\ just\ skip\ ahead\ to\ opening}}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{comment}{\#\ Open\ our\ file,\ the\ use\ of\ os.O\_CREAT\ |\ os.O\_EXCL\ will\ ensure\ that\ if\ a}}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{comment}{\#\ race\ condition\ happens\ between\ the\ os.remove\ and\ this\ line,\ that\ an}}
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{comment}{\#\ error\ will\ be\ raised.\ Because\ we\ utilize\ a\ lockfile\ this\ should\ only}}
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{comment}{\#\ happen\ if\ someone\ is\ attempting\ to\ attack\ us.}}
\DoxyCodeLine{00050\ \ \ \ \ fd\ =\ os.open(filename,\ flags,\ fmode)}
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ os.fdopen(fd,\ \textcolor{stringliteral}{"{}wb"{}})}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keywordflow}{except}:}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ An\ error\ occurred\ wrapping\ our\ FD\ in\ a\ file\ object}}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ os.close(fd)}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ }

\end{DoxyCode}


Referenced by \mbox{\hyperlink{file__cache_8py_source_l00126}{\+\_\+\+File\+Cache\+Mixin.\+\_\+write()}}.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d9/d6d/namespacepip_1_1__vendor_1_1cachecontrol_1_1caches_1_1file__cache_a684c1cb893d3379adb30c8ec76a7f4ea_icgraph}
\end{center}
\end{figure}
\Hypertarget{namespacepip_1_1__vendor_1_1cachecontrol_1_1caches_1_1file__cache_a8837a555e27fc2911e427401d59b3478}\index{pip.\_vendor.cachecontrol.caches.file\_cache@{pip.\_vendor.cachecontrol.caches.file\_cache}!url\_to\_file\_path@{url\_to\_file\_path}}
\index{url\_to\_file\_path@{url\_to\_file\_path}!pip.\_vendor.cachecontrol.caches.file\_cache@{pip.\_vendor.cachecontrol.caches.file\_cache}}
\doxysubsubsection{\texorpdfstring{url\_to\_file\_path()}{url\_to\_file\_path()}}
{\footnotesize\ttfamily \label{namespacepip_1_1__vendor_1_1cachecontrol_1_1caches_1_1file__cache_a8837a555e27fc2911e427401d59b3478} 
url\+\_\+to\+\_\+file\+\_\+path (\begin{DoxyParamCaption}\item[{}]{url}{, }\item[{}]{filecache}{}\end{DoxyParamCaption})}

\begin{DoxyVerb}Return the file cache path based on the URL.

This does not ensure the file exists!
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{file__cache_8py_source_l00182}{182}} of file \mbox{\hyperlink{file__cache_8py_source}{file\+\_\+cache.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00182\ \textcolor{keyword}{def\ }url\_to\_file\_path(url,\ filecache):}
\DoxyCodeLine{00183\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Return\ the\ file\ cache\ path\ based\ on\ the\ URL.}}
\DoxyCodeLine{00184\ \textcolor{stringliteral}{}}
\DoxyCodeLine{00185\ \textcolor{stringliteral}{\ \ \ \ This\ does\ not\ ensure\ the\ file\ exists!}}
\DoxyCodeLine{00186\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{00187\ \ \ \ \ key\ =\ CacheController.cache\_url(url)}
\DoxyCodeLine{00188\ \ \ \ \ \textcolor{keywordflow}{return}\ filecache.\_fn(key)}

\end{DoxyCode}


\label{doc-var-members}
\Hypertarget{namespacepip_1_1__vendor_1_1cachecontrol_1_1caches_1_1file__cache_doc-var-members}
\doxysubsection{Variable Documentation}
\Hypertarget{namespacepip_1_1__vendor_1_1cachecontrol_1_1caches_1_1file__cache_a4f07df0eeecb9f46b864ba13467f633b}\index{pip.\_vendor.cachecontrol.caches.file\_cache@{pip.\_vendor.cachecontrol.caches.file\_cache}!FileNotFoundError@{FileNotFoundError}}
\index{FileNotFoundError@{FileNotFoundError}!pip.\_vendor.cachecontrol.caches.file\_cache@{pip.\_vendor.cachecontrol.caches.file\_cache}}
\doxysubsubsection{\texorpdfstring{FileNotFoundError}{FileNotFoundError}}
{\footnotesize\ttfamily \label{namespacepip_1_1__vendor_1_1cachecontrol_1_1caches_1_1file__cache_a4f07df0eeecb9f46b864ba13467f633b} 
tuple File\+Not\+Found\+Error = (IOError, OSError)}



Definition at line \mbox{\hyperlink{file__cache_8py_source_l00016}{16}} of file \mbox{\hyperlink{file__cache_8py_source}{file\+\_\+cache.\+py}}.

