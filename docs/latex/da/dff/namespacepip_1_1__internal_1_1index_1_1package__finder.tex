\doxysection{pip.\+\_\+internal.\+index.\+package\+\_\+finder Namespace Reference}
\hypertarget{namespacepip_1_1__internal_1_1index_1_1package__finder}{}\label{namespacepip_1_1__internal_1_1index_1_1package__finder}\index{pip.\_internal.index.package\_finder@{pip.\_internal.index.package\_finder}}
\doxysubsubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classpip_1_1__internal_1_1index_1_1package__finder_1_1BestCandidateResult}{Best\+Candidate\+Result}}
\item 
class \mbox{\hyperlink{classpip_1_1__internal_1_1index_1_1package__finder_1_1CandidateEvaluator}{Candidate\+Evaluator}}
\item 
class \mbox{\hyperlink{classpip_1_1__internal_1_1index_1_1package__finder_1_1CandidatePreferences}{Candidate\+Preferences}}
\item 
class \mbox{\hyperlink{classpip_1_1__internal_1_1index_1_1package__finder_1_1LinkEvaluator}{Link\+Evaluator}}
\item 
class \mbox{\hyperlink{classpip_1_1__internal_1_1index_1_1package__finder_1_1LinkType}{Link\+Type}}
\item 
class \mbox{\hyperlink{classpip_1_1__internal_1_1index_1_1package__finder_1_1PackageFinder}{Package\+Finder}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{namespacepip_1_1__internal_1_1index_1_1package__finder_a5dbf97f0a3513a0d8fe848ce8b6778ee}{\+\_\+check\+\_\+link\+\_\+requires\+\_\+python}} (\mbox{\hyperlink{classpip_1_1__internal_1_1models_1_1link_1_1Link}{Link}} link, Tuple\mbox{[}int, int, int\mbox{]} version\+\_\+info, bool ignore\+\_\+requires\+\_\+python=False)
\item 
List\mbox{[}\mbox{\hyperlink{classpip_1_1__internal_1_1models_1_1candidate_1_1InstallationCandidate}{Installation\+Candidate}}\mbox{]} \mbox{\hyperlink{namespacepip_1_1__internal_1_1index_1_1package__finder_a23a3567b784f3b72e48697387ee4aba4}{filter\+\_\+unallowed\+\_\+hashes}} (List\mbox{[}\mbox{\hyperlink{classpip_1_1__internal_1_1models_1_1candidate_1_1InstallationCandidate}{Installation\+Candidate}}\mbox{]} candidates, Optional\mbox{[}\mbox{\hyperlink{classpip_1_1__internal_1_1utils_1_1hashes_1_1Hashes}{Hashes}}\mbox{]} hashes, str project\+\_\+name)
\item 
int \mbox{\hyperlink{namespacepip_1_1__internal_1_1index_1_1package__finder_a1cd8ac9d7cf5801c805fc403743c7574}{\+\_\+find\+\_\+name\+\_\+version\+\_\+sep}} (str \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{fragment}}, str canonical\+\_\+name)
\item 
Optional\mbox{[}str\mbox{]} \mbox{\hyperlink{namespacepip_1_1__internal_1_1index_1_1package__finder_a067b01bc0ed2ad9d63d1828c991f258c}{\+\_\+extract\+\_\+version\+\_\+from\+\_\+fragment}} (str \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{fragment}}, str canonical\+\_\+name)
\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacepip_1_1__internal_1_1index_1_1package__finder_a0b14e488ae28d98d262453f3e9cd6e4d}{logger}} = get\+Logger(\+\_\+\+\_\+name\+\_\+\+\_\+)
\item 
\mbox{\hyperlink{namespacepip_1_1__internal_1_1index_1_1package__finder_ac65be78d07f053f2b25ad7e91080c042}{Build\+Tag}} = Union\mbox{[}Tuple\mbox{[}()\mbox{]}, Tuple\mbox{[}int, str\mbox{]}\mbox{]}
\item 
\mbox{\hyperlink{namespacepip_1_1__internal_1_1index_1_1package__finder_a4b1dbf3b87ef9da7bda5f86246f9fe62}{Candidate\+Sorting\+Key}} = Tuple\mbox{[}int, int, int, \mbox{\hyperlink{classpip_1_1__vendor_1_1packaging_1_1version_1_1__BaseVersion}{\+\_\+\+Base\+Version}}, Optional\mbox{[}int\mbox{]}, \mbox{\hyperlink{namespacepip_1_1__internal_1_1index_1_1package__finder_ac65be78d07f053f2b25ad7e91080c042}{Build\+Tag}}\mbox{]}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\begin{DoxyVerb}Routines related to PyPI, indexes\end{DoxyVerb}
 

\doxysubsection{Function Documentation}
\Hypertarget{namespacepip_1_1__internal_1_1index_1_1package__finder_a5dbf97f0a3513a0d8fe848ce8b6778ee}\label{namespacepip_1_1__internal_1_1index_1_1package__finder_a5dbf97f0a3513a0d8fe848ce8b6778ee} 
\index{pip.\_internal.index.package\_finder@{pip.\_internal.index.package\_finder}!\_check\_link\_requires\_python@{\_check\_link\_requires\_python}}
\index{\_check\_link\_requires\_python@{\_check\_link\_requires\_python}!pip.\_internal.index.package\_finder@{pip.\_internal.index.package\_finder}}
\doxysubsubsection{\texorpdfstring{\_check\_link\_requires\_python()}{\_check\_link\_requires\_python()}}
{\footnotesize\ttfamily  bool \+\_\+check\+\_\+link\+\_\+requires\+\_\+python (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classpip_1_1__internal_1_1models_1_1link_1_1Link}{Link}}}]{link,  }\item[{Tuple\mbox{[}int, int, int\mbox{]}}]{version\+\_\+info,  }\item[{bool }]{ignore\+\_\+requires\+\_\+python = {\ttfamily False} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

\begin{DoxyVerb}Return whether the given Python version is compatible with a link's
"Requires-Python" value.

:param version_info: A 3-tuple of ints representing the Python
    major-minor-micro version to check.
:param ignore_requires_python: Whether to ignore the "Requires-Python"
    value if the given Python version isn't compatible.
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{package__finder_8py_source_l00051}{51}} of file \mbox{\hyperlink{package__finder_8py_source}{package\+\_\+finder.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00055\ )\ -\/>\ bool:}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{00057\ \textcolor{stringliteral}{\ \ \ \ Return\ whether\ the\ given\ Python\ version\ is\ compatible\ with\ a\ link's}}
\DoxyCodeLine{00058\ \textcolor{stringliteral}{\ \ \ \ "{}Requires-\/Python"{}\ value.}}
\DoxyCodeLine{00059\ \textcolor{stringliteral}{}}
\DoxyCodeLine{00060\ \textcolor{stringliteral}{\ \ \ \ :param\ version\_info:\ A\ 3-\/tuple\ of\ ints\ representing\ the\ Python}}
\DoxyCodeLine{00061\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ major-\/minor-\/micro\ version\ to\ check.}}
\DoxyCodeLine{00062\ \textcolor{stringliteral}{\ \ \ \ :param\ ignore\_requires\_python:\ Whether\ to\ ignore\ the\ "{}Requires-\/Python"{}}}
\DoxyCodeLine{00063\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ value\ if\ the\ given\ Python\ version\ isn't\ compatible.}}
\DoxyCodeLine{00064\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ is\_compatible\ =\ check\_requires\_python(}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{link.requires\_python}},}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \ \ \ \ version\_info=version\_info,}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{keywordflow}{except}\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{specifiers.InvalidSpecifier}}:}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{logger.debug}}(}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Ignoring\ invalid\ Requires-\/Python\ (\%r)\ for\ link:\ \%s"{}},}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{link.requires\_python}},}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \ \ \ \ link,}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ is\_compatible:}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ \ \ version\ =\ \textcolor{stringliteral}{"{}."{}}.join(map(str,\ version\_info))}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ ignore\_requires\_python:}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{logger.verbose}}(}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Link\ requires\ a\ different\ Python\ (\%s\ not\ in:\ \%r):\ \%s"{}},}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ version,}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{link.requires\_python}},}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ link,}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{False}}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{logger.debug}}(}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Ignoring\ failed\ Requires-\/Python\ check\ (\%s\ not\ in:\ \%r)\ for\ link:\ \%s"{}},}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ version,}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{link.requires\_python}},}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ link,}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{True}}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ }

\end{DoxyCode}


References \mbox{\hyperlink{prime__search_8m_source_l00010}{i}}.



Referenced by \mbox{\hyperlink{package__finder_8py_source_l00157}{Link\+Evaluator.\+evaluate\+\_\+link()}}.

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{da/dff/namespacepip_1_1__internal_1_1index_1_1package__finder_a5dbf97f0a3513a0d8fe848ce8b6778ee_icgraph}
\end{center}
\end{figure}
\Hypertarget{namespacepip_1_1__internal_1_1index_1_1package__finder_a067b01bc0ed2ad9d63d1828c991f258c}\label{namespacepip_1_1__internal_1_1index_1_1package__finder_a067b01bc0ed2ad9d63d1828c991f258c} 
\index{pip.\_internal.index.package\_finder@{pip.\_internal.index.package\_finder}!\_extract\_version\_from\_fragment@{\_extract\_version\_from\_fragment}}
\index{\_extract\_version\_from\_fragment@{\_extract\_version\_from\_fragment}!pip.\_internal.index.package\_finder@{pip.\_internal.index.package\_finder}}
\doxysubsubsection{\texorpdfstring{\_extract\_version\_from\_fragment()}{\_extract\_version\_from\_fragment()}}
{\footnotesize\ttfamily  Optional\mbox{[}str\mbox{]} \+\_\+extract\+\_\+version\+\_\+from\+\_\+fragment (\begin{DoxyParamCaption}\item[{str}]{fragment,  }\item[{str}]{canonical\+\_\+name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

\begin{DoxyVerb}Parse the version string from a <package>+<version> filename
"fragment" (stem) or egg fragment.

:param fragment: The string to parse. E.g. foo-2.1
:param canonical_name: The canonicalized name of the package this
    belongs to.
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{package__finder_8py_source_l01014}{1014}} of file \mbox{\hyperlink{package__finder_8py_source}{package\+\_\+finder.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01014\ \textcolor{keyword}{def\ }\_extract\_version\_from\_fragment(fragment:\ str,\ canonical\_name:\ str)\ -\/>\ Optional[str]:}
\DoxyCodeLine{01015\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Parse\ the\ version\ string\ from\ a\ <package>+<version>\ filename}}
\DoxyCodeLine{01016\ \textcolor{stringliteral}{\ \ \ \ "{}fragment"{}\ (stem)\ or\ egg\ fragment.}}
\DoxyCodeLine{01017\ \textcolor{stringliteral}{}}
\DoxyCodeLine{01018\ \textcolor{stringliteral}{\ \ \ \ :param\ fragment:\ The\ string\ to\ parse.\ E.g.\ foo-\/2.1}}
\DoxyCodeLine{01019\ \textcolor{stringliteral}{\ \ \ \ :param\ canonical\_name:\ The\ canonicalized\ name\ of\ the\ package\ this}}
\DoxyCodeLine{01020\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ belongs\ to.}}
\DoxyCodeLine{01021\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{01022\ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{01023\ \ \ \ \ \ \ \ \ version\_start\ =\ \_find\_name\_version\_sep(fragment,\ canonical\_name)\ +\ 1}
\DoxyCodeLine{01024\ \ \ \ \ \textcolor{keywordflow}{except}\ ValueError:}
\DoxyCodeLine{01025\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{01026\ \ \ \ \ version\ =\ fragment[version\_start:]}
\DoxyCodeLine{01027\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ version:}
\DoxyCodeLine{01028\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{01029\ \ \ \ \ \textcolor{keywordflow}{return}\ version}

\end{DoxyCode}


References \mbox{\hyperlink{package__finder_8py_source_l00988}{pip.\+\_\+internal.\+index.\+package\+\_\+finder.\+\_\+find\+\_\+name\+\_\+version\+\_\+sep()}}.



Referenced by \mbox{\hyperlink{package__finder_8py_source_l00157}{Link\+Evaluator.\+evaluate\+\_\+link()}}.

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{da/dff/namespacepip_1_1__internal_1_1index_1_1package__finder_a067b01bc0ed2ad9d63d1828c991f258c_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{da/dff/namespacepip_1_1__internal_1_1index_1_1package__finder_a067b01bc0ed2ad9d63d1828c991f258c_icgraph}
\end{center}
\end{figure}
\Hypertarget{namespacepip_1_1__internal_1_1index_1_1package__finder_a1cd8ac9d7cf5801c805fc403743c7574}\label{namespacepip_1_1__internal_1_1index_1_1package__finder_a1cd8ac9d7cf5801c805fc403743c7574} 
\index{pip.\_internal.index.package\_finder@{pip.\_internal.index.package\_finder}!\_find\_name\_version\_sep@{\_find\_name\_version\_sep}}
\index{\_find\_name\_version\_sep@{\_find\_name\_version\_sep}!pip.\_internal.index.package\_finder@{pip.\_internal.index.package\_finder}}
\doxysubsubsection{\texorpdfstring{\_find\_name\_version\_sep()}{\_find\_name\_version\_sep()}}
{\footnotesize\ttfamily  int \+\_\+find\+\_\+name\+\_\+version\+\_\+sep (\begin{DoxyParamCaption}\item[{str}]{fragment,  }\item[{str}]{canonical\+\_\+name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

\begin{DoxyVerb}Find the separator's index based on the package's canonical name.

:param fragment: A <package>+<version> filename "fragment" (stem) or
    egg fragment.
:param canonical_name: The package's canonical name.

This function is needed since the canonicalized name does not necessarily
have the same length as the egg info's name part. An example::

>>> fragment = 'foo__bar-1.0'
>>> canonical_name = 'foo-bar'
>>> _find_name_version_sep(fragment, canonical_name)
8
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{package__finder_8py_source_l00988}{988}} of file \mbox{\hyperlink{package__finder_8py_source}{package\+\_\+finder.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00988\ \textcolor{keyword}{def\ }\_find\_name\_version\_sep(fragment:\ str,\ canonical\_name:\ str)\ -\/>\ int:}
\DoxyCodeLine{00989\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Find\ the\ separator's\ index\ based\ on\ the\ package's\ canonical\ name.}}
\DoxyCodeLine{00990\ \textcolor{stringliteral}{}}
\DoxyCodeLine{00991\ \textcolor{stringliteral}{\ \ \ \ :param\ fragment:\ A\ <package>+<version>\ filename\ "{}fragment"{}\ (stem)\ or}}
\DoxyCodeLine{00992\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ egg\ fragment.}}
\DoxyCodeLine{00993\ \textcolor{stringliteral}{\ \ \ \ :param\ canonical\_name:\ The\ package's\ canonical\ name.}}
\DoxyCodeLine{00994\ \textcolor{stringliteral}{}}
\DoxyCodeLine{00995\ \textcolor{stringliteral}{\ \ \ \ This\ function\ is\ needed\ since\ the\ canonicalized\ name\ does\ not\ necessarily}}
\DoxyCodeLine{00996\ \textcolor{stringliteral}{\ \ \ \ have\ the\ same\ length\ as\ the\ egg\ info's\ name\ part.\ An\ example::}}
\DoxyCodeLine{00997\ \textcolor{stringliteral}{}}
\DoxyCodeLine{00998\ \textcolor{stringliteral}{\ \ \ \ >>>\ fragment\ =\ 'foo\_\_bar-\/1.0'}}
\DoxyCodeLine{00999\ \textcolor{stringliteral}{\ \ \ \ >>>\ canonical\_name\ =\ 'foo-\/bar'}}
\DoxyCodeLine{01000\ \textcolor{stringliteral}{\ \ \ \ >>>\ \_find\_name\_version\_sep(fragment,\ canonical\_name)}}
\DoxyCodeLine{01001\ \textcolor{stringliteral}{\ \ \ \ 8}}
\DoxyCodeLine{01002\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{01003\ \ \ \ \ \textcolor{comment}{\#\ Project\ name\ and\ version\ must\ be\ separated\ by\ one\ single\ dash.\ Find\ all}}
\DoxyCodeLine{01004\ \ \ \ \ \textcolor{comment}{\#\ occurrences\ of\ dashes;\ if\ the\ string\ in\ front\ of\ it\ matches\ the\ canonical}}
\DoxyCodeLine{01005\ \ \ \ \ \textcolor{comment}{\#\ name,\ this\ is\ the\ one\ separating\ the\ name\ and\ version\ parts.}}
\DoxyCodeLine{01006\ \ \ \ \ \textcolor{keywordflow}{for}\ i,\ c\ \textcolor{keywordflow}{in}\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{enumerate}}(fragment):}
\DoxyCodeLine{01007\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ c\ !=\ \textcolor{stringliteral}{"{}-\/"{}}:}
\DoxyCodeLine{01008\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue}}
\DoxyCodeLine{01009\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ canonicalize\_name(fragment[:i])\ ==\ canonical\_name:}
\DoxyCodeLine{01010\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ i}
\DoxyCodeLine{01011\ \ \ \ \ \textcolor{keywordflow}{raise}\ ValueError(f\textcolor{stringliteral}{"{}\{fragment\}\ does\ not\ match\ \{canonical\_name\}"{}})}
\DoxyCodeLine{01012\ }
\DoxyCodeLine{01013\ }

\end{DoxyCode}


References \mbox{\hyperlink{prime__search_8m_source_l00010}{i}}.



Referenced by \mbox{\hyperlink{package__finder_8py_source_l01014}{pip.\+\_\+internal.\+index.\+package\+\_\+finder.\+\_\+extract\+\_\+version\+\_\+from\+\_\+fragment()}}.

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{da/dff/namespacepip_1_1__internal_1_1index_1_1package__finder_a1cd8ac9d7cf5801c805fc403743c7574_icgraph}
\end{center}
\end{figure}
\Hypertarget{namespacepip_1_1__internal_1_1index_1_1package__finder_a23a3567b784f3b72e48697387ee4aba4}\label{namespacepip_1_1__internal_1_1index_1_1package__finder_a23a3567b784f3b72e48697387ee4aba4} 
\index{pip.\_internal.index.package\_finder@{pip.\_internal.index.package\_finder}!filter\_unallowed\_hashes@{filter\_unallowed\_hashes}}
\index{filter\_unallowed\_hashes@{filter\_unallowed\_hashes}!pip.\_internal.index.package\_finder@{pip.\_internal.index.package\_finder}}
\doxysubsubsection{\texorpdfstring{filter\_unallowed\_hashes()}{filter\_unallowed\_hashes()}}
{\footnotesize\ttfamily  List\mbox{[}\mbox{\hyperlink{classpip_1_1__internal_1_1models_1_1candidate_1_1InstallationCandidate}{Installation\+Candidate}}\mbox{]} filter\+\_\+unallowed\+\_\+hashes (\begin{DoxyParamCaption}\item[{List\mbox{[}\mbox{\hyperlink{classpip_1_1__internal_1_1models_1_1candidate_1_1InstallationCandidate}{Installation\+Candidate}}\mbox{]}}]{candidates,  }\item[{Optional\mbox{[}\mbox{\hyperlink{classpip_1_1__internal_1_1utils_1_1hashes_1_1Hashes}{Hashes}}\mbox{]}}]{hashes,  }\item[{str}]{project\+\_\+name }\end{DoxyParamCaption})}

\begin{DoxyVerb}Filter out candidates whose hashes aren't allowed, and return a new
list of candidates.

If at least one candidate has an allowed hash, then all candidates with
either an allowed hash or no hash specified are returned.  Otherwise,
the given candidates are returned.

Including the candidates with no hash specified when there is a match
allows a warning to be logged if there is a more preferred candidate
with no hash specified.  Returning all candidates in the case of no
matches lets pip report the hash of the candidate that would otherwise
have been installed (e.g. permitting the user to more easily update
their requirements file with the desired hash).
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{package__finder_8py_source_l00252}{252}} of file \mbox{\hyperlink{package__finder_8py_source}{package\+\_\+finder.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00256\ )\ -\/>\ List[InstallationCandidate]:}
\DoxyCodeLine{00257\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{00258\ \textcolor{stringliteral}{\ \ \ \ Filter\ out\ candidates\ whose\ hashes\ aren't\ allowed,\ and\ return\ a\ new}}
\DoxyCodeLine{00259\ \textcolor{stringliteral}{\ \ \ \ list\ of\ candidates.}}
\DoxyCodeLine{00260\ \textcolor{stringliteral}{}}
\DoxyCodeLine{00261\ \textcolor{stringliteral}{\ \ \ \ If\ at\ least\ one\ candidate\ has\ an\ allowed\ hash,\ then\ all\ candidates\ with}}
\DoxyCodeLine{00262\ \textcolor{stringliteral}{\ \ \ \ either\ an\ allowed\ hash\ or\ no\ hash\ specified\ are\ returned.\ \ Otherwise,}}
\DoxyCodeLine{00263\ \textcolor{stringliteral}{\ \ \ \ the\ given\ candidates\ are\ returned.}}
\DoxyCodeLine{00264\ \textcolor{stringliteral}{}}
\DoxyCodeLine{00265\ \textcolor{stringliteral}{\ \ \ \ Including\ the\ candidates\ with\ no\ hash\ specified\ when\ there\ is\ a\ match}}
\DoxyCodeLine{00266\ \textcolor{stringliteral}{\ \ \ \ allows\ a\ warning\ to\ be\ logged\ if\ there\ is\ a\ more\ preferred\ candidate}}
\DoxyCodeLine{00267\ \textcolor{stringliteral}{\ \ \ \ with\ no\ hash\ specified.\ \ Returning\ all\ candidates\ in\ the\ case\ of\ no}}
\DoxyCodeLine{00268\ \textcolor{stringliteral}{\ \ \ \ matches\ lets\ pip\ report\ the\ hash\ of\ the\ candidate\ that\ would\ otherwise}}
\DoxyCodeLine{00269\ \textcolor{stringliteral}{\ \ \ \ have\ been\ installed\ (e.g.\ permitting\ the\ user\ to\ more\ easily\ update}}
\DoxyCodeLine{00270\ \textcolor{stringliteral}{\ \ \ \ their\ requirements\ file\ with\ the\ desired\ hash).}}
\DoxyCodeLine{00271\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{00272\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ hashes:}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{logger.debug}}(}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Given\ no\ hashes\ to\ check\ \%s\ links\ for\ project\ \%r:\ "{}}}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}discarding\ no\ candidates"{}},}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{len}}(candidates),}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \ \ \ \ project\_name,}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Make\ sure\ we're\ not\ returning\ back\ the\ given\ value.}}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ list(candidates)}
\DoxyCodeLine{00281\ }
\DoxyCodeLine{00282\ \ \ \ \ matches\_or\_no\_digest\ =\ []}
\DoxyCodeLine{00283\ \ \ \ \ \textcolor{comment}{\#\ Collect\ the\ non-\/matches\ for\ logging\ purposes.}}
\DoxyCodeLine{00284\ \ \ \ \ non\_matches\ =\ []}
\DoxyCodeLine{00285\ \ \ \ \ match\_count\ =\ 0}
\DoxyCodeLine{00286\ \ \ \ \ \textcolor{keywordflow}{for}\ candidate\ \textcolor{keywordflow}{in}\ candidates:}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ link\ =\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{candidate.link}}}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{link.has\_hash}}:}
\DoxyCodeLine{00289\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{elif}\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{link.is\_hash\_allowed}}(hashes=hashes):}
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \ \ \ \ \ match\_count\ +=\ 1}
\DoxyCodeLine{00292\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{00293\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{non\_matches.append}}(candidate)}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue}}
\DoxyCodeLine{00295\ }
\DoxyCodeLine{00296\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{matches\_or\_no\_digest.append}}(candidate)}
\DoxyCodeLine{00297\ }
\DoxyCodeLine{00298\ \ \ \ \ \textcolor{keywordflow}{if}\ match\_count:}
\DoxyCodeLine{00299\ \ \ \ \ \ \ \ \ filtered\ =\ matches\_or\_no\_digest}
\DoxyCodeLine{00300\ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Make\ sure\ we're\ not\ returning\ back\ the\ given\ value.}}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ filtered\ =\ list(candidates)}
\DoxyCodeLine{00303\ }
\DoxyCodeLine{00304\ \ \ \ \ \textcolor{keywordflow}{if}\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{len}}(filtered)\ ==\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{len}}(candidates):}
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ discard\_message\ =\ \textcolor{stringliteral}{"{}discarding\ no\ candidates"{}}}
\DoxyCodeLine{00306\ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ discard\_message\ =\ \textcolor{stringliteral}{"{}discarding\ \{\}\ non-\/matches:\(\backslash\)n\ \ \{\}"{}}.format(}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{len}}(non\_matches),}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n\ \ "{}}.join(str(\mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{candidate.link}})\ \textcolor{keywordflow}{for}\ candidate\ \textcolor{keywordflow}{in}\ non\_matches),}
\DoxyCodeLine{00310\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00311\ }
\DoxyCodeLine{00312\ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{logger.debug}}(}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Checked\ \%s\ links\ for\ project\ \%r\ against\ \%s\ hashes\ "{}}}
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}(\%s\ matches,\ \%s\ no\ digest):\ \%s"{}},}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{len}}(candidates),}
\DoxyCodeLine{00316\ \ \ \ \ \ \ \ \ project\_name,}
\DoxyCodeLine{00317\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{hashes.digest\_count}},}
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ match\_count,}
\DoxyCodeLine{00319\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{len}}(matches\_or\_no\_digest)\ -\/\ match\_count,}
\DoxyCodeLine{00320\ \ \ \ \ \ \ \ \ discard\_message,}
\DoxyCodeLine{00321\ \ \ \ \ )}
\DoxyCodeLine{00322\ }
\DoxyCodeLine{00323\ \ \ \ \ \textcolor{keywordflow}{return}\ filtered}
\DoxyCodeLine{00324\ }
\DoxyCodeLine{00325\ }

\end{DoxyCode}


References \mbox{\hyperlink{prime__search_8m_source_l00010}{i}}.



Referenced by \mbox{\hyperlink{package__finder_8py_source_l00457}{Candidate\+Evaluator.\+get\+\_\+applicable\+\_\+candidates()}}.

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{da/dff/namespacepip_1_1__internal_1_1index_1_1package__finder_a23a3567b784f3b72e48697387ee4aba4_icgraph}
\end{center}
\end{figure}


\doxysubsection{Variable Documentation}
\Hypertarget{namespacepip_1_1__internal_1_1index_1_1package__finder_ac65be78d07f053f2b25ad7e91080c042}\label{namespacepip_1_1__internal_1_1index_1_1package__finder_ac65be78d07f053f2b25ad7e91080c042} 
\index{pip.\_internal.index.package\_finder@{pip.\_internal.index.package\_finder}!BuildTag@{BuildTag}}
\index{BuildTag@{BuildTag}!pip.\_internal.index.package\_finder@{pip.\_internal.index.package\_finder}}
\doxysubsubsection{\texorpdfstring{BuildTag}{BuildTag}}
{\footnotesize\ttfamily Build\+Tag = Union\mbox{[}Tuple\mbox{[}()\mbox{]}, Tuple\mbox{[}int, str\mbox{]}\mbox{]}}



Definition at line \mbox{\hyperlink{package__finder_8py_source_l00047}{47}} of file \mbox{\hyperlink{package__finder_8py_source}{package\+\_\+finder.\+py}}.

\Hypertarget{namespacepip_1_1__internal_1_1index_1_1package__finder_a4b1dbf3b87ef9da7bda5f86246f9fe62}\label{namespacepip_1_1__internal_1_1index_1_1package__finder_a4b1dbf3b87ef9da7bda5f86246f9fe62} 
\index{pip.\_internal.index.package\_finder@{pip.\_internal.index.package\_finder}!CandidateSortingKey@{CandidateSortingKey}}
\index{CandidateSortingKey@{CandidateSortingKey}!pip.\_internal.index.package\_finder@{pip.\_internal.index.package\_finder}}
\doxysubsubsection{\texorpdfstring{CandidateSortingKey}{CandidateSortingKey}}
{\footnotesize\ttfamily Candidate\+Sorting\+Key = Tuple\mbox{[}int, int, int, \mbox{\hyperlink{classpip_1_1__vendor_1_1packaging_1_1version_1_1__BaseVersion}{\+\_\+\+Base\+Version}}, Optional\mbox{[}int\mbox{]}, \mbox{\hyperlink{namespacepip_1_1__internal_1_1index_1_1package__finder_ac65be78d07f053f2b25ad7e91080c042}{Build\+Tag}}\mbox{]}}



Definition at line \mbox{\hyperlink{package__finder_8py_source_l00048}{48}} of file \mbox{\hyperlink{package__finder_8py_source}{package\+\_\+finder.\+py}}.

\Hypertarget{namespacepip_1_1__internal_1_1index_1_1package__finder_a0b14e488ae28d98d262453f3e9cd6e4d}\label{namespacepip_1_1__internal_1_1index_1_1package__finder_a0b14e488ae28d98d262453f3e9cd6e4d} 
\index{pip.\_internal.index.package\_finder@{pip.\_internal.index.package\_finder}!logger@{logger}}
\index{logger@{logger}!pip.\_internal.index.package\_finder@{pip.\_internal.index.package\_finder}}
\doxysubsubsection{\texorpdfstring{logger}{logger}}
{\footnotesize\ttfamily logger = get\+Logger(\+\_\+\+\_\+name\+\_\+\+\_\+)}



Definition at line \mbox{\hyperlink{package__finder_8py_source_l00045}{45}} of file \mbox{\hyperlink{package__finder_8py_source}{package\+\_\+finder.\+py}}.

