\chapter{(Detailed) Build, Test and Benchmarking Framework Documentation}
\hypertarget{md__2home_2liwuen_2projects__dev_2pqc-engineering-ssec-23_2c-code_2README}{}\label{md__2home_2liwuen_2projects__dev_2pqc-engineering-ssec-23_2c-code_2README}\index{(Detailed) Build, Test and Benchmarking Framework Documentation@{(Detailed) Build, Test and Benchmarking Framework Documentation}}
\label{md__2home_2liwuen_2projects__dev_2pqc-engineering-ssec-23_2c-code_2README_autotoc_md0}%
\Hypertarget{md__2home_2liwuen_2projects__dev_2pqc-engineering-ssec-23_2c-code_2README_autotoc_md0}%
 \hypertarget{md__2home_2liwuen_2projects__dev_2pqc-engineering-ssec-23_2c-code_2README_autotoc_md1}{}\doxysection{\texorpdfstring{Table of contents}{Table of contents}}\label{md__2home_2liwuen_2projects__dev_2pqc-engineering-ssec-23_2c-code_2README_autotoc_md1}

\begin{DoxyEnumerate}
\item \doxylink{index_section_01}{Introduction} ~\newline

\item \doxylink{index_section_02}{Build} ~\newline

\begin{DoxyEnumerate}
\item \doxylink{index_section_02_01}{Cmake configuration} ~\newline

\item \doxylink{index_section_02_02}{Make library targets} ~\newline

\item \doxylink{md__2home_2liwuen_2projects__dev_2pqc-engineering-ssec-23_2c-code_2README_section_02_03}{Make test targets} ~\newline

\end{DoxyEnumerate}
\item \doxylink{index_section_03}{Tests}
\item \doxylink{index_section_04}{Benchmarking}
\item \doxylink{index_section_05}{Benchmarking script}
\item \doxylink{index_section_06}{Remarks}
\item \doxylink{index_section_07}{Appendix\+: CPU benchmarking details}
\begin{DoxyEnumerate}
\item \doxylink{md__2home_2liwuen_2projects__dev_2pqc-engineering-ssec-23_2c-code_2README_section_07_01}{Benchmarking CPU cycles and Execution Time}
\end{DoxyEnumerate}
\item \doxylink{index_section_08}{References}
\end{DoxyEnumerate}

\label{index_section_01}%
\Hypertarget{index_section_01}%
 \hypertarget{md__2home_2liwuen_2projects__dev_2pqc-engineering-ssec-23_2c-code_2README_autotoc_md2}{}\doxysection{\texorpdfstring{1. Introduction}{1. Introduction}}\label{md__2home_2liwuen_2projects__dev_2pqc-engineering-ssec-23_2c-code_2README_autotoc_md2}
In this document, we present detailed instructions of the build, test and benchmarking of our source code. This detailed explanation aims to provide insights of our source code.

In the following sections, the list of all the supported primes is\+: {\ttfamily p254, p255, p381, p383, p398, p511, p575, p592, p765}, and {\ttfamily p783}.

\label{index_section_02}%
\Hypertarget{index_section_02}%
 \hypertarget{md__2home_2liwuen_2projects__dev_2pqc-engineering-ssec-23_2c-code_2README_autotoc_md3}{}\doxysection{\texorpdfstring{2. Build}{2. Build}}\label{md__2home_2liwuen_2projects__dev_2pqc-engineering-ssec-23_2c-code_2README_autotoc_md3}
The following instructions work on Linux using CMAKE. {\bfseries{NOTE\+: Only Intel x86\+\_\+64 is currently supported.}}

\label{index_section_02_01}%
\Hypertarget{index_section_02_01}%
 \hypertarget{md__2home_2liwuen_2projects__dev_2pqc-engineering-ssec-23_2c-code_2README_autotoc_md4}{}\doxysubsection{\texorpdfstring{2.\+1. Cmake configuration}{2.1. Cmake configuration}}\label{md__2home_2liwuen_2projects__dev_2pqc-engineering-ssec-23_2c-code_2README_autotoc_md4}
First configure the build directory with


\begin{DoxyCode}{0}
\DoxyCodeLine{pqc-\/engineering-\/ssec-\/23/c-\/code\$\ cmake\ -\/DCMAKE\_BUILD\_TYPE=<BUILD\_TYPE>\ -\/B\ <folder-\/build-\/name>}

\end{DoxyCode}


where {\ttfamily \texorpdfstring{$<$}{<}BUILD\+\_\+\+TYPE\texorpdfstring{$>$}{>}} is either {\bfseries{Release}} or {\bfseries{Debug}}. Optionally, add personal preference to CMAKE such as


\begin{DoxyCode}{0}
\DoxyCodeLine{-\/DCMAKE\_MAKE\_PROGRAM=path/to/ninja\ -\/G\ Ninja}

\end{DoxyCode}


An example of how to build the debug build type is shown below


\begin{DoxyCode}{0}
\DoxyCodeLine{pqc-\/engineering-\/ssec-\/23/c-\/code\$\ cmake\ -\/DCMAKE\_BUILD\_TYPE=Debug\ -\/B\ cmake-\/build-\/debug}

\end{DoxyCode}


\label{index_section_02_02}%
\Hypertarget{index_section_02_02}%
 \hypertarget{md__2home_2liwuen_2projects__dev_2pqc-engineering-ssec-23_2c-code_2README_autotoc_md5}{}\doxysubsection{\texorpdfstring{2.\+2. Make library targets}{2.2. Make library targets}}\label{md__2home_2liwuen_2projects__dev_2pqc-engineering-ssec-23_2c-code_2README_autotoc_md5}
Jump into the \texorpdfstring{$<$}{<}folder-\/build-\/name\texorpdfstring{$>$}{>} folder and build all target libraries for all supported primes\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{pqc-\/engineering-\/ssec-\/23/c-\/code\$\ cd\ <folder-\/build-\/name>}
\DoxyCodeLine{pqc-\/engineering-\/ssec-\/23/c-\/code/<folder-\/build-\/name>\$\ make\ -\/j8}

\end{DoxyCode}
 Example\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{pqc-\/engineering-\/ssec-\/23/c-\/code\$\ cd\ cmake-\/build-\/debug}
\DoxyCodeLine{pqc-\/engineering-\/ssec-\/23/c-\/code/cmake-\/build-\/debug\$\ make\ -\/j8}

\end{DoxyCode}


To build target libraries individually, simply run


\begin{DoxyCode}{0}
\DoxyCodeLine{pqc-\/engineering-\/ssec-\/23/c-\/code/<folder-\/build-\/name>\$\ make\ ssec-\/p<PRIME>}

\end{DoxyCode}
 where {\ttfamily \texorpdfstring{$<$}{<}PRIME\texorpdfstring{$>$}{>}} is one of the supported primes {\ttfamily p254, p255, p381, p383, p398, p511, p575, p592, p765}, and {\ttfamily p783}. Example\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{pqc-\/engineering-\/ssec-\/23/c-\/code/cmake-\/build-\/debug\$\ make\ ssec-\/p254}

\end{DoxyCode}


\label{md__2home_2liwuen_2projects__dev_2pqc-engineering-ssec-23_2c-code_2README_section_02_03}%
\Hypertarget{md__2home_2liwuen_2projects__dev_2pqc-engineering-ssec-23_2c-code_2README_section_02_03}%
 \hypertarget{md__2home_2liwuen_2projects__dev_2pqc-engineering-ssec-23_2c-code_2README_autotoc_md6}{}\doxysubsection{\texorpdfstring{2.\+3. Make test targets}{2.3. Make test targets}}\label{md__2home_2liwuen_2projects__dev_2pqc-engineering-ssec-23_2c-code_2README_autotoc_md6}
Building all targets from last step will create all test targets as well. To compile specific test target, simply run


\begin{DoxyCode}{0}
\DoxyCodeLine{pqc-\/engineering-\/ssec-\/23/c-\/code/<folder-\/build-\/name>\$\ make\ tests-\/ssec-\/p<PRIME>}

\end{DoxyCode}


where {\ttfamily \texorpdfstring{$<$}{<}PRIME\texorpdfstring{$>$}{>}} is one of the supported primes. Example\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{pqc-\/engineering-\/ssec-\/23/c-\/code/cmake-\/build-\/debug\$\ make\ tests-\/ssec-\/p254}

\end{DoxyCode}


\label{index_section_03}%
\Hypertarget{index_section_03}%
 \hypertarget{md__2home_2liwuen_2projects__dev_2pqc-engineering-ssec-23_2c-code_2README_autotoc_md7}{}\doxysection{\texorpdfstring{3. Tests}{3. Tests}}\label{md__2home_2liwuen_2projects__dev_2pqc-engineering-ssec-23_2c-code_2README_autotoc_md7}
Ctest is supported and can be used to call tests using regex, with the command


\begin{DoxyCode}{0}
\DoxyCodeLine{pqc-\/engineering-\/ssec-\/23/c-\/code/<folder-\/build-\/name>\$\ ctest}

\end{DoxyCode}


Example\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{pqc-\/engineering-\/ssec-\/23/c-\/code/cmake-\/build-\/debug\$\ ctest}

\end{DoxyCode}


will run all tests. To run all tests in parallel, run


\begin{DoxyCode}{0}
\DoxyCodeLine{pqc-\/engineering-\/ssec-\/23/c-\/code/<folder-\/build-\/name>\$\ make\ test-\/parallel}

\end{DoxyCode}


Example\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{pqc-\/engineering-\/ssec-\/23/c-\/code/cmake-\/build-\/debug\$\ make\ test-\/parallel}

\end{DoxyCode}


Another way to run the tests is provided by


\begin{DoxyCode}{0}
\DoxyCodeLine{pqc-\/engineering-\/ssec-\/23/c-\/code/<folder-\/build-\/name>\$\ \ ctest\ -\/V\ -\/R\ test}

\end{DoxyCode}


\label{index_section_04}%
\Hypertarget{index_section_04}%
 \hypertarget{md__2home_2liwuen_2projects__dev_2pqc-engineering-ssec-23_2c-code_2README_autotoc_md8}{}\doxysection{\texorpdfstring{4. Benchmarking}{4. Benchmarking}}\label{md__2home_2liwuen_2projects__dev_2pqc-engineering-ssec-23_2c-code_2README_autotoc_md8}
For benchmarking, the correct commands must be used when doing the first cmake.


\begin{DoxyCode}{0}
\DoxyCodeLine{pqc-\/engineering-\/ssec-\/23/c-\/code\$\ cmake\ -\/DCMAKE\_BUILD\_TYPE=Debug\ -\/DBENCHMARKING=CYCLES\ -\/DARCHITECTURE=x8664\ -\/B\ cmake-\/build-\/debug-\/cycles-\/x8664}
\DoxyCodeLine{pqc-\/engineering-\/ssec-\/23/c-\/code\$\ cmake\ -\/DCMAKE\_BUILD\_TYPE=Release\ -\/DBENCHMARKING=CYCLES\ -\/DARCHITECTURE=x8664\ -\/B\ cmake-\/build-\/release-\/cycles-\/x8664}
\DoxyCodeLine{pqc-\/engineering-\/ssec-\/23/c-\/code\$\ cmake\ -\/DCMAKE\_BUILD\_TYPE=Debug\ -\/DBENCHMARKING=TIME\ -\/DARCHITECTURE=x8664\ -\/B\ cmake-\/build-\/debug-\/time-\/x8664}
\DoxyCodeLine{pqc-\/engineering-\/ssec-\/23/c-\/code\$\ cmake\ -\/DCMAKE\_BUILD\_TYPE=Release\ -\/DBENCHMARKING=TIME\ -\/DARCHITECTURE=x8664\ -\/B\ cmake-\/build-\/release-\/time-\/x8664}

\end{DoxyCode}
 followed by 
\begin{DoxyCode}{0}
\DoxyCodeLine{pqc-\/engineering-\/ssec-\/23/c-\/code\$\ cd\ <folder-\/build-\/name>}
\DoxyCodeLine{pqc-\/engineering-\/ssec-\/23/c-\/code/<folder-\/build-\/name>\$\ make\ -\/j8}

\end{DoxyCode}


{\bfseries{NOTE\+:}} Benchmarking does not work for 
\begin{DoxyCode}{0}
\DoxyCodeLine{pqc-\/engineering-\/ssec-\/23/c-\/code\$\ cmake\ -\/DCMAKE\_BUILD\_TYPE=Release\ -\/B\ cmake-\/build-\/release}
\DoxyCodeLine{pqc-\/engineering-\/ssec-\/23/c-\/code\$\ cmake\ -\/DCMAKE\_BUILD\_TYPE=Debug\ -\/B\ cmake-\/build-\/debug}

\end{DoxyCode}
 In case you run the benchmarking in either one of these two build modes (without the {\ttfamily -\/DBENCHMARKING} and the {\ttfamily -\/DARCHITECTURE} flags), you will get the following error\+:



A successful built that can generate correct benchmarks is shown below.



After building using the correct flags, to run the benchmarks in verbose mode, run


\begin{DoxyCode}{0}
\DoxyCodeLine{pqc-\/engineering-\/ssec-\/23/c-\/code/<folder-\/build-\/name>\$\ ctest\ -\/V\ -\/R\ bench}

\end{DoxyCode}


Individual test suites can be run similarly as


\begin{DoxyCode}{0}
\DoxyCodeLine{pqc-\/engineering-\/ssec-\/23/c-\/code/<folder-\/build-\/name>\$\ ctest\ -\/V\ -\/R\ test-\/ssec-\/p<PRIME>-\/fp}

\end{DoxyCode}
 or a single test case by calling directly the test app as


\begin{DoxyCode}{0}
\DoxyCodeLine{pqc-\/engineering-\/ssec-\/23/c-\/code/<folder-\/build-\/name>\$\ cd\ tests}
\DoxyCodeLine{pqc-\/engineering-\/ssec-\/23/c-\/code/<folder-\/build-\/name>/tests\$\ ./tests-\/ssec-\/p<PRIME>\ tests/fp/add\_and\_sub}

\end{DoxyCode}


To run tests and benchmarks with more iterations, you can modify the number of times each test is evaluated with the following.


\begin{DoxyCode}{0}
\DoxyCodeLine{pqc-\/engineering-\/ssec-\/23/c-\/code/<folder-\/build-\/name>\$\ cd\ tests}
\DoxyCodeLine{pqc-\/engineering-\/ssec-\/23/c-\/code/<folder-\/build-\/name>/tests\$\ ./tests-\/ssec-\/p<PRIME>\ -\/-\/iterations\ 10000}
\DoxyCodeLine{pqc-\/engineering-\/ssec-\/23/c-\/code/<folder-\/build-\/name>/tests\$\ cd\ ..}
\DoxyCodeLine{pqc-\/engineering-\/ssec-\/23/c-\/code/<folder-\/build-\/name>\$\ cd\ benchmarks\ \ }
\DoxyCodeLine{pqc-\/engineering-\/ssec-\/23/c-\/code/<folder-\/build-\/name>/benchmarks\$\ ./benchmarks/benchmarks-\/ssec-\/p<PRIME>\ \#\ By\ default\ 10000}

\end{DoxyCode}


Finally, another way to run the benchmarks is given by


\begin{DoxyCode}{0}
\DoxyCodeLine{pqc-\/engineering-\/ssec-\/23/c-\/code/<folder-\/build-\/name>\$\ benchmarks/benchmarks-\/ssec-\/p<PRIME>\ \#\ By\ default\ 10000}

\end{DoxyCode}


\label{index_section_05}%
\Hypertarget{index_section_05}%
 \hypertarget{md__2home_2liwuen_2projects__dev_2pqc-engineering-ssec-23_2c-code_2README_autotoc_md9}{}\doxysection{\texorpdfstring{5. Benchmarking script}{5. Benchmarking script}}\label{md__2home_2liwuen_2projects__dev_2pqc-engineering-ssec-23_2c-code_2README_autotoc_md9}
A high-\/level benchmarking script exists in the {\ttfamily pqc-\/engineering-\/ssec-\/23/high-\/level-\/scripts} folder. To run it, first replace the {\ttfamily WORKSPACE} variable inside {\ttfamily benchmark\+\_\+02\+\_\+20250408.\+sh}, and then execute (in their respective folders)


\begin{DoxyCode}{0}
\DoxyCodeLine{pqc-\/engineering-\/ssec-\/23/c-\/code\$\ cmake\ -\/DCMAKE\_BUILD\_TYPE=Debug\ -\/DBENCHMARKING=CYCLES\ -\/DARCHITECTURE=x8664\ -\/B\ cmake-\/build-\/debug-\/cycles-\/x8664}
\DoxyCodeLine{pqc-\/engineering-\/ssec-\/23/c-\/code\$\ cmake\ -\/DCMAKE\_BUILD\_TYPE=Release\ -\/DBENCHMARKING=CYCLES\ -\/DARCHITECTURE=x8664\ -\/B\ cmake-\/build-\/release-\/cycles-\/x8664}
\DoxyCodeLine{pqc-\/engineering-\/ssec-\/23/c-\/code\$\ cmake\ -\/DCMAKE\_BUILD\_TYPE=Release\ -\/DBENCHMARKING=TIME\ -\/DARCHITECTURE=x8664\ -\/B\ cmake-\/build-\/debug-\/time-\/x8664}
\DoxyCodeLine{pqc-\/engineering-\/ssec-\/23/c-\/code\$\ cmake\ -\/DCMAKE\_BUILD\_TYPE=Release\ -\/DBENCHMARKING=TIME\ -\/DARCHITECTURE=x8664\ -\/B\ cmake-\/build-\/release-\/time-\/x8664}

\end{DoxyCode}
 and 
\begin{DoxyCode}{0}
\DoxyCodeLine{pqc-\/engineering-\/ssec-\/23/high-\/level-\/scripts\$\ mkdir\ results}
\DoxyCodeLine{pqc-\/engineering-\/ssec-\/23/high-\/level-\/scripts\$\ sudo\ bash\ benchmark\_02\_20250408.sh}

\end{DoxyCode}


This will create the benchmark results inside the {\ttfamily high-\/level-\/scripts/results} folder, with a timestamp.

\label{index_section_06}%
\Hypertarget{index_section_06}%
 \hypertarget{md__2home_2liwuen_2projects__dev_2pqc-engineering-ssec-23_2c-code_2README_autotoc_md10}{}\doxysection{\texorpdfstring{6. Remarks}{6. Remarks}}\label{md__2home_2liwuen_2projects__dev_2pqc-engineering-ssec-23_2c-code_2README_autotoc_md10}

\begin{DoxyItemize}
\item Our ASM implementation is based on \mbox{[}\texorpdfstring{$^\wedge$}{\string^}1\mbox{]}.
\item The test concerning the 2-\/isogeny and 3-\/isogeny chains employs {\bfseries{Magma}}. In particular, after running {\ttfamily ctest -\/V -\/R test} one can verify the correct of the chains by running
\end{DoxyItemize}


\begin{DoxyCode}{0}
\DoxyCodeLine{magma\ tests/TEST-\/<PRIME>-\/deg2.log\ }
\DoxyCodeLine{magma\ tests/TEST-\/<PRIME>-\/deg3.log\ }

\end{DoxyCode}


where {\ttfamily \texorpdfstring{$<$}{<}PRIME\texorpdfstring{$>$}{>}} is one of the included primes (e.\+g., see {\ttfamily src/asm/p\+YYY.\+s} or {\ttfamily src/parameters/p\+YYY.\+h}).

\label{index_section_07}%
\Hypertarget{index_section_07}%
 \hypertarget{md__2home_2liwuen_2projects__dev_2pqc-engineering-ssec-23_2c-code_2README_autotoc_md11}{}\doxysection{\texorpdfstring{7. Appendix\+: CPU benchmarking details}{7. Appendix: CPU benchmarking details}}\label{md__2home_2liwuen_2projects__dev_2pqc-engineering-ssec-23_2c-code_2README_autotoc_md11}
Our testbed consists of machine with a 12th Gen. \doxylink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{Intel(\+R)} \doxylink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{Core(\+TM)} i9-\/12900H CPU and 32 Gb of RAM, running Ubuntu 20.\+04.\+6 LTS (64 bits). To avoid the operating system to use multi-\/thread or additional performance boosts, we disabled the Turbo Boost via the kernel driver 
\begin{DoxyCode}{0}
\DoxyCodeLine{/sys/devices/system/cpu/intel\_pstate/no\_turbo}

\end{DoxyCode}
 and the hyperthread via 
\begin{DoxyCode}{0}
\DoxyCodeLine{/sys/devices/system/cpu/smt/control}

\end{DoxyCode}
 where the part of the script concerning disabling both Turbo Boost and hyperthreading is shown below. Note that these boosting disabling commands work in Intel CPUs, and similar ARM instructions or kernel modules are needed in case the benchmarking is desired to be performed in ARM CPUs.


\begin{DoxyCode}{0}
\DoxyCodeLine{\#!/bin/bash}
\DoxyCodeLine{TURBO=/sys/devices/system/cpu/intel\_pstate/no\_turbo}
\DoxyCodeLine{DISABLE\_TURBO=1}
\DoxyCodeLine{}
\DoxyCodeLine{HYPERT\_CMD=/sys/devices/system/cpu/smt/control}
\DoxyCodeLine{HYPERT\_STS=/sys/devices/system/cpu/smt/active}
\DoxyCodeLine{ENABLE\_HT=on}
\DoxyCodeLine{DISABLE\_HT=off}
\DoxyCodeLine{}
\DoxyCodeLine{disableTurbo()\ \{}
\DoxyCodeLine{\ \ \ \ echo\ \$\{DISABLE\_TURBO\}\ >\ \$\{TURBO\}}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{statusTurbo()\ \{}
\DoxyCodeLine{\ \ \ \ echo\ -\/n\ "{}Turbo\ status\ (0\ is\ enabled):\ "{}}
\DoxyCodeLine{\ \ \ \ cat\ \$\{TURBO\}}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{disableHyperThread()\ \{}
\DoxyCodeLine{\ \ \ \ echo\ \$\{DISABLE\_HT\}\ >\ \$\{HYPERT\_CMD\}}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{echo\ "{}Setup\ benchmark"{}}
\DoxyCodeLine{\#setup\ benchmark}
\DoxyCodeLine{disableTurbo}
\DoxyCodeLine{disableHyperThread}
\DoxyCodeLine{setPerformance}

\end{DoxyCode}


\label{md__2home_2liwuen_2projects__dev_2pqc-engineering-ssec-23_2c-code_2README_section_07_01}%
\Hypertarget{md__2home_2liwuen_2projects__dev_2pqc-engineering-ssec-23_2c-code_2README_section_07_01}%
 \hypertarget{md__2home_2liwuen_2projects__dev_2pqc-engineering-ssec-23_2c-code_2README_autotoc_md12}{}\doxysubsection{\texorpdfstring{7.\+1. Benchmarking CPU cycles and Execution Time}{7.1. Benchmarking CPU cycles and Execution Time}}\label{md__2home_2liwuen_2projects__dev_2pqc-engineering-ssec-23_2c-code_2README_autotoc_md12}
We perform two types of benchmarking\+: CPU cycles and Execution time, measured in nanoseconds. To measure the CPU cycle count between executions of our tests, we used the {\ttfamily rdtsc} assembly instruction for Intel architectures.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#if\ (defined(\_\_GNUC\_\_)\ ||\ defined(\_\_ICC)\ ||\ defined(\_\_SUNPRO\_C))}}
\DoxyCodeLine{\ \ \ \&\&\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{defined}}(\mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{\_\_x86\_64\_\_}})\ \&\&\ !\mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{defined}}(\mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{HAVE\_TICK\_COUNTER}})}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{ticks}};}
\DoxyCodeLine{\ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{\_\_inline\_\_}}\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{ticks}}\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{getticks}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{to__model_8m_ae72ab0a319852f0c6d43e6937c1063bd}{a}},\ \mbox{\hyperlink{namespacepip_1_1__vendor_1_1rich_1_1pretty_a1aabac6d068eef6a7bad3fdf50a05cc8}{d}};}
\DoxyCodeLine{\ \ \ \ \ \ \textcolor{keyword}{asm}\ \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"{}rdtsc"{}}\ :\ \textcolor{stringliteral}{"{}=a"{}}\ (\mbox{\hyperlink{to__model_8m_ae72ab0a319852f0c6d43e6937c1063bd}{a}}),\ \textcolor{stringliteral}{"{}=d"{}}\ (d));}
\DoxyCodeLine{\ \ \ \ \ \ \textcolor{keywordflow}{return}\ ((\mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{ticks}})\mbox{\hyperlink{to__model_8m_ae72ab0a319852f0c6d43e6937c1063bd}{a}})\ |\ (((\mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{ticks}})\mbox{\hyperlink{namespacepip_1_1__vendor_1_1rich_1_1pretty_a1aabac6d068eef6a7bad3fdf50a05cc8}{d}})\ <<\ 32);}
\DoxyCodeLine{\ \ \ \}}
\DoxyCodeLine{\ \ \ \mbox{\hyperlink{c-code_2src_2cycle_8h_af4fe9fb7498d9f0df140f6709c5affa8}{INLINE\_ELAPSED}}(\mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{\_\_inline\_\_}})}
\DoxyCodeLine{\ \ \ \textcolor{preprocessor}{\#define\ HAVE\_TICK\_COUNTER}}
\DoxyCodeLine{\textcolor{preprocessor}{\#endif}}

\end{DoxyCode}


and for the execution time, we use the {\ttfamily timespec\+\_\+get} instruction from {\ttfamily time.\+h}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ <time.h>}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{int}\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{timespec\_get}}(\textcolor{keyword}{struct}\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{timespec}}\ *\mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{ts}},\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{ctidh_8h_a6542a2bd356f5c5a12e03135a66e2dae}{base}});}

\end{DoxyCode}


and we use a custom {\ttfamily get\+\_\+nanos} function that measures the time in nanoseconds


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{static}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ get\_nanos(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{timespec}}\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{ts}};}
\DoxyCodeLine{\ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{timespec\_get}}(\&\mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{ts}},\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{TIME\_UTC}});}
\DoxyCodeLine{\ \ \ \textcolor{keywordflow}{return}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long})\mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{ts}}.tv\_sec\ *\ 1000000000ull\ +\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{ts}}.tv\_nsec;}
\DoxyCodeLine{\}}

\end{DoxyCode}
 \label{index_section_08}%
\Hypertarget{index_section_08}%
 \hypertarget{md__2home_2liwuen_2projects__dev_2pqc-engineering-ssec-23_2c-code_2README_autotoc_md13}{}\doxysection{\texorpdfstring{8. References}{8. References}}\label{md__2home_2liwuen_2projects__dev_2pqc-engineering-ssec-23_2c-code_2README_autotoc_md13}
\mbox{[}\texorpdfstring{$^\wedge$}{\string^}1\mbox{]}\+: CTIDH\+: faster constant-\/time CSIDH. (2021). IACR Transactions on Cryptographic Hardware and Embedded Systems, 2021(4), 351-\/387. \href{https://doi.org/10.46586/tches.v2021.i4.351-387}{\texttt{ https\+://doi.\+org/10.\+46586/tches.\+v2021.\+i4.\+351-\/387}} 