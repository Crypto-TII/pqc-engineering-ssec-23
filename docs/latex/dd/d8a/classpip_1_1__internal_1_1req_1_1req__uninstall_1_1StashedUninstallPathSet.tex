\doxysection{Stashed\+Uninstall\+Path\+Set Class Reference}
\hypertarget{classpip_1_1__internal_1_1req_1_1req__uninstall_1_1StashedUninstallPathSet}{}\label{classpip_1_1__internal_1_1req_1_1req__uninstall_1_1StashedUninstallPathSet}\index{StashedUninstallPathSet@{StashedUninstallPathSet}}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{None}} \mbox{\hyperlink{classpip_1_1__internal_1_1req_1_1req__uninstall_1_1StashedUninstallPathSet_abc1b785959b47505de72feabab160402}{\+\_\+\+\_\+init\+\_\+\+\_\+}} (\mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{self}})
\item 
str \mbox{\hyperlink{classpip_1_1__internal_1_1req_1_1req__uninstall_1_1StashedUninstallPathSet_acc0f84a7bfb4e23446d1d27486ef1219}{stash}} (\mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{self}}, str path)
\item 
\mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{None}} \mbox{\hyperlink{classpip_1_1__internal_1_1req_1_1req__uninstall_1_1StashedUninstallPathSet_a285af719b0165ca44e124c7efe8421fb}{commit}} (\mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{self}})
\item 
\mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{None}} \mbox{\hyperlink{classpip_1_1__internal_1_1req_1_1req__uninstall_1_1StashedUninstallPathSet_a0eedfb93b9acadd42d8eb1948492ab00}{rollback}} (\mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{self}})
\item 
bool \mbox{\hyperlink{classpip_1_1__internal_1_1req_1_1req__uninstall_1_1StashedUninstallPathSet_acc7e93f7abf6bf0b8f2cc083abf0cc20}{can\+\_\+rollback}} (\mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{self}})
\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
str \mbox{\hyperlink{classpip_1_1__internal_1_1req_1_1req__uninstall_1_1StashedUninstallPathSet_a5cbc39cf7c57bdac7ca1b856adcc7512}{\+\_\+get\+\_\+directory\+\_\+stash}} (\mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{self}}, str path)
\item 
str \mbox{\hyperlink{classpip_1_1__internal_1_1req_1_1req__uninstall_1_1StashedUninstallPathSet_a28384b9f46ae01f2605cc810b051e595}{\+\_\+get\+\_\+file\+\_\+stash}} (\mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{self}}, str path)
\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classpip_1_1__internal_1_1req_1_1req__uninstall_1_1StashedUninstallPathSet_a4ec61b0de77bfde6694bef67891e014c}{\+\_\+moves}}
\item 
\mbox{\hyperlink{classpip_1_1__internal_1_1req_1_1req__uninstall_1_1StashedUninstallPathSet_a035e45f0d9d7f2752a76841da954913f}{\+\_\+save\+\_\+dirs}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\begin{DoxyVerb}A set of file rename operations to stash files while
tentatively uninstalling them.\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{req__uninstall_8py_source_l00201}{201}} of file \mbox{\hyperlink{req__uninstall_8py_source}{req\+\_\+uninstall.\+py}}.



\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classpip_1_1__internal_1_1req_1_1req__uninstall_1_1StashedUninstallPathSet_abc1b785959b47505de72feabab160402}\label{classpip_1_1__internal_1_1req_1_1req__uninstall_1_1StashedUninstallPathSet_abc1b785959b47505de72feabab160402} 
\index{StashedUninstallPathSet@{StashedUninstallPathSet}!\_\_init\_\_@{\_\_init\_\_}}
\index{\_\_init\_\_@{\_\_init\_\_}!StashedUninstallPathSet@{StashedUninstallPathSet}}
\doxysubsubsection{\texorpdfstring{\_\_init\_\_()}{\_\_init\_\_()}}
{\footnotesize\ttfamily  \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{None}} \+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{req__uninstall_8py_source_l00205}{205}} of file \mbox{\hyperlink{req__uninstall_8py_source}{req\+\_\+uninstall.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00205\ \ \ \ \ \textcolor{keyword}{def\ }\_\_init\_\_(self)\ -\/>\ None:}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Mapping\ from\ source\ file\ root\ to\ [Adjacent]TempDirectory}}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ for\ files\ under\ that\ directory.}}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ self.\_save\_dirs:\ Dict[str,\ TempDirectory]\ =\ \{\}}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ (old\ path,\ new\ path)\ tuples\ for\ each\ move\ that\ may\ need}}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ to\ be\ undone.}}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ self.\_moves:\ List[Tuple[str,\ str]]\ =\ []}
\DoxyCodeLine{00212\ }

\end{DoxyCode}


References \mbox{\hyperlink{req__uninstall_8py_source_l00279}{Stashed\+Uninstall\+Path\+Set.\+\_\+moves}}, and \mbox{\hyperlink{req__uninstall_8py_source_l00280}{Stashed\+Uninstall\+Path\+Set.\+\_\+save\+\_\+dirs}}.



Referenced by \mbox{\hyperlink{typing__extensions_8py_source_l00832}{Protocol.\+\_\+\+\_\+init\+\_\+subclass\+\_\+\+\_\+()}}.

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=290pt]{dd/d8a/classpip_1_1__internal_1_1req_1_1req__uninstall_1_1StashedUninstallPathSet_abc1b785959b47505de72feabab160402_icgraph}
\end{center}
\end{figure}


\doxysubsection{Member Function Documentation}
\Hypertarget{classpip_1_1__internal_1_1req_1_1req__uninstall_1_1StashedUninstallPathSet_a5cbc39cf7c57bdac7ca1b856adcc7512}\label{classpip_1_1__internal_1_1req_1_1req__uninstall_1_1StashedUninstallPathSet_a5cbc39cf7c57bdac7ca1b856adcc7512} 
\index{StashedUninstallPathSet@{StashedUninstallPathSet}!\_get\_directory\_stash@{\_get\_directory\_stash}}
\index{\_get\_directory\_stash@{\_get\_directory\_stash}!StashedUninstallPathSet@{StashedUninstallPathSet}}
\doxysubsubsection{\texorpdfstring{\_get\_directory\_stash()}{\_get\_directory\_stash()}}
{\footnotesize\ttfamily  str \+\_\+get\+\_\+directory\+\_\+stash (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{str}]{path }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

\begin{DoxyVerb}Stashes a directory.

Directories are stashed adjacent to their original location if
possible, or else moved/copied into the user's temp dir.\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{req__uninstall_8py_source_l00213}{213}} of file \mbox{\hyperlink{req__uninstall_8py_source}{req\+\_\+uninstall.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00213\ \ \ \ \ \textcolor{keyword}{def\ }\_get\_directory\_stash(self,\ path:\ str)\ -\/>\ str:}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Stashes\ a\ directory.}}
\DoxyCodeLine{00215\ \textcolor{stringliteral}{}}
\DoxyCodeLine{00216\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Directories\ are\ stashed\ adjacent\ to\ their\ original\ location\ if}}
\DoxyCodeLine{00217\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ possible,\ or\ else\ moved/copied\ into\ the\ user's\ temp\ dir."{}"{}"{}}}
\DoxyCodeLine{00218\ }
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \ \ \ \ save\_dir:\ TempDirectory\ =\ AdjacentTempDirectory(path)}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ OSError:}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \ \ \ \ save\_dir\ =\ TempDirectory(kind=\textcolor{stringliteral}{"{}uninstall"{}})}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ self.\_save\_dirs[\mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{os.path.normcase}}(path)]\ =\ save\_dir}
\DoxyCodeLine{00224\ }
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{save\_dir.path}}}
\DoxyCodeLine{00226\ }

\end{DoxyCode}


References \mbox{\hyperlink{req__uninstall_8py_source_l00280}{Stashed\+Uninstall\+Path\+Set.\+\_\+save\+\_\+dirs}}, and \mbox{\hyperlink{prime__search_8m_source_l00010}{i}}.



Referenced by \mbox{\hyperlink{req__uninstall_8py_source_l00254}{Stashed\+Uninstall\+Path\+Set.\+stash()}}.

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=277pt]{dd/d8a/classpip_1_1__internal_1_1req_1_1req__uninstall_1_1StashedUninstallPathSet_a5cbc39cf7c57bdac7ca1b856adcc7512_icgraph}
\end{center}
\end{figure}
\Hypertarget{classpip_1_1__internal_1_1req_1_1req__uninstall_1_1StashedUninstallPathSet_a28384b9f46ae01f2605cc810b051e595}\label{classpip_1_1__internal_1_1req_1_1req__uninstall_1_1StashedUninstallPathSet_a28384b9f46ae01f2605cc810b051e595} 
\index{StashedUninstallPathSet@{StashedUninstallPathSet}!\_get\_file\_stash@{\_get\_file\_stash}}
\index{\_get\_file\_stash@{\_get\_file\_stash}!StashedUninstallPathSet@{StashedUninstallPathSet}}
\doxysubsubsection{\texorpdfstring{\_get\_file\_stash()}{\_get\_file\_stash()}}
{\footnotesize\ttfamily  str \+\_\+get\+\_\+file\+\_\+stash (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{str}]{path }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

\begin{DoxyVerb}Stashes a file.

If no root has been provided, one will be created for the directory
in the user's temp directory.\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{req__uninstall_8py_source_l00227}{227}} of file \mbox{\hyperlink{req__uninstall_8py_source}{req\+\_\+uninstall.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00227\ \ \ \ \ \textcolor{keyword}{def\ }\_get\_file\_stash(self,\ path:\ str)\ -\/>\ str:}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Stashes\ a\ file.}}
\DoxyCodeLine{00229\ \textcolor{stringliteral}{}}
\DoxyCodeLine{00230\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ If\ no\ root\ has\ been\ provided,\ one\ will\ be\ created\ for\ the\ directory}}
\DoxyCodeLine{00231\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ in\ the\ user's\ temp\ directory."{}"{}"{}}}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ path\ =\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{os.path.normcase}}(path)}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ head,\ old\_head\ =\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{os.path.dirname}}(path),\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ save\_dir\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{00235\ }
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ head\ !=\ old\_head:}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ save\_dir\ =\ self.\_save\_dirs[head]}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break}}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ KeyError:}
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \ \ \ \ head,\ old\_head\ =\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{os.path.dirname}}(head),\ head}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Did\ not\ find\ any\ suitable\ root}}
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \ \ \ \ head\ =\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{os.path.dirname}}(path)}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \ \ \ \ save\_dir\ =\ TempDirectory(kind=\textcolor{stringliteral}{"{}uninstall"{}})}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ \ \ \ \ self.\_save\_dirs[head]\ =\ save\_dir}
\DoxyCodeLine{00248\ }
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ relpath\ =\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{os.path.relpath}}(path,\ head)}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ relpath\ \textcolor{keywordflow}{and}\ relpath\ !=\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{os.path.curdir}}:}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{os.path.join}}(\mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{save\_dir.path}},\ relpath)}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{save\_dir.path}}}
\DoxyCodeLine{00253\ }

\end{DoxyCode}


References \mbox{\hyperlink{req__uninstall_8py_source_l00280}{Stashed\+Uninstall\+Path\+Set.\+\_\+save\+\_\+dirs}}, and \mbox{\hyperlink{prime__search_8m_source_l00010}{i}}.



Referenced by \mbox{\hyperlink{req__uninstall_8py_source_l00254}{Stashed\+Uninstall\+Path\+Set.\+stash()}}.

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=248pt]{dd/d8a/classpip_1_1__internal_1_1req_1_1req__uninstall_1_1StashedUninstallPathSet_a28384b9f46ae01f2605cc810b051e595_icgraph}
\end{center}
\end{figure}
\Hypertarget{classpip_1_1__internal_1_1req_1_1req__uninstall_1_1StashedUninstallPathSet_acc7e93f7abf6bf0b8f2cc083abf0cc20}\label{classpip_1_1__internal_1_1req_1_1req__uninstall_1_1StashedUninstallPathSet_acc7e93f7abf6bf0b8f2cc083abf0cc20} 
\index{StashedUninstallPathSet@{StashedUninstallPathSet}!can\_rollback@{can\_rollback}}
\index{can\_rollback@{can\_rollback}!StashedUninstallPathSet@{StashedUninstallPathSet}}
\doxysubsubsection{\texorpdfstring{can\_rollback()}{can\_rollback()}}
{\footnotesize\ttfamily  bool can\+\_\+rollback (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{req__uninstall_8py_source_l00302}{302}} of file \mbox{\hyperlink{req__uninstall_8py_source}{req\+\_\+uninstall.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00302\ \ \ \ \ \textcolor{keyword}{def\ }can\_rollback(self)\ -\/>\ bool:}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ bool(self.\_moves)}
\DoxyCodeLine{00304\ }
\DoxyCodeLine{00305\ }

\end{DoxyCode}


References \mbox{\hyperlink{req__uninstall_8py_source_l00279}{Stashed\+Uninstall\+Path\+Set.\+\_\+moves}}.

\Hypertarget{classpip_1_1__internal_1_1req_1_1req__uninstall_1_1StashedUninstallPathSet_a285af719b0165ca44e124c7efe8421fb}\label{classpip_1_1__internal_1_1req_1_1req__uninstall_1_1StashedUninstallPathSet_a285af719b0165ca44e124c7efe8421fb} 
\index{StashedUninstallPathSet@{StashedUninstallPathSet}!commit@{commit}}
\index{commit@{commit}!StashedUninstallPathSet@{StashedUninstallPathSet}}
\doxysubsubsection{\texorpdfstring{commit()}{commit()}}
{\footnotesize\ttfamily  \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{None}} commit (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Commits the uninstall by removing stashed files.\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{req__uninstall_8py_source_l00275}{275}} of file \mbox{\hyperlink{req__uninstall_8py_source}{req\+\_\+uninstall.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00275\ \ \ \ \ \textcolor{keyword}{def\ }commit(self)\ -\/>\ None:}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Commits\ the\ uninstall\ by\ removing\ stashed\ files."{}"{}"{}}}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ \_,\ save\_dir\ \textcolor{keywordflow}{in}\ self.\_save\_dirs.items():}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{save\_dir.cleanup}}()}
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ self.\_moves\ =\ []}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ self.\_save\_dirs\ =\ \{\}}
\DoxyCodeLine{00281\ }

\end{DoxyCode}


References \mbox{\hyperlink{req__uninstall_8py_source_l00280}{Stashed\+Uninstall\+Path\+Set.\+\_\+save\+\_\+dirs}}, and \mbox{\hyperlink{prime__search_8m_source_l00010}{i}}.



Referenced by \mbox{\hyperlink{req__uninstall_8py_source_l00282}{Stashed\+Uninstall\+Path\+Set.\+rollback()}}.

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=226pt]{dd/d8a/classpip_1_1__internal_1_1req_1_1req__uninstall_1_1StashedUninstallPathSet_a285af719b0165ca44e124c7efe8421fb_icgraph}
\end{center}
\end{figure}
\Hypertarget{classpip_1_1__internal_1_1req_1_1req__uninstall_1_1StashedUninstallPathSet_a0eedfb93b9acadd42d8eb1948492ab00}\label{classpip_1_1__internal_1_1req_1_1req__uninstall_1_1StashedUninstallPathSet_a0eedfb93b9acadd42d8eb1948492ab00} 
\index{StashedUninstallPathSet@{StashedUninstallPathSet}!rollback@{rollback}}
\index{rollback@{rollback}!StashedUninstallPathSet@{StashedUninstallPathSet}}
\doxysubsubsection{\texorpdfstring{rollback()}{rollback()}}
{\footnotesize\ttfamily  \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{None}} rollback (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Undoes the uninstall by moving stashed files back.\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{req__uninstall_8py_source_l00282}{282}} of file \mbox{\hyperlink{req__uninstall_8py_source}{req\+\_\+uninstall.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00282\ \ \ \ \ \textcolor{keyword}{def\ }rollback(self)\ -\/>\ None:}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Undoes\ the\ uninstall\ by\ moving\ stashed\ files\ back."{}"{}"{}}}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ p\ \textcolor{keywordflow}{in}\ self.\_moves:}
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{logger.info}}(\textcolor{stringliteral}{"{}Moving\ to\ \%s\(\backslash\)n\ from\ \%s"{}},\ *p)}
\DoxyCodeLine{00286\ }
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ new\_path,\ path\ \textcolor{keywordflow}{in}\ self.\_moves:}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{00289\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{logger.debug}}(\textcolor{stringliteral}{"{}Replacing\ \%s\ from\ \%s"{}},\ new\_path,\ path)}
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{os.path.isfile}}(new\_path)\ \textcolor{keywordflow}{or}\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{os.path.islink}}(new\_path):}
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{os.unlink}}(new\_path)}
\DoxyCodeLine{00292\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{elif}\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{os.path.isdir}}(new\_path):}
\DoxyCodeLine{00293\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rmtree(new\_path)}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ renames(path,\ new\_path)}
\DoxyCodeLine{00295\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ OSError\ \textcolor{keyword}{as}\ ex:}
\DoxyCodeLine{00296\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{logger.error}}(\textcolor{stringliteral}{"{}Failed\ to\ restore\ \%s"{}},\ new\_path)}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{logger.debug}}(\textcolor{stringliteral}{"{}Exception:\ \%s"{}},\ ex)}
\DoxyCodeLine{00298\ }
\DoxyCodeLine{00299\ \ \ \ \ \ \ \ \ self.commit()}
\DoxyCodeLine{00300\ }

\end{DoxyCode}


References \mbox{\hyperlink{req__uninstall_8py_source_l00279}{Stashed\+Uninstall\+Path\+Set.\+\_\+moves}}, \mbox{\hyperlink{req__uninstall_8py_source_l00275}{Stashed\+Uninstall\+Path\+Set.\+commit()}}, \mbox{\hyperlink{req__uninstall_8py_source_l00430}{Uninstall\+Path\+Set.\+commit()}}, \mbox{\hyperlink{distlib_2util_8py_source_l00639}{File\+Operator.\+commit()}}, and \mbox{\hyperlink{prime__search_8m_source_l00010}{i}}.

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{dd/d8a/classpip_1_1__internal_1_1req_1_1req__uninstall_1_1StashedUninstallPathSet_a0eedfb93b9acadd42d8eb1948492ab00_cgraph}
\end{center}
\end{figure}
\Hypertarget{classpip_1_1__internal_1_1req_1_1req__uninstall_1_1StashedUninstallPathSet_acc0f84a7bfb4e23446d1d27486ef1219}\label{classpip_1_1__internal_1_1req_1_1req__uninstall_1_1StashedUninstallPathSet_acc0f84a7bfb4e23446d1d27486ef1219} 
\index{StashedUninstallPathSet@{StashedUninstallPathSet}!stash@{stash}}
\index{stash@{stash}!StashedUninstallPathSet@{StashedUninstallPathSet}}
\doxysubsubsection{\texorpdfstring{stash()}{stash()}}
{\footnotesize\ttfamily  str stash (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{str}]{path }\end{DoxyParamCaption})}

\begin{DoxyVerb}Stashes the directory or file and returns its new location.
Handle symlinks as files to avoid modifying the symlink targets.
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{req__uninstall_8py_source_l00254}{254}} of file \mbox{\hyperlink{req__uninstall_8py_source}{req\+\_\+uninstall.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00254\ \ \ \ \ \textcolor{keyword}{def\ }stash(self,\ path:\ str)\ -\/>\ str:}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Stashes\ the\ directory\ or\ file\ and\ returns\ its\ new\ location.}}
\DoxyCodeLine{00256\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Handle\ symlinks\ as\ files\ to\ avoid\ modifying\ the\ symlink\ targets.}}
\DoxyCodeLine{00257\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ path\_is\_dir\ =\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{os.path.isdir}}(path)\ \textcolor{keywordflow}{and}\ \textcolor{keywordflow}{not}\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{os.path.islink}}(path)}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ path\_is\_dir:}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \ \ \ \ new\_path\ =\ self.\_get\_directory\_stash(path)}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \ \ \ \ new\_path\ =\ self.\_get\_file\_stash(path)}
\DoxyCodeLine{00263\ }
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ self.\_moves.append((path,\ new\_path))}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ path\_is\_dir\ \textcolor{keywordflow}{and}\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{os.path.isdir}}(new\_path):}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ If\ we're\ moving\ a\ directory,\ we\ need\ to}}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ remove\ the\ destination\ first\ or\ else\ it\ will\ be}}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ moved\ to\ inside\ the\ existing\ directory.}}
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ We\ just\ created\ new\_path\ ourselves,\ so\ it\ will}}
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ be\ removable.}}
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{os.rmdir}}(new\_path)}
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ renames(path,\ new\_path)}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ new\_path}
\DoxyCodeLine{00274\ }

\end{DoxyCode}


References \mbox{\hyperlink{req__uninstall_8py_source_l00213}{Stashed\+Uninstall\+Path\+Set.\+\_\+get\+\_\+directory\+\_\+stash()}}, \mbox{\hyperlink{req__uninstall_8py_source_l00227}{Stashed\+Uninstall\+Path\+Set.\+\_\+get\+\_\+file\+\_\+stash()}}, \mbox{\hyperlink{req__uninstall_8py_source_l00279}{Stashed\+Uninstall\+Path\+Set.\+\_\+moves}}, and \mbox{\hyperlink{prime__search_8m_source_l00010}{i}}.

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=277pt]{dd/d8a/classpip_1_1__internal_1_1req_1_1req__uninstall_1_1StashedUninstallPathSet_acc0f84a7bfb4e23446d1d27486ef1219_cgraph}
\end{center}
\end{figure}


\doxysubsection{Field Documentation}
\Hypertarget{classpip_1_1__internal_1_1req_1_1req__uninstall_1_1StashedUninstallPathSet_a4ec61b0de77bfde6694bef67891e014c}\label{classpip_1_1__internal_1_1req_1_1req__uninstall_1_1StashedUninstallPathSet_a4ec61b0de77bfde6694bef67891e014c} 
\index{StashedUninstallPathSet@{StashedUninstallPathSet}!\_moves@{\_moves}}
\index{\_moves@{\_moves}!StashedUninstallPathSet@{StashedUninstallPathSet}}
\doxysubsubsection{\texorpdfstring{\_moves}{\_moves}}
{\footnotesize\ttfamily \+\_\+moves\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line \mbox{\hyperlink{req__uninstall_8py_source_l00279}{279}} of file \mbox{\hyperlink{req__uninstall_8py_source}{req\+\_\+uninstall.\+py}}.



Referenced by \mbox{\hyperlink{req__uninstall_8py_source_l00205}{Stashed\+Uninstall\+Path\+Set.\+\_\+\+\_\+init\+\_\+\+\_\+()}}, \mbox{\hyperlink{req__uninstall_8py_source_l00302}{Stashed\+Uninstall\+Path\+Set.\+can\+\_\+rollback()}}, \mbox{\hyperlink{req__uninstall_8py_source_l00282}{Stashed\+Uninstall\+Path\+Set.\+rollback()}}, and \mbox{\hyperlink{req__uninstall_8py_source_l00254}{Stashed\+Uninstall\+Path\+Set.\+stash()}}.

\Hypertarget{classpip_1_1__internal_1_1req_1_1req__uninstall_1_1StashedUninstallPathSet_a035e45f0d9d7f2752a76841da954913f}\label{classpip_1_1__internal_1_1req_1_1req__uninstall_1_1StashedUninstallPathSet_a035e45f0d9d7f2752a76841da954913f} 
\index{StashedUninstallPathSet@{StashedUninstallPathSet}!\_save\_dirs@{\_save\_dirs}}
\index{\_save\_dirs@{\_save\_dirs}!StashedUninstallPathSet@{StashedUninstallPathSet}}
\doxysubsubsection{\texorpdfstring{\_save\_dirs}{\_save\_dirs}}
{\footnotesize\ttfamily \+\_\+save\+\_\+dirs\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line \mbox{\hyperlink{req__uninstall_8py_source_l00280}{280}} of file \mbox{\hyperlink{req__uninstall_8py_source}{req\+\_\+uninstall.\+py}}.



Referenced by \mbox{\hyperlink{req__uninstall_8py_source_l00205}{Stashed\+Uninstall\+Path\+Set.\+\_\+\+\_\+init\+\_\+\+\_\+()}}, \mbox{\hyperlink{req__uninstall_8py_source_l00213}{Stashed\+Uninstall\+Path\+Set.\+\_\+get\+\_\+directory\+\_\+stash()}}, \mbox{\hyperlink{req__uninstall_8py_source_l00227}{Stashed\+Uninstall\+Path\+Set.\+\_\+get\+\_\+file\+\_\+stash()}}, and \mbox{\hyperlink{req__uninstall_8py_source_l00275}{Stashed\+Uninstall\+Path\+Set.\+commit()}}.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
/home/liwuen/projects\+\_\+dev/pqc-\/engineering-\/ssec-\/23/venv/lib/python3.\+12/site-\/packages/pip/\+\_\+internal/req/\mbox{\hyperlink{req__uninstall_8py}{req\+\_\+uninstall.\+py}}\end{DoxyCompactItemize}
