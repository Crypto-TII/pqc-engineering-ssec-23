\doxysection{pip.\+\_\+internal.\+utils.\+glibc Namespace Reference}
\hypertarget{namespacepip_1_1__internal_1_1utils_1_1glibc}{}\label{namespacepip_1_1__internal_1_1utils_1_1glibc}\index{pip.\_internal.utils.glibc@{pip.\_internal.utils.glibc}}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
Optional\mbox{[}str\mbox{]} \mbox{\hyperlink{namespacepip_1_1__internal_1_1utils_1_1glibc_af8b7d32b023ec735e1f39fea48831ae0}{glibc\+\_\+version\+\_\+string}} ()
\item 
Optional\mbox{[}str\mbox{]} \mbox{\hyperlink{namespacepip_1_1__internal_1_1utils_1_1glibc_a98197a3ddadbcb4083358ed16fc22313}{glibc\+\_\+version\+\_\+string\+\_\+confstr}} ()
\item 
Optional\mbox{[}str\mbox{]} \mbox{\hyperlink{namespacepip_1_1__internal_1_1utils_1_1glibc_a8aec9b26f2cae2f26b4d8c09f8088f36}{glibc\+\_\+version\+\_\+string\+\_\+ctypes}} ()
\item 
Tuple\mbox{[}str, str\mbox{]} \mbox{\hyperlink{namespacepip_1_1__internal_1_1utils_1_1glibc_aa5541ac165e805d089a5eefc58a1fcb5}{libc\+\_\+ver}} ()
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\Hypertarget{namespacepip_1_1__internal_1_1utils_1_1glibc_af8b7d32b023ec735e1f39fea48831ae0}\label{namespacepip_1_1__internal_1_1utils_1_1glibc_af8b7d32b023ec735e1f39fea48831ae0} 
\index{pip.\_internal.utils.glibc@{pip.\_internal.utils.glibc}!glibc\_version\_string@{glibc\_version\_string}}
\index{glibc\_version\_string@{glibc\_version\_string}!pip.\_internal.utils.glibc@{pip.\_internal.utils.glibc}}
\doxysubsubsection{\texorpdfstring{glibc\_version\_string()}{glibc\_version\_string()}}
{\footnotesize\ttfamily  Optional\mbox{[}str\mbox{]} glibc\+\_\+version\+\_\+string (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{glibc_8py_source_l00006}{6}} of file \mbox{\hyperlink{glibc_8py_source}{glibc.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00006\ \textcolor{keyword}{def\ }glibc\_version\_string()\ -\/>\ Optional[str]:}
\DoxyCodeLine{00007\ \ \ \ \ \textcolor{stringliteral}{"{}Returns\ glibc\ version\ string,\ or\ None\ if\ not\ using\ glibc."{}}}
\DoxyCodeLine{00008\ \ \ \ \ \textcolor{keywordflow}{return}\ glibc\_version\_string\_confstr()\ \textcolor{keywordflow}{or}\ glibc\_version\_string\_ctypes()}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ }

\end{DoxyCode}


References \mbox{\hyperlink{glibc_8py_source_l00011}{pip.\+\_\+internal.\+utils.\+glibc.\+glibc\+\_\+version\+\_\+string\+\_\+confstr()}}, and \mbox{\hyperlink{glibc_8py_source_l00031}{pip.\+\_\+internal.\+utils.\+glibc.\+glibc\+\_\+version\+\_\+string\+\_\+ctypes()}}.



Referenced by \mbox{\hyperlink{glibc_8py_source_l00078}{pip.\+\_\+internal.\+utils.\+glibc.\+libc\+\_\+ver()}}.

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=321pt]{dd/d38/namespacepip_1_1__internal_1_1utils_1_1glibc_af8b7d32b023ec735e1f39fea48831ae0_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=268pt]{dd/d38/namespacepip_1_1__internal_1_1utils_1_1glibc_af8b7d32b023ec735e1f39fea48831ae0_icgraph}
\end{center}
\end{figure}
\Hypertarget{namespacepip_1_1__internal_1_1utils_1_1glibc_a98197a3ddadbcb4083358ed16fc22313}\label{namespacepip_1_1__internal_1_1utils_1_1glibc_a98197a3ddadbcb4083358ed16fc22313} 
\index{pip.\_internal.utils.glibc@{pip.\_internal.utils.glibc}!glibc\_version\_string\_confstr@{glibc\_version\_string\_confstr}}
\index{glibc\_version\_string\_confstr@{glibc\_version\_string\_confstr}!pip.\_internal.utils.glibc@{pip.\_internal.utils.glibc}}
\doxysubsubsection{\texorpdfstring{glibc\_version\_string\_confstr()}{glibc\_version\_string\_confstr()}}
{\footnotesize\ttfamily  Optional\mbox{[}str\mbox{]} glibc\+\_\+version\+\_\+string\+\_\+confstr (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{glibc_8py_source_l00011}{11}} of file \mbox{\hyperlink{glibc_8py_source}{glibc.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00011\ \textcolor{keyword}{def\ }glibc\_version\_string\_confstr()\ -\/>\ Optional[str]:}
\DoxyCodeLine{00012\ \ \ \ \ \textcolor{stringliteral}{"{}Primary\ implementation\ of\ glibc\_version\_string\ using\ os.confstr."{}}}
\DoxyCodeLine{00013\ \ \ \ \ \textcolor{comment}{\#\ os.confstr\ is\ quite\ a\ bit\ faster\ than\ ctypes.DLL.\ It's\ also\ less\ likely}}
\DoxyCodeLine{00014\ \ \ \ \ \textcolor{comment}{\#\ to\ be\ broken\ or\ missing.\ This\ strategy\ is\ used\ in\ the\ standard\ library}}
\DoxyCodeLine{00015\ \ \ \ \ \textcolor{comment}{\#\ platform\ module:}}
\DoxyCodeLine{00016\ \ \ \ \ \textcolor{comment}{\#\ https://github.com/python/cpython/blob/fcf1d003bf4f0100c9d0921ff3d70e1127ca1b71/Lib/platform.py\#L175-\/L183}}
\DoxyCodeLine{00017\ \ \ \ \ \textcolor{keywordflow}{if}\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{sys.platform}}\ ==\ \textcolor{stringliteral}{"{}win32"{}}:}
\DoxyCodeLine{00018\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{00019\ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{00020\ \ \ \ \ \ \ \ \ gnu\_libc\_version\ =\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{os.confstr}}(\textcolor{stringliteral}{"{}CS\_GNU\_LIBC\_VERSION"{}})}
\DoxyCodeLine{00021\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ gnu\_libc\_version\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{00022\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{00023\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ os.confstr("{}CS\_GNU\_LIBC\_VERSION"{})\ returns\ a\ string\ like\ "{}glibc\ 2.17"{}:}}
\DoxyCodeLine{00024\ \ \ \ \ \ \ \ \ \_,\ version\ =\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{gnu\_libc\_version.split}}()}
\DoxyCodeLine{00025\ \ \ \ \ \textcolor{keywordflow}{except}\ (AttributeError,\ OSError,\ ValueError):}
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ os.confstr()\ or\ CS\_GNU\_LIBC\_VERSION\ not\ available\ (or\ a\ bad\ value)...}}
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{keywordflow}{return}\ version}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ }

\end{DoxyCode}


References \mbox{\hyperlink{prime__search_8m_source_l00010}{i}}.



Referenced by \mbox{\hyperlink{glibc_8py_source_l00006}{pip.\+\_\+internal.\+utils.\+glibc.\+glibc\+\_\+version\+\_\+string()}}.

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{dd/d38/namespacepip_1_1__internal_1_1utils_1_1glibc_a98197a3ddadbcb4083358ed16fc22313_icgraph}
\end{center}
\end{figure}
\Hypertarget{namespacepip_1_1__internal_1_1utils_1_1glibc_a8aec9b26f2cae2f26b4d8c09f8088f36}\label{namespacepip_1_1__internal_1_1utils_1_1glibc_a8aec9b26f2cae2f26b4d8c09f8088f36} 
\index{pip.\_internal.utils.glibc@{pip.\_internal.utils.glibc}!glibc\_version\_string\_ctypes@{glibc\_version\_string\_ctypes}}
\index{glibc\_version\_string\_ctypes@{glibc\_version\_string\_ctypes}!pip.\_internal.utils.glibc@{pip.\_internal.utils.glibc}}
\doxysubsubsection{\texorpdfstring{glibc\_version\_string\_ctypes()}{glibc\_version\_string\_ctypes()}}
{\footnotesize\ttfamily  Optional\mbox{[}str\mbox{]} glibc\+\_\+version\+\_\+string\+\_\+ctypes (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{glibc_8py_source_l00031}{31}} of file \mbox{\hyperlink{glibc_8py_source}{glibc.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00031\ \textcolor{keyword}{def\ }glibc\_version\_string\_ctypes()\ -\/>\ Optional[str]:}
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{stringliteral}{"{}Fallback\ implementation\ of\ glibc\_version\_string\ using\ ctypes."{}}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \textcolor{keyword}{import}\ ctypes}
\DoxyCodeLine{00036\ \ \ \ \ \textcolor{keywordflow}{except}\ ImportError:}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{comment}{\#\ ctypes.CDLL(None)\ internally\ calls\ dlopen(NULL),\ and\ as\ the\ dlopen}}
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{comment}{\#\ manpage\ says,\ "{}If\ filename\ is\ NULL,\ then\ the\ returned\ handle\ is\ for\ the}}
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{comment}{\#\ main\ program"{}.\ This\ way\ we\ can\ let\ the\ linker\ do\ the\ work\ to\ figure\ out}}
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{comment}{\#\ which\ libc\ our\ process\ is\ actually\ using.}}
\DoxyCodeLine{00043\ \ \ \ \ process\_namespace\ =\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{ctypes.CDLL}}(\textcolor{keywordtype}{None})}
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ gnu\_get\_libc\_version\ =\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{process\_namespace.gnu\_get\_libc\_version}}}
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{keywordflow}{except}\ AttributeError:}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Symbol\ doesn't\ exist\ -\/>\ therefore,\ we\ are\ not\ linked\ to}}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ glibc.}}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{comment}{\#\ Call\ gnu\_get\_libc\_version,\ which\ returns\ a\ string\ like\ "{}2.5"{}}}
\DoxyCodeLine{00052\ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{gnu\_get\_libc\_version.restype}}\ =\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{ctypes.c\_char\_p}}}
\DoxyCodeLine{00053\ \ \ \ \ version\_str\ =\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{gnu\_get\_libc\_version}}()}
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{comment}{\#\ py2\ /\ py3\ compatibility:}}
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{isinstance}}(version\_str,\ str):}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ version\_str\ =\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{version\_str.decode}}(\textcolor{stringliteral}{"{}ascii"{}})}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keywordflow}{return}\ version\_str}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \textcolor{comment}{\#\ platform.libc\_ver\ regularly\ returns\ completely\ nonsensical\ glibc}}
\DoxyCodeLine{00062\ \textcolor{comment}{\#\ versions.\ E.g.\ on\ my\ computer,\ platform\ says:}}
\DoxyCodeLine{00063\ \textcolor{comment}{\#}}
\DoxyCodeLine{00064\ \textcolor{comment}{\#\ \ \ \string~\$\ python2.7\ -\/c\ 'import\ platform;\ print(platform.libc\_ver())'}}
\DoxyCodeLine{00065\ \textcolor{comment}{\#\ \ \ ('glibc',\ '2.7')}}
\DoxyCodeLine{00066\ \textcolor{comment}{\#\ \ \ \string~\$\ python3.5\ -\/c\ 'import\ platform;\ print(platform.libc\_ver())'}}
\DoxyCodeLine{00067\ \textcolor{comment}{\#\ \ \ ('glibc',\ '2.9')}}
\DoxyCodeLine{00068\ \textcolor{comment}{\#}}
\DoxyCodeLine{00069\ \textcolor{comment}{\#\ But\ the\ truth\ is:}}
\DoxyCodeLine{00070\ \textcolor{comment}{\#}}
\DoxyCodeLine{00071\ \textcolor{comment}{\#\ \ \ \string~\$\ ldd\ -\/-\/version}}
\DoxyCodeLine{00072\ \textcolor{comment}{\#\ \ \ ldd\ (Debian\ GLIBC\ 2.22-\/11)\ 2.22}}
\DoxyCodeLine{00073\ \textcolor{comment}{\#}}
\DoxyCodeLine{00074\ \textcolor{comment}{\#\ This\ is\ unfortunate,\ because\ it\ means\ that\ the\ linehaul\ data\ on\ libc}}
\DoxyCodeLine{00075\ \textcolor{comment}{\#\ versions\ that\ was\ generated\ by\ pip\ 8.1.2\ and\ earlier\ is\ useless\ and}}
\DoxyCodeLine{00076\ \textcolor{comment}{\#\ misleading.\ Solution:\ instead\ of\ using\ platform,\ use\ our\ code\ that\ actually}}
\DoxyCodeLine{00077\ \textcolor{comment}{\#\ works.}}

\end{DoxyCode}


References \mbox{\hyperlink{prime__search_8m_source_l00010}{i}}.



Referenced by \mbox{\hyperlink{glibc_8py_source_l00006}{pip.\+\_\+internal.\+utils.\+glibc.\+glibc\+\_\+version\+\_\+string()}}.

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{dd/d38/namespacepip_1_1__internal_1_1utils_1_1glibc_a8aec9b26f2cae2f26b4d8c09f8088f36_icgraph}
\end{center}
\end{figure}
\Hypertarget{namespacepip_1_1__internal_1_1utils_1_1glibc_aa5541ac165e805d089a5eefc58a1fcb5}\label{namespacepip_1_1__internal_1_1utils_1_1glibc_aa5541ac165e805d089a5eefc58a1fcb5} 
\index{pip.\_internal.utils.glibc@{pip.\_internal.utils.glibc}!libc\_ver@{libc\_ver}}
\index{libc\_ver@{libc\_ver}!pip.\_internal.utils.glibc@{pip.\_internal.utils.glibc}}
\doxysubsubsection{\texorpdfstring{libc\_ver()}{libc\_ver()}}
{\footnotesize\ttfamily  Tuple\mbox{[}str, str\mbox{]} libc\+\_\+ver (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\begin{DoxyVerb}Try to determine the glibc version

Returns a tuple of strings (lib, version) which default to empty strings
in case the lookup fails.
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{glibc_8py_source_l00078}{78}} of file \mbox{\hyperlink{glibc_8py_source}{glibc.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00078\ \textcolor{keyword}{def\ }libc\_ver()\ -\/>\ Tuple[str,\ str]:}
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Try\ to\ determine\ the\ glibc\ version}}
\DoxyCodeLine{00080\ \textcolor{stringliteral}{}}
\DoxyCodeLine{00081\ \textcolor{stringliteral}{\ \ \ \ Returns\ a\ tuple\ of\ strings\ (lib,\ version)\ which\ default\ to\ empty\ strings}}
\DoxyCodeLine{00082\ \textcolor{stringliteral}{\ \ \ \ in\ case\ the\ lookup\ fails.}}
\DoxyCodeLine{00083\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{00084\ \ \ \ \ glibc\_version\ =\ glibc\_version\_string()}
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{keywordflow}{if}\ glibc\_version\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (\textcolor{stringliteral}{"{}"{}},\ \textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (\textcolor{stringliteral}{"{}glibc"{}},\ glibc\_version)}

\end{DoxyCode}


References \mbox{\hyperlink{glibc_8py_source_l00006}{pip.\+\_\+internal.\+utils.\+glibc.\+glibc\+\_\+version\+\_\+string()}}.

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{dd/d38/namespacepip_1_1__internal_1_1utils_1_1glibc_aa5541ac165e805d089a5eefc58a1fcb5_cgraph}
\end{center}
\end{figure}
