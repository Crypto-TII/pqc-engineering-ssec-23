\doxysection{pip.\+\_\+internal.\+network.\+download Namespace Reference}
\hypertarget{namespacepip_1_1__internal_1_1network_1_1download}{}\label{namespacepip_1_1__internal_1_1network_1_1download}\index{pip.\_internal.network.download@{pip.\_internal.network.download}}
\doxysubsubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classpip_1_1__internal_1_1network_1_1download_1_1BatchDownloader}{Batch\+Downloader}}
\item 
class \mbox{\hyperlink{classpip_1_1__internal_1_1network_1_1download_1_1Downloader}{Downloader}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
Optional\mbox{[}int\mbox{]} \mbox{\hyperlink{namespacepip_1_1__internal_1_1network_1_1download_a0c05c1be75525de49ed4e12b1e0e2681}{\+\_\+get\+\_\+http\+\_\+response\+\_\+size}} (\mbox{\hyperlink{classpip_1_1__vendor_1_1requests_1_1models_1_1Response}{Response}} \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{resp}})
\item 
Iterable\mbox{[}bytes\mbox{]} \mbox{\hyperlink{namespacepip_1_1__internal_1_1network_1_1download_a7f2e867209b162e3715eb1a0c2405e10}{\+\_\+prepare\+\_\+download}} (\mbox{\hyperlink{classpip_1_1__vendor_1_1requests_1_1models_1_1Response}{Response}} \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{resp}}, \mbox{\hyperlink{classpip_1_1__internal_1_1models_1_1link_1_1Link}{Link}} link, str progress\+\_\+bar)
\item 
str \mbox{\hyperlink{namespacepip_1_1__internal_1_1network_1_1download_a3ad12e07333275aba8cbd817d152afe1}{sanitize\+\_\+content\+\_\+filename}} (str filename)
\item 
str \mbox{\hyperlink{namespacepip_1_1__internal_1_1network_1_1download_a6289b27c6afff04550bb5808b484b4ef}{parse\+\_\+content\+\_\+disposition}} (str \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{content\+\_\+disposition}}, str \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{default\+\_\+filename}})
\item 
str \mbox{\hyperlink{namespacepip_1_1__internal_1_1network_1_1download_a41baacf305c8dfebd740372430df40cc}{\+\_\+get\+\_\+http\+\_\+response\+\_\+filename}} (\mbox{\hyperlink{classpip_1_1__vendor_1_1requests_1_1models_1_1Response}{Response}} \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{resp}}, \mbox{\hyperlink{classpip_1_1__internal_1_1models_1_1link_1_1Link}{Link}} link)
\item 
\mbox{\hyperlink{classpip_1_1__vendor_1_1requests_1_1models_1_1Response}{Response}} \mbox{\hyperlink{namespacepip_1_1__internal_1_1network_1_1download_a9d3cbfed7d037fec8367df482ea1f765}{\+\_\+http\+\_\+get\+\_\+download}} (Pip\+Session session, \mbox{\hyperlink{classpip_1_1__internal_1_1models_1_1link_1_1Link}{Link}} link)
\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacepip_1_1__internal_1_1network_1_1download_a0b14e488ae28d98d262453f3e9cd6e4d}{logger}} = logging.\+get\+Logger(\+\_\+\+\_\+name\+\_\+\+\_\+)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\begin{DoxyVerb}Download files with progress indicators.
\end{DoxyVerb}
 

\doxysubsection{Function Documentation}
\Hypertarget{namespacepip_1_1__internal_1_1network_1_1download_a41baacf305c8dfebd740372430df40cc}\label{namespacepip_1_1__internal_1_1network_1_1download_a41baacf305c8dfebd740372430df40cc} 
\index{pip.\_internal.network.download@{pip.\_internal.network.download}!\_get\_http\_response\_filename@{\_get\_http\_response\_filename}}
\index{\_get\_http\_response\_filename@{\_get\_http\_response\_filename}!pip.\_internal.network.download@{pip.\_internal.network.download}}
\doxysubsubsection{\texorpdfstring{\_get\_http\_response\_filename()}{\_get\_http\_response\_filename()}}
{\footnotesize\ttfamily  str \+\_\+get\+\_\+http\+\_\+response\+\_\+filename (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classpip_1_1__vendor_1_1requests_1_1models_1_1Response}{Response}}}]{resp,  }\item[{\mbox{\hyperlink{classpip_1_1__internal_1_1models_1_1link_1_1Link}{Link}}}]{link }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

\begin{DoxyVerb}Get an ideal filename from the given HTTP response, falling back to
the link filename if not provided.
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{network_2download_8py_source_l00094}{94}} of file \mbox{\hyperlink{network_2download_8py_source}{download.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00094\ \textcolor{keyword}{def\ }\_get\_http\_response\_filename(resp:\ Response,\ link:\ Link)\ -\/>\ str:}
\DoxyCodeLine{00095\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Get\ an\ ideal\ filename\ from\ the\ given\ HTTP\ response,\ falling\ back\ to}}
\DoxyCodeLine{00096\ \textcolor{stringliteral}{\ \ \ \ the\ link\ filename\ if\ not\ provided.}}
\DoxyCodeLine{00097\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{00098\ \ \ \ \ filename\ =\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{link.filename}}\ \ \textcolor{comment}{\#\ fallback}}
\DoxyCodeLine{00099\ \ \ \ \ \textcolor{comment}{\#\ Have\ a\ look\ at\ the\ Content-\/Disposition\ header\ for\ a\ better\ guess}}
\DoxyCodeLine{00100\ \ \ \ \ content\_disposition\ =\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{resp.headers.get}}(\textcolor{stringliteral}{"{}content-\/disposition"{}})}
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{keywordflow}{if}\ content\_disposition:}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ filename\ =\ parse\_content\_disposition(content\_disposition,\ filename)}
\DoxyCodeLine{00103\ \ \ \ \ ext:\ Optional[str]\ =\ splitext(filename)[1]}
\DoxyCodeLine{00104\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ ext:}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ ext\ =\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{mimetypes.guess\_extension}}(\mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{resp.headers.get}}(\textcolor{stringliteral}{"{}content-\/type"{}},\ \textcolor{stringliteral}{"{}"{}}))}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ext:}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \ \ \ \ filename\ +=\ ext}
\DoxyCodeLine{00108\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ ext\ \textcolor{keywordflow}{and}\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{link.url}}\ !=\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{resp.url}}:}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ ext\ =\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{os.path.splitext}}(\mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{resp.url}})[1]}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ext:}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \ \ \ \ filename\ +=\ ext}
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{keywordflow}{return}\ filename}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00114\ }

\end{DoxyCode}


References \mbox{\hyperlink{prime__search_8m_source_l00010}{i}}, and \mbox{\hyperlink{network_2download_8py_source_l00079}{pip.\+\_\+internal.\+network.\+download.\+parse\+\_\+content\+\_\+disposition()}}.



Referenced by \mbox{\hyperlink{network_2download_8py_source_l00164}{Batch\+Downloader.\+\_\+\+\_\+call\+\_\+\+\_\+()}}, and \mbox{\hyperlink{network_2download_8py_source_l00131}{Downloader.\+\_\+\+\_\+call\+\_\+\+\_\+()}}.

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d1/d20/namespacepip_1_1__internal_1_1network_1_1download_a41baacf305c8dfebd740372430df40cc_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d1/d20/namespacepip_1_1__internal_1_1network_1_1download_a41baacf305c8dfebd740372430df40cc_icgraph}
\end{center}
\end{figure}
\Hypertarget{namespacepip_1_1__internal_1_1network_1_1download_a0c05c1be75525de49ed4e12b1e0e2681}\label{namespacepip_1_1__internal_1_1network_1_1download_a0c05c1be75525de49ed4e12b1e0e2681} 
\index{pip.\_internal.network.download@{pip.\_internal.network.download}!\_get\_http\_response\_size@{\_get\_http\_response\_size}}
\index{\_get\_http\_response\_size@{\_get\_http\_response\_size}!pip.\_internal.network.download@{pip.\_internal.network.download}}
\doxysubsubsection{\texorpdfstring{\_get\_http\_response\_size()}{\_get\_http\_response\_size()}}
{\footnotesize\ttfamily  Optional\mbox{[}int\mbox{]} \+\_\+get\+\_\+http\+\_\+response\+\_\+size (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classpip_1_1__vendor_1_1requests_1_1models_1_1Response}{Response}}}]{resp }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line \mbox{\hyperlink{network_2download_8py_source_l00023}{23}} of file \mbox{\hyperlink{network_2download_8py_source}{download.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00023\ \textcolor{keyword}{def\ }\_get\_http\_response\_size(resp:\ Response)\ -\/>\ Optional[int]:}
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ int(\mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{resp.headers}}[\textcolor{stringliteral}{"{}content-\/length"{}}])}
\DoxyCodeLine{00026\ \ \ \ \ \textcolor{keywordflow}{except}\ (ValueError,\ KeyError,\ TypeError):}
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ }

\end{DoxyCode}


References \mbox{\hyperlink{prime__search_8m_source_l00010}{i}}.



Referenced by \mbox{\hyperlink{network_2download_8py_source_l00034}{pip.\+\_\+internal.\+network.\+download.\+\_\+prepare\+\_\+download()}}.

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d1/d20/namespacepip_1_1__internal_1_1network_1_1download_a0c05c1be75525de49ed4e12b1e0e2681_icgraph}
\end{center}
\end{figure}
\Hypertarget{namespacepip_1_1__internal_1_1network_1_1download_a9d3cbfed7d037fec8367df482ea1f765}\label{namespacepip_1_1__internal_1_1network_1_1download_a9d3cbfed7d037fec8367df482ea1f765} 
\index{pip.\_internal.network.download@{pip.\_internal.network.download}!\_http\_get\_download@{\_http\_get\_download}}
\index{\_http\_get\_download@{\_http\_get\_download}!pip.\_internal.network.download@{pip.\_internal.network.download}}
\doxysubsubsection{\texorpdfstring{\_http\_get\_download()}{\_http\_get\_download()}}
{\footnotesize\ttfamily  \mbox{\hyperlink{classpip_1_1__vendor_1_1requests_1_1models_1_1Response}{Response}} \+\_\+http\+\_\+get\+\_\+download (\begin{DoxyParamCaption}\item[{Pip\+Session}]{session,  }\item[{\mbox{\hyperlink{classpip_1_1__internal_1_1models_1_1link_1_1Link}{Link}}}]{link }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line \mbox{\hyperlink{network_2download_8py_source_l00115}{115}} of file \mbox{\hyperlink{network_2download_8py_source}{download.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00115\ \textcolor{keyword}{def\ }\_http\_get\_download(session:\ PipSession,\ link:\ Link)\ -\/>\ Response:}
\DoxyCodeLine{00116\ \ \ \ \ target\_url\ =\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{link.url.split}}(\textcolor{stringliteral}{"{}\#"{}},\ 1)[0]}
\DoxyCodeLine{00117\ \ \ \ \ resp\ =\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{session.get}}(target\_url,\ headers=HEADERS,\ stream=\textcolor{keyword}{True})}
\DoxyCodeLine{00118\ \ \ \ \ raise\_for\_status(resp)}
\DoxyCodeLine{00119\ \ \ \ \ \textcolor{keywordflow}{return}\ resp}
\DoxyCodeLine{00120\ }
\DoxyCodeLine{00121\ }

\end{DoxyCode}


References \mbox{\hyperlink{prime__search_8m_source_l00010}{i}}.



Referenced by \mbox{\hyperlink{network_2download_8py_source_l00164}{Batch\+Downloader.\+\_\+\+\_\+call\+\_\+\+\_\+()}}, and \mbox{\hyperlink{network_2download_8py_source_l00131}{Downloader.\+\_\+\+\_\+call\+\_\+\+\_\+()}}.

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d1/d20/namespacepip_1_1__internal_1_1network_1_1download_a9d3cbfed7d037fec8367df482ea1f765_icgraph}
\end{center}
\end{figure}
\Hypertarget{namespacepip_1_1__internal_1_1network_1_1download_a7f2e867209b162e3715eb1a0c2405e10}\label{namespacepip_1_1__internal_1_1network_1_1download_a7f2e867209b162e3715eb1a0c2405e10} 
\index{pip.\_internal.network.download@{pip.\_internal.network.download}!\_prepare\_download@{\_prepare\_download}}
\index{\_prepare\_download@{\_prepare\_download}!pip.\_internal.network.download@{pip.\_internal.network.download}}
\doxysubsubsection{\texorpdfstring{\_prepare\_download()}{\_prepare\_download()}}
{\footnotesize\ttfamily  Iterable\mbox{[}bytes\mbox{]} \+\_\+prepare\+\_\+download (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classpip_1_1__vendor_1_1requests_1_1models_1_1Response}{Response}}}]{resp,  }\item[{\mbox{\hyperlink{classpip_1_1__internal_1_1models_1_1link_1_1Link}{Link}}}]{link,  }\item[{str}]{progress\+\_\+bar }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line \mbox{\hyperlink{network_2download_8py_source_l00030}{30}} of file \mbox{\hyperlink{network_2download_8py_source}{download.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00034\ )\ -\/>\ Iterable[bytes]:}
\DoxyCodeLine{00035\ \ \ \ \ total\_length\ =\ \_get\_http\_response\_size(resp)}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{keywordflow}{if}\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{link.netloc}}\ ==\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{PyPI.file\_storage\_domain}}:}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ url\ =\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{link.show\_url}}}
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ url\ =\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{link.url\_without\_fragment}}}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ \ \ logged\_url\ =\ redact\_auth\_from\_url(url)}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keywordflow}{if}\ total\_length:}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ logged\_url\ =\ \textcolor{stringliteral}{"{}\{\}\ (\{\})"{}}.format(logged\_url,\ format\_size(total\_length))}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{keywordflow}{if}\ is\_from\_cache(resp):}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{logger.info}}(\textcolor{stringliteral}{"{}Using\ cached\ \%s"{}},\ logged\_url)}
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{logger.info}}(\textcolor{stringliteral}{"{}Downloading\ \%s"{}},\ logged\_url)}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{keywordflow}{if}\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{logger.getEffectiveLevel}}()\ >\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{logging.INFO}}:}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ show\_progress\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keywordflow}{elif}\ is\_from\_cache(resp):}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ show\_progress\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keywordflow}{elif}\ \textcolor{keywordflow}{not}\ total\_length:}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ show\_progress\ =\ \textcolor{keyword}{True}}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keywordflow}{elif}\ total\_length\ >\ (40\ *\ 1000):}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ show\_progress\ =\ \textcolor{keyword}{True}}
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ show\_progress\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \ \ \ \ chunks\ =\ response\_chunks(resp,\ CONTENT\_CHUNK\_SIZE)}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ show\_progress:}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ chunks}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \ \ renderer\ =\ get\_download\_progress\_renderer(bar\_type=progress\_bar,\ size=total\_length)}
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{renderer}}(chunks)}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ }

\end{DoxyCode}


References \mbox{\hyperlink{network_2download_8py_source_l00023}{pip.\+\_\+internal.\+network.\+download.\+\_\+get\+\_\+http\+\_\+response\+\_\+size()}}, and \mbox{\hyperlink{prime__search_8m_source_l00010}{i}}.



Referenced by \mbox{\hyperlink{network_2download_8py_source_l00164}{Batch\+Downloader.\+\_\+\+\_\+call\+\_\+\+\_\+()}}, and \mbox{\hyperlink{network_2download_8py_source_l00131}{Downloader.\+\_\+\+\_\+call\+\_\+\+\_\+()}}.

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=341pt]{d1/d20/namespacepip_1_1__internal_1_1network_1_1download_a7f2e867209b162e3715eb1a0c2405e10_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d1/d20/namespacepip_1_1__internal_1_1network_1_1download_a7f2e867209b162e3715eb1a0c2405e10_icgraph}
\end{center}
\end{figure}
\Hypertarget{namespacepip_1_1__internal_1_1network_1_1download_a6289b27c6afff04550bb5808b484b4ef}\label{namespacepip_1_1__internal_1_1network_1_1download_a6289b27c6afff04550bb5808b484b4ef} 
\index{pip.\_internal.network.download@{pip.\_internal.network.download}!parse\_content\_disposition@{parse\_content\_disposition}}
\index{parse\_content\_disposition@{parse\_content\_disposition}!pip.\_internal.network.download@{pip.\_internal.network.download}}
\doxysubsubsection{\texorpdfstring{parse\_content\_disposition()}{parse\_content\_disposition()}}
{\footnotesize\ttfamily  str parse\+\_\+content\+\_\+disposition (\begin{DoxyParamCaption}\item[{str}]{content\+\_\+disposition,  }\item[{str}]{default\+\_\+filename }\end{DoxyParamCaption})}

\begin{DoxyVerb}Parse the "filename" value from a Content-Disposition header, and
return the default filename if the result is empty.
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{network_2download_8py_source_l00079}{79}} of file \mbox{\hyperlink{network_2download_8py_source}{download.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00079\ \textcolor{keyword}{def\ }parse\_content\_disposition(content\_disposition:\ str,\ default\_filename:\ str)\ -\/>\ str:}
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{00081\ \textcolor{stringliteral}{\ \ \ \ Parse\ the\ "{}filename"{}\ value\ from\ a\ Content-\/Disposition\ header,\ and}}
\DoxyCodeLine{00082\ \textcolor{stringliteral}{\ \ \ \ return\ the\ default\ filename\ if\ the\ result\ is\ empty.}}
\DoxyCodeLine{00083\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{00084\ \ \ \ \ m\ =\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{email.message.Message}}()}
\DoxyCodeLine{00085\ \ \ \ \ m[\textcolor{stringliteral}{"{}content-\/type"{}}]\ =\ content\_disposition}
\DoxyCodeLine{00086\ \ \ \ \ filename\ =\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{m.get\_param}}(\textcolor{stringliteral}{"{}filename"{}})}
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{keywordflow}{if}\ filename:}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ We\ need\ to\ sanitize\ the\ filename\ to\ prevent\ directory\ traversal}}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ in\ case\ the\ filename\ contains\ "{}.."{}\ path\ parts.}}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ filename\ =\ sanitize\_content\_filename(str(filename))}
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{keywordflow}{return}\ filename\ \textcolor{keywordflow}{or}\ default\_filename}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00093\ }

\end{DoxyCode}


References \mbox{\hyperlink{prime__search_8m_source_l00010}{i}}, and \mbox{\hyperlink{network_2download_8py_source_l00072}{pip.\+\_\+internal.\+network.\+download.\+sanitize\+\_\+content\+\_\+filename()}}.



Referenced by \mbox{\hyperlink{network_2download_8py_source_l00094}{pip.\+\_\+internal.\+network.\+download.\+\_\+get\+\_\+http\+\_\+response\+\_\+filename()}}.

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d1/d20/namespacepip_1_1__internal_1_1network_1_1download_a6289b27c6afff04550bb5808b484b4ef_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d1/d20/namespacepip_1_1__internal_1_1network_1_1download_a6289b27c6afff04550bb5808b484b4ef_icgraph}
\end{center}
\end{figure}
\Hypertarget{namespacepip_1_1__internal_1_1network_1_1download_a3ad12e07333275aba8cbd817d152afe1}\label{namespacepip_1_1__internal_1_1network_1_1download_a3ad12e07333275aba8cbd817d152afe1} 
\index{pip.\_internal.network.download@{pip.\_internal.network.download}!sanitize\_content\_filename@{sanitize\_content\_filename}}
\index{sanitize\_content\_filename@{sanitize\_content\_filename}!pip.\_internal.network.download@{pip.\_internal.network.download}}
\doxysubsubsection{\texorpdfstring{sanitize\_content\_filename()}{sanitize\_content\_filename()}}
{\footnotesize\ttfamily  str sanitize\+\_\+content\+\_\+filename (\begin{DoxyParamCaption}\item[{str}]{filename }\end{DoxyParamCaption})}

\begin{DoxyVerb}Sanitize the "filename" value from a Content-Disposition header.
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{network_2download_8py_source_l00072}{72}} of file \mbox{\hyperlink{network_2download_8py_source}{download.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00072\ \textcolor{keyword}{def\ }sanitize\_content\_filename(filename:\ str)\ -\/>\ str:}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{00074\ \textcolor{stringliteral}{\ \ \ \ Sanitize\ the\ "{}filename"{}\ value\ from\ a\ Content-\/Disposition\ header.}}
\DoxyCodeLine{00075\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{prime__search_8m_a6f6ccfcf58b31cb6412107d9d5281426}{os.path.basename}}(filename)}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ }

\end{DoxyCode}


References \mbox{\hyperlink{prime__search_8m_source_l00010}{i}}.



Referenced by \mbox{\hyperlink{network_2download_8py_source_l00079}{pip.\+\_\+internal.\+network.\+download.\+parse\+\_\+content\+\_\+disposition()}}.

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d1/d20/namespacepip_1_1__internal_1_1network_1_1download_a3ad12e07333275aba8cbd817d152afe1_icgraph}
\end{center}
\end{figure}


\doxysubsection{Variable Documentation}
\Hypertarget{namespacepip_1_1__internal_1_1network_1_1download_a0b14e488ae28d98d262453f3e9cd6e4d}\label{namespacepip_1_1__internal_1_1network_1_1download_a0b14e488ae28d98d262453f3e9cd6e4d} 
\index{pip.\_internal.network.download@{pip.\_internal.network.download}!logger@{logger}}
\index{logger@{logger}!pip.\_internal.network.download@{pip.\_internal.network.download}}
\doxysubsubsection{\texorpdfstring{logger}{logger}}
{\footnotesize\ttfamily logger = logging.\+get\+Logger(\+\_\+\+\_\+name\+\_\+\+\_\+)}



Definition at line \mbox{\hyperlink{network_2download_8py_source_l00020}{20}} of file \mbox{\hyperlink{network_2download_8py_source}{download.\+py}}.

